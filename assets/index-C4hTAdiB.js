function AI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function mv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gv={exports:{}},gc={},yv={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),RI=Symbol.for("react.portal"),CI=Symbol.for("react.fragment"),PI=Symbol.for("react.strict_mode"),kI=Symbol.for("react.profiler"),xI=Symbol.for("react.provider"),NI=Symbol.for("react.context"),bI=Symbol.for("react.forward_ref"),OI=Symbol.for("react.suspense"),DI=Symbol.for("react.memo"),MI=Symbol.for("react.lazy"),vg=Symbol.iterator;function LI(t){return t===null||typeof t!="object"?null:(t=vg&&t[vg]||t["@@iterator"],typeof t=="function"?t:null)}var _v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vv=Object.assign,wv={};function oo(t,e,n){this.props=t,this.context=e,this.refs=wv,this.updater=n||_v}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ev(){}Ev.prototype=oo.prototype;function Nf(t,e,n){this.props=t,this.context=e,this.refs=wv,this.updater=n||_v}var bf=Nf.prototype=new Ev;bf.constructor=Nf;vv(bf,oo.prototype);bf.isPureReactComponent=!0;var wg=Array.isArray,Tv=Object.prototype.hasOwnProperty,Of={current:null},Iv={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Tv.call(e,r)&&!Iv.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ha,type:t,key:s,ref:o,props:i,_owner:Of.current}}function VI(t,e){return{$$typeof:Ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Df(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ha}function UI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eg=/\/+/g;function _h(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UI(""+t.key):e.toString(36)}function Xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ha:case RI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+_h(o,0):r,wg(i)?(n="",t!=null&&(n=t.replace(Eg,"$&/")+"/"),Xl(i,e,n,"",function(c){return c})):i!=null&&(Df(i)&&(i=VI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Eg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+_h(s,a);o+=Xl(s,e,n,u,i)}else if(u=LI(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+_h(s,a++),o+=Xl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rl(t,e,n){if(t==null)return t;var r=[],i=0;return Xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},Jl={transition:null},jI={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:Of};function Av(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Rl,forEach:function(t,e,n){Rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rl(t,function(){e++}),e},toArray:function(t){return Rl(t,function(e){return e})||[]},only:function(t){if(!Df(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=oo;ue.Fragment=CI;ue.Profiler=kI;ue.PureComponent=Nf;ue.StrictMode=PI;ue.Suspense=OI;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jI;ue.act=Av;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Of.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Tv.call(e,u)&&!Iv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ha,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:NI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xI,_context:t},t.Consumer=t};ue.createElement=Sv;ue.createFactory=function(t){var e=Sv.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:bI,render:t}};ue.isValidElement=Df;ue.lazy=function(t){return{$$typeof:MI,_payload:{_status:-1,_result:t},_init:FI}};ue.memo=function(t,e){return{$$typeof:DI,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Jl.transition;Jl.transition={};try{t()}finally{Jl.transition=e}};ue.unstable_act=Av;ue.useCallback=function(t,e){return zt.current.useCallback(t,e)};ue.useContext=function(t){return zt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return zt.current.useEffect(t,e)};ue.useId=function(){return zt.current.useId()};ue.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return zt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};ue.useRef=function(t){return zt.current.useRef(t)};ue.useState=function(t){return zt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return zt.current.useTransition()};ue.version="18.3.1";yv.exports=ue;var G=yv.exports;const Yr=mv(G),BI=AI({__proto__:null,default:Yr},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=G,$I=Symbol.for("react.element"),WI=Symbol.for("react.fragment"),HI=Object.prototype.hasOwnProperty,qI=zI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GI={key:!0,ref:!0,__self:!0,__source:!0};function Rv(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HI.call(e,r)&&!GI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$I,type:t,key:s,ref:o,props:i,_owner:qI.current}}gc.Fragment=WI;gc.jsx=Rv;gc.jsxs=Rv;gv.exports=gc;var B=gv.exports,Cv={exports:{}},dn={},Pv={exports:{}},kv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,V){var j=U.length;U.push(V);e:for(;0<j;){var J=j-1>>>1,q=U[J];if(0<i(q,V))U[J]=V,U[j]=q,j=J;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],j=U.pop();if(j!==V){U[0]=j;e:for(var J=0,q=U.length,X=q>>>1;J<X;){var Q=2*(J+1)-1,W=U[Q],re=Q+1,de=U[re];if(0>i(W,j))re<q&&0>i(de,W)?(U[J]=de,U[re]=j,J=re):(U[J]=W,U[Q]=j,J=Q);else if(re<q&&0>i(de,j))U[J]=de,U[re]=j,J=re;else break e}}return V}function i(U,V){var j=U.sortIndex-V.sortIndex;return j!==0?j:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,f=3,g=!1,v=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(U){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=U)r(c),V.sortIndex=V.expirationTime,e(u,V);else break;V=n(c)}}function O(U){if(C=!1,R(U),!v)if(n(u)!==null)v=!0,D(M);else{var V=n(c);V!==null&&N(O,V.startTime-U)}}function M(U,V){v=!1,C&&(C=!1,w(m),m=-1),g=!0;var j=f;try{for(R(V),d=n(u);d!==null&&(!(d.expirationTime>V)||U&&!I());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var q=J(d.expirationTime<=V);V=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(u)&&r(u),R(V)}else r(u);d=n(u)}if(d!==null)var X=!0;else{var Q=n(c);Q!==null&&N(O,Q.startTime-V),X=!1}return X}finally{d=null,f=j,g=!1}}var b=!1,S=null,m=-1,y=5,E=-1;function I(){return!(t.unstable_now()-E<y)}function P(){if(S!==null){var U=t.unstable_now();E=U;var V=!0;try{V=S(!0,U)}finally{V?T():(b=!1,S=null)}}else b=!1}var T;if(typeof A=="function")T=function(){A(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,z=L.port2;L.port1.onmessage=P,T=function(){z.postMessage(null)}}else T=function(){x(P,0)};function D(U){S=U,b||(b=!0,T())}function N(U,V){m=x(function(){U(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,D(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var j=f;f=V;try{return U()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=f;f=U;try{return V()}finally{f=j}},t.unstable_scheduleCallback=function(U,V,j){var J=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?J+j:J):j=J,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=j+q,U={id:h++,callback:V,priorityLevel:U,startTime:j,expirationTime:q,sortIndex:-1},j>J?(U.sortIndex=j,e(c,U),n(u)===null&&U===n(c)&&(C?(w(m),m=-1):C=!0,N(O,j-J))):(U.sortIndex=q,e(u,U),v||g||(v=!0,D(M))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var V=f;return function(){var j=f;f=V;try{return U.apply(this,arguments)}finally{f=j}}}})(kv);Pv.exports=kv;var KI=Pv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=G,hn=KI;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xv=new Set,ma={};function es(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(ma[t]=e,t=0;t<e.length;t++)xv.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=Object.prototype.hasOwnProperty,YI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tg={},Ig={};function XI(t){return cd.call(Ig,t)?!0:cd.call(Tg,t)?!1:YI.test(t)?Ig[t]=!0:(Tg[t]=!0,!1)}function JI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZI(t,e,n,r){if(e===null||typeof e>"u"||JI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mf=/[\-:]([a-z])/g;function Lf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mf,Lf);Et[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mf,Lf);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mf,Lf);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vf(t,e,n,r){var i=Et.hasOwnProperty(e)?Et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZI(e,n,i,r)&&(n=null),r||i===null?XI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),vs=Symbol.for("react.portal"),ws=Symbol.for("react.fragment"),Uf=Symbol.for("react.strict_mode"),hd=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),bv=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),fd=Symbol.for("react.suspense_list"),jf=Symbol.for("react.memo"),Vr=Symbol.for("react.lazy"),Ov=Symbol.for("react.offscreen"),Sg=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=Sg&&t[Sg]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,vh;function Wo(t){if(vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vh=e&&e[1]||""}return`
`+vh+t}var wh=!1;function Eh(t,e){if(!t||wh)return"";wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wo(t):""}function eS(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=Eh(t.type,!1),t;case 11:return t=Eh(t.type.render,!1),t;case 1:return t=Eh(t.type,!0),t;default:return""}}function pd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case vs:return"Portal";case hd:return"Profiler";case Uf:return"StrictMode";case dd:return"Suspense";case fd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bv:return(t.displayName||"Context")+".Consumer";case Nv:return(t._context.displayName||"Context")+".Provider";case Ff:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jf:return e=t.displayName||null,e!==null?e:pd(t.type)||"Memo";case Vr:e=t._payload,t=t._init;try{return pd(t(e))}catch{}}return null}function tS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pd(e);case 8:return e===Uf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nS(t){var e=Dv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pl(t){t._valueTracker||(t._valueTracker=nS(t))}function Mv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function md(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ag(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lv(t,e){e=e.checked,e!=null&&Vf(t,"checked",e,!1)}function gd(t,e){Lv(t,e);var n=ui(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&yd(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yd(t,e,n){(e!=="number"||vu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ho=Array.isArray;function Ds(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ui(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ho(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ui(n)}}function Vv(t,e){var n=ui(e.value),r=ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,Fv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rS=["Webkit","ms","Moz","O"];Object.keys(ea).forEach(function(t){rS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ea[e]=ea[t]})});function jv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ea.hasOwnProperty(t)&&ea[t]?(""+e).trim():e+"px"}function Bv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iS=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wd(t,e){if(e){if(iS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Ed(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Td=null;function Bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Id=null,Ms=null,Ls=null;function kg(t){if(t=Ka(t)){if(typeof Id!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Ec(e),Id(t.stateNode,t.type,e))}}function zv(t){Ms?Ls?Ls.push(t):Ls=[t]:Ms=t}function $v(){if(Ms){var t=Ms,e=Ls;if(Ls=Ms=null,kg(t),e)for(t=0;t<e.length;t++)kg(e[t])}}function Wv(t,e){return t(e)}function Hv(){}var Th=!1;function qv(t,e,n){if(Th)return t(e,n);Th=!0;try{return Wv(t,e,n)}finally{Th=!1,(Ms!==null||Ls!==null)&&(Hv(),$v())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var r=Ec(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Sd=!1;if(_r)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Sd=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Sd=!1}function sS(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ta=!1,wu=null,Eu=!1,Ad=null,oS={onError:function(t){ta=!0,wu=t}};function aS(t,e,n,r,i,s,o,a,u){ta=!1,wu=null,sS.apply(oS,arguments)}function lS(t,e,n,r,i,s,o,a,u){if(aS.apply(this,arguments),ta){if(ta){var c=wu;ta=!1,wu=null}else throw Error(Y(198));Eu||(Eu=!0,Ad=c)}}function ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xg(t){if(ts(t)!==t)throw Error(Y(188))}function uS(t){var e=t.alternate;if(!e){if(e=ts(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xg(i),t;if(s===r)return xg(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Kv(t){return t=uS(t),t!==null?Qv(t):null}function Qv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qv(t);if(e!==null)return e;t=t.sibling}return null}var Yv=hn.unstable_scheduleCallback,Ng=hn.unstable_cancelCallback,cS=hn.unstable_shouldYield,hS=hn.unstable_requestPaint,Xe=hn.unstable_now,dS=hn.unstable_getCurrentPriorityLevel,zf=hn.unstable_ImmediatePriority,Xv=hn.unstable_UserBlockingPriority,Tu=hn.unstable_NormalPriority,fS=hn.unstable_LowPriority,Jv=hn.unstable_IdlePriority,yc=null,Gn=null;function pS(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(yc,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:yS,mS=Math.log,gS=Math.LN2;function yS(t){return t>>>=0,t===0?32:31-(mS(t)/gS|0)|0}var xl=64,Nl=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qo(a):(s&=o,s!==0&&(r=qo(s)))}else o=n&~i,o!==0?r=qo(o):s!==0&&(r=qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function _S(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=_S(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Rd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zv(){var t=xl;return xl<<=1,!(xl&4194240)&&(xl=64),t}function Ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function wS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $f(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function e0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var t0,Wf,n0,r0,i0,Cd=!1,bl=[],Xr=null,Jr=null,Zr=null,_a=new Map,va=new Map,Fr=[],ES="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bg(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":_a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function Do(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ka(e),e!==null&&Wf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function TS(t,e,n,r,i){switch(e){case"focusin":return Xr=Do(Xr,t,e,n,r,i),!0;case"dragenter":return Jr=Do(Jr,t,e,n,r,i),!0;case"mouseover":return Zr=Do(Zr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _a.set(s,Do(_a.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,va.set(s,Do(va.get(s)||null,t,e,n,r,i)),!0}return!1}function s0(t){var e=bi(t.target);if(e!==null){var n=ts(e);if(n!==null){if(e=n.tag,e===13){if(e=Gv(n),e!==null){t.blockedOn=e,i0(t.priority,function(){n0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Td=r,n.target.dispatchEvent(r),Td=null}else return e=Ka(n),e!==null&&Wf(e),t.blockedOn=n,!1;e.shift()}return!0}function Og(t,e,n){Zl(t)&&n.delete(e)}function IS(){Cd=!1,Xr!==null&&Zl(Xr)&&(Xr=null),Jr!==null&&Zl(Jr)&&(Jr=null),Zr!==null&&Zl(Zr)&&(Zr=null),_a.forEach(Og),va.forEach(Og)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,Cd||(Cd=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,IS)))}function wa(t){function e(i){return Mo(i,t)}if(0<bl.length){Mo(bl[0],t);for(var n=1;n<bl.length;n++){var r=bl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xr!==null&&Mo(Xr,t),Jr!==null&&Mo(Jr,t),Zr!==null&&Mo(Zr,t),_a.forEach(e),va.forEach(e),n=0;n<Fr.length;n++)r=Fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)s0(n),n.blockedOn===null&&Fr.shift()}var Vs=Rr.ReactCurrentBatchConfig,Su=!0;function SS(t,e,n,r){var i=Te,s=Vs.transition;Vs.transition=null;try{Te=1,Hf(t,e,n,r)}finally{Te=i,Vs.transition=s}}function AS(t,e,n,r){var i=Te,s=Vs.transition;Vs.transition=null;try{Te=4,Hf(t,e,n,r)}finally{Te=i,Vs.transition=s}}function Hf(t,e,n,r){if(Su){var i=Pd(t,e,n,r);if(i===null)Oh(t,e,r,Au,n),bg(t,r);else if(TS(i,t,e,n,r))r.stopPropagation();else if(bg(t,r),e&4&&-1<ES.indexOf(t)){for(;i!==null;){var s=Ka(i);if(s!==null&&t0(s),s=Pd(t,e,n,r),s===null&&Oh(t,e,r,Au,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Oh(t,e,r,null,n)}}var Au=null;function Pd(t,e,n,r){if(Au=null,t=Bf(r),t=bi(t),t!==null)if(e=ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Au=t,null}function o0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dS()){case zf:return 1;case Xv:return 4;case Tu:case fS:return 16;case Jv:return 536870912;default:return 16}default:return 16}}var qr=null,qf=null,eu=null;function a0(){if(eu)return eu;var t,e=qf,n=e.length,r,i="value"in qr?qr.value:qr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return eu=i.slice(t,1<r?1-r:void 0)}function tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function Dg(){return!1}function fn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ol:Dg,this.isPropagationStopped=Dg,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gf=fn(ao),Ga=$e({},ao,{view:0,detail:0}),RS=fn(Ga),Sh,Ah,Lo,_c=$e({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(Sh=t.screenX-Lo.screenX,Ah=t.screenY-Lo.screenY):Ah=Sh=0,Lo=t),Sh)},movementY:function(t){return"movementY"in t?t.movementY:Ah}}),Mg=fn(_c),CS=$e({},_c,{dataTransfer:0}),PS=fn(CS),kS=$e({},Ga,{relatedTarget:0}),Rh=fn(kS),xS=$e({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),NS=fn(xS),bS=$e({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OS=fn(bS),DS=$e({},ao,{data:0}),Lg=fn(DS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function US(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VS[t])?!!e[t]:!1}function Kf(){return US}var FS=$e({},Ga,{key:function(t){if(t.key){var e=MS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kf,charCode:function(t){return t.type==="keypress"?tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jS=fn(FS),BS=$e({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vg=fn(BS),zS=$e({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kf}),$S=fn(zS),WS=$e({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),HS=fn(WS),qS=$e({},_c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=fn(qS),KS=[9,13,27,32],Qf=_r&&"CompositionEvent"in window,na=null;_r&&"documentMode"in document&&(na=document.documentMode);var QS=_r&&"TextEvent"in window&&!na,l0=_r&&(!Qf||na&&8<na&&11>=na),Ug=" ",Fg=!1;function u0(t,e){switch(t){case"keyup":return KS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Es=!1;function YS(t,e){switch(t){case"compositionend":return c0(e);case"keypress":return e.which!==32?null:(Fg=!0,Ug);case"textInput":return t=e.data,t===Ug&&Fg?null:t;default:return null}}function XS(t,e){if(Es)return t==="compositionend"||!Qf&&u0(t,e)?(t=a0(),eu=qf=qr=null,Es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return l0&&e.locale!=="ko"?null:e.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JS[t.type]:e==="textarea"}function h0(t,e,n,r){zv(r),e=Ru(e,"onChange"),0<e.length&&(n=new Gf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ra=null,Ea=null;function ZS(t){T0(t,0)}function vc(t){var e=Ss(t);if(Mv(e))return t}function e2(t,e){if(t==="change")return e}var d0=!1;if(_r){var Ch;if(_r){var Ph="oninput"in document;if(!Ph){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),Ph=typeof Bg.oninput=="function"}Ch=Ph}else Ch=!1;d0=Ch&&(!document.documentMode||9<document.documentMode)}function zg(){ra&&(ra.detachEvent("onpropertychange",f0),Ea=ra=null)}function f0(t){if(t.propertyName==="value"&&vc(Ea)){var e=[];h0(e,Ea,t,Bf(t)),qv(ZS,e)}}function t2(t,e,n){t==="focusin"?(zg(),ra=e,Ea=n,ra.attachEvent("onpropertychange",f0)):t==="focusout"&&zg()}function n2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vc(Ea)}function r2(t,e){if(t==="click")return vc(e)}function i2(t,e){if(t==="input"||t==="change")return vc(e)}function s2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dn=typeof Object.is=="function"?Object.is:s2;function Ta(t,e){if(Dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cd.call(e,i)||!Dn(t[i],e[i]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,e){var n=$g(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$g(n)}}function p0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?p0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function m0(){for(var t=window,e=vu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vu(t.document)}return e}function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o2(t){var e=m0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&p0(n.ownerDocument.documentElement,n)){if(r!==null&&Yf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Wg(n,s);var o=Wg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a2=_r&&"documentMode"in document&&11>=document.documentMode,Ts=null,kd=null,ia=null,xd=!1;function Hg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xd||Ts==null||Ts!==vu(r)||(r=Ts,"selectionStart"in r&&Yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ia&&Ta(ia,r)||(ia=r,r=Ru(kd,"onSelect"),0<r.length&&(e=new Gf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ts)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Is={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},kh={},g0={};_r&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function wc(t){if(kh[t])return kh[t];if(!Is[t])return t;var e=Is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in g0)return kh[t]=e[n];return t}var y0=wc("animationend"),_0=wc("animationiteration"),v0=wc("animationstart"),w0=wc("transitionend"),E0=new Map,qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(t,e){E0.set(t,e),es(e,[t])}for(var xh=0;xh<qg.length;xh++){var Nh=qg[xh],l2=Nh.toLowerCase(),u2=Nh[0].toUpperCase()+Nh.slice(1);mi(l2,"on"+u2)}mi(y0,"onAnimationEnd");mi(_0,"onAnimationIteration");mi(v0,"onAnimationStart");mi("dblclick","onDoubleClick");mi("focusin","onFocus");mi("focusout","onBlur");mi(w0,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function Gg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lS(r,e,void 0,t),t.currentTarget=null}function T0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Gg(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Gg(i,a,c),s=u}}}if(Eu)throw t=Ad,Eu=!1,Ad=null,t}function be(t,e){var n=e[Md];n===void 0&&(n=e[Md]=new Set);var r=t+"__bubble";n.has(r)||(I0(e,t,2,!1),n.add(r))}function bh(t,e,n){var r=0;e&&(r|=4),I0(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Ia(t){if(!t[Ml]){t[Ml]=!0,xv.forEach(function(n){n!=="selectionchange"&&(c2.has(n)||bh(n,!1,t),bh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,bh("selectionchange",!1,e))}}function I0(t,e,n,r){switch(o0(e)){case 1:var i=SS;break;case 4:i=AS;break;default:i=Hf}n=i.bind(null,e,n,t),i=void 0,!Sd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Oh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=bi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qv(function(){var c=s,h=Bf(n),d=[];e:{var f=E0.get(t);if(f!==void 0){var g=Gf,v=t;switch(t){case"keypress":if(tu(n)===0)break e;case"keydown":case"keyup":g=jS;break;case"focusin":v="focus",g=Rh;break;case"focusout":v="blur",g=Rh;break;case"beforeblur":case"afterblur":g=Rh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=PS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$S;break;case y0:case _0:case v0:g=NS;break;case w0:g=HS;break;case"scroll":g=RS;break;case"wheel":g=GS;break;case"copy":case"cut":case"paste":g=OS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Vg}var C=(e&4)!==0,x=!C&&t==="scroll",w=C?f!==null?f+"Capture":null:f;C=[];for(var A=c,R;A!==null;){R=A;var O=R.stateNode;if(R.tag===5&&O!==null&&(R=O,w!==null&&(O=ya(A,w),O!=null&&C.push(Sa(A,O,R)))),x)break;A=A.return}0<C.length&&(f=new g(f,v,null,n,h),d.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Td&&(v=n.relatedTarget||n.fromElement)&&(bi(v)||v[vr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?bi(v):null,v!==null&&(x=ts(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(C=Mg,O="onMouseLeave",w="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(C=Vg,O="onPointerLeave",w="onPointerEnter",A="pointer"),x=g==null?f:Ss(g),R=v==null?f:Ss(v),f=new C(O,A+"leave",g,n,h),f.target=x,f.relatedTarget=R,O=null,bi(h)===c&&(C=new C(w,A+"enter",v,n,h),C.target=R,C.relatedTarget=x,O=C),x=O,g&&v)t:{for(C=g,w=v,A=0,R=C;R;R=hs(R))A++;for(R=0,O=w;O;O=hs(O))R++;for(;0<A-R;)C=hs(C),A--;for(;0<R-A;)w=hs(w),R--;for(;A--;){if(C===w||w!==null&&C===w.alternate)break t;C=hs(C),w=hs(w)}C=null}else C=null;g!==null&&Kg(d,f,g,C,!1),v!==null&&x!==null&&Kg(d,x,v,C,!0)}}e:{if(f=c?Ss(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=e2;else if(jg(f))if(d0)M=i2;else{M=n2;var b=t2}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=r2);if(M&&(M=M(t,c))){h0(d,M,n,h);break e}b&&b(t,f,c),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&yd(f,"number",f.value)}switch(b=c?Ss(c):window,t){case"focusin":(jg(b)||b.contentEditable==="true")&&(Ts=b,kd=c,ia=null);break;case"focusout":ia=kd=Ts=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,Hg(d,n,h);break;case"selectionchange":if(a2)break;case"keydown":case"keyup":Hg(d,n,h)}var S;if(Qf)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Es?u0(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(l0&&n.locale!=="ko"&&(Es||m!=="onCompositionStart"?m==="onCompositionEnd"&&Es&&(S=a0()):(qr=h,qf="value"in qr?qr.value:qr.textContent,Es=!0)),b=Ru(c,m),0<b.length&&(m=new Lg(m,t,null,n,h),d.push({event:m,listeners:b}),S?m.data=S:(S=c0(n),S!==null&&(m.data=S)))),(S=QS?YS(t,n):XS(t,n))&&(c=Ru(c,"onBeforeInput"),0<c.length&&(h=new Lg("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}T0(d,e)})}function Sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ru(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ya(t,n),s!=null&&r.unshift(Sa(t,s,i)),s=ya(t,e),s!=null&&r.push(Sa(t,s,i))),t=t.return}return r}function hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=ya(n,s),u!=null&&o.unshift(Sa(n,u,a))):i||(u=ya(n,s),u!=null&&o.push(Sa(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var h2=/\r\n?/g,d2=/\u0000|\uFFFD/g;function Qg(t){return(typeof t=="string"?t:""+t).replace(h2,`
`).replace(d2,"")}function Ll(t,e,n){if(e=Qg(e),Qg(t)!==e&&n)throw Error(Y(425))}function Cu(){}var Nd=null,bd=null;function Od(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dd=typeof setTimeout=="function"?setTimeout:void 0,f2=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,p2=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(t){return Yg.resolve(null).then(t).catch(m2)}:Dd;function m2(t){setTimeout(function(){throw t})}function Dh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wa(e)}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+lo,Aa="__reactProps$"+lo,vr="__reactContainer$"+lo,Md="__reactEvents$"+lo,g2="__reactListeners$"+lo,y2="__reactHandles$"+lo;function bi(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[Wn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[Wn]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Ec(t){return t[Aa]||null}var Ld=[],As=-1;function gi(t){return{current:t}}function De(t){0>As||(t.current=Ld[As],Ld[As]=null,As--)}function ke(t,e){As++,Ld[As]=t.current,t.current=e}var ci={},Mt=gi(ci),Xt=gi(!1),Bi=ci;function Hs(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function Pu(){De(Xt),De(Mt)}function Jg(t,e,n){if(Mt.current!==ci)throw Error(Y(168));ke(Mt,e),ke(Xt,n)}function S0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,tS(t)||"Unknown",i));return $e({},n,r)}function ku(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,Bi=Mt.current,ke(Mt,t),ke(Xt,Xt.current),!0}function Zg(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=S0(t,e,Bi),r.__reactInternalMemoizedMergedChildContext=t,De(Xt),De(Mt),ke(Mt,t)):De(Xt),ke(Xt,n)}var ar=null,Tc=!1,Mh=!1;function A0(t){ar===null?ar=[t]:ar.push(t)}function _2(t){Tc=!0,A0(t)}function yi(){if(!Mh&&ar!==null){Mh=!0;var t=0,e=Te;try{var n=ar;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ar=null,Tc=!1}catch(i){throw ar!==null&&(ar=ar.slice(t+1)),Yv(zf,yi),i}finally{Te=e,Mh=!1}}return null}var Rs=[],Cs=0,xu=null,Nu=0,yn=[],_n=0,zi=null,ur=1,cr="";function Pi(t,e){Rs[Cs++]=Nu,Rs[Cs++]=xu,xu=t,Nu=e}function R0(t,e,n){yn[_n++]=ur,yn[_n++]=cr,yn[_n++]=zi,zi=t;var r=ur;t=cr;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ur=1<<32-bn(e)+i|n<<i|r,cr=s+t}else ur=1<<s|n<<i|r,cr=t}function Xf(t){t.return!==null&&(Pi(t,1),R0(t,1,0))}function Jf(t){for(;t===xu;)xu=Rs[--Cs],Rs[Cs]=null,Nu=Rs[--Cs],Rs[Cs]=null;for(;t===zi;)zi=yn[--_n],yn[_n]=null,cr=yn[--_n],yn[_n]=null,ur=yn[--_n],yn[_n]=null}var cn=null,an=null,Ue=!1,Nn=null;function C0(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,an=ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zi!==null?{id:ur,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,an=null,!0):!1;default:return!1}}function Vd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ud(t){if(Ue){var e=an;if(e){var n=e;if(!ey(t,e)){if(Vd(t))throw Error(Y(418));e=ei(n.nextSibling);var r=cn;e&&ey(t,e)?C0(r,n):(t.flags=t.flags&-4097|2,Ue=!1,cn=t)}}else{if(Vd(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ue=!1,cn=t}}}function ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Vl(t){if(t!==cn)return!1;if(!Ue)return ty(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Od(t.type,t.memoizedProps)),e&&(e=an)){if(Vd(t))throw P0(),Error(Y(418));for(;e;)C0(t,e),e=ei(e.nextSibling)}if(ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=cn?ei(t.stateNode.nextSibling):null;return!0}function P0(){for(var t=an;t;)t=ei(t.nextSibling)}function qs(){an=cn=null,Ue=!1}function Zf(t){Nn===null?Nn=[t]:Nn.push(t)}var v2=Rr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Ul(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ny(t){var e=t._init;return e(t._payload)}function k0(t){function e(w,A){if(t){var R=w.deletions;R===null?(w.deletions=[A],w.flags|=16):R.push(A)}}function n(w,A){if(!t)return null;for(;A!==null;)e(w,A),A=A.sibling;return null}function r(w,A){for(w=new Map;A!==null;)A.key!==null?w.set(A.key,A):w.set(A.index,A),A=A.sibling;return w}function i(w,A){return w=ii(w,A),w.index=0,w.sibling=null,w}function s(w,A,R){return w.index=R,t?(R=w.alternate,R!==null?(R=R.index,R<A?(w.flags|=2,A):R):(w.flags|=2,A)):(w.flags|=1048576,A)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,A,R,O){return A===null||A.tag!==6?(A=zh(R,w.mode,O),A.return=w,A):(A=i(A,R),A.return=w,A)}function u(w,A,R,O){var M=R.type;return M===ws?h(w,A,R.props.children,O,R.key):A!==null&&(A.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Vr&&ny(M)===A.type)?(O=i(A,R.props),O.ref=Vo(w,A,R),O.return=w,O):(O=lu(R.type,R.key,R.props,null,w.mode,O),O.ref=Vo(w,A,R),O.return=w,O)}function c(w,A,R,O){return A===null||A.tag!==4||A.stateNode.containerInfo!==R.containerInfo||A.stateNode.implementation!==R.implementation?(A=$h(R,w.mode,O),A.return=w,A):(A=i(A,R.children||[]),A.return=w,A)}function h(w,A,R,O,M){return A===null||A.tag!==7?(A=Ui(R,w.mode,O,M),A.return=w,A):(A=i(A,R),A.return=w,A)}function d(w,A,R){if(typeof A=="string"&&A!==""||typeof A=="number")return A=zh(""+A,w.mode,R),A.return=w,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Cl:return R=lu(A.type,A.key,A.props,null,w.mode,R),R.ref=Vo(w,null,A),R.return=w,R;case vs:return A=$h(A,w.mode,R),A.return=w,A;case Vr:var O=A._init;return d(w,O(A._payload),R)}if(Ho(A)||bo(A))return A=Ui(A,w.mode,R,null),A.return=w,A;Ul(w,A)}return null}function f(w,A,R,O){var M=A!==null?A.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return M!==null?null:a(w,A,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cl:return R.key===M?u(w,A,R,O):null;case vs:return R.key===M?c(w,A,R,O):null;case Vr:return M=R._init,f(w,A,M(R._payload),O)}if(Ho(R)||bo(R))return M!==null?null:h(w,A,R,O,null);Ul(w,R)}return null}function g(w,A,R,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(R)||null,a(A,w,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Cl:return w=w.get(O.key===null?R:O.key)||null,u(A,w,O,M);case vs:return w=w.get(O.key===null?R:O.key)||null,c(A,w,O,M);case Vr:var b=O._init;return g(w,A,R,b(O._payload),M)}if(Ho(O)||bo(O))return w=w.get(R)||null,h(A,w,O,M,null);Ul(A,O)}return null}function v(w,A,R,O){for(var M=null,b=null,S=A,m=A=0,y=null;S!==null&&m<R.length;m++){S.index>m?(y=S,S=null):y=S.sibling;var E=f(w,S,R[m],O);if(E===null){S===null&&(S=y);break}t&&S&&E.alternate===null&&e(w,S),A=s(E,A,m),b===null?M=E:b.sibling=E,b=E,S=y}if(m===R.length)return n(w,S),Ue&&Pi(w,m),M;if(S===null){for(;m<R.length;m++)S=d(w,R[m],O),S!==null&&(A=s(S,A,m),b===null?M=S:b.sibling=S,b=S);return Ue&&Pi(w,m),M}for(S=r(w,S);m<R.length;m++)y=g(S,w,m,R[m],O),y!==null&&(t&&y.alternate!==null&&S.delete(y.key===null?m:y.key),A=s(y,A,m),b===null?M=y:b.sibling=y,b=y);return t&&S.forEach(function(I){return e(w,I)}),Ue&&Pi(w,m),M}function C(w,A,R,O){var M=bo(R);if(typeof M!="function")throw Error(Y(150));if(R=M.call(R),R==null)throw Error(Y(151));for(var b=M=null,S=A,m=A=0,y=null,E=R.next();S!==null&&!E.done;m++,E=R.next()){S.index>m?(y=S,S=null):y=S.sibling;var I=f(w,S,E.value,O);if(I===null){S===null&&(S=y);break}t&&S&&I.alternate===null&&e(w,S),A=s(I,A,m),b===null?M=I:b.sibling=I,b=I,S=y}if(E.done)return n(w,S),Ue&&Pi(w,m),M;if(S===null){for(;!E.done;m++,E=R.next())E=d(w,E.value,O),E!==null&&(A=s(E,A,m),b===null?M=E:b.sibling=E,b=E);return Ue&&Pi(w,m),M}for(S=r(w,S);!E.done;m++,E=R.next())E=g(S,w,m,E.value,O),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?m:E.key),A=s(E,A,m),b===null?M=E:b.sibling=E,b=E);return t&&S.forEach(function(P){return e(w,P)}),Ue&&Pi(w,m),M}function x(w,A,R,O){if(typeof R=="object"&&R!==null&&R.type===ws&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Cl:e:{for(var M=R.key,b=A;b!==null;){if(b.key===M){if(M=R.type,M===ws){if(b.tag===7){n(w,b.sibling),A=i(b,R.props.children),A.return=w,w=A;break e}}else if(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Vr&&ny(M)===b.type){n(w,b.sibling),A=i(b,R.props),A.ref=Vo(w,b,R),A.return=w,w=A;break e}n(w,b);break}else e(w,b);b=b.sibling}R.type===ws?(A=Ui(R.props.children,w.mode,O,R.key),A.return=w,w=A):(O=lu(R.type,R.key,R.props,null,w.mode,O),O.ref=Vo(w,A,R),O.return=w,w=O)}return o(w);case vs:e:{for(b=R.key;A!==null;){if(A.key===b)if(A.tag===4&&A.stateNode.containerInfo===R.containerInfo&&A.stateNode.implementation===R.implementation){n(w,A.sibling),A=i(A,R.children||[]),A.return=w,w=A;break e}else{n(w,A);break}else e(w,A);A=A.sibling}A=$h(R,w.mode,O),A.return=w,w=A}return o(w);case Vr:return b=R._init,x(w,A,b(R._payload),O)}if(Ho(R))return v(w,A,R,O);if(bo(R))return C(w,A,R,O);Ul(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,A!==null&&A.tag===6?(n(w,A.sibling),A=i(A,R),A.return=w,w=A):(n(w,A),A=zh(R,w.mode,O),A.return=w,w=A),o(w)):n(w,A)}return x}var Gs=k0(!0),x0=k0(!1),bu=gi(null),Ou=null,Ps=null,ep=null;function tp(){ep=Ps=Ou=null}function np(t){var e=bu.current;De(bu),t._currentValue=e}function Fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){Ou=t,ep=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(ep!==t)if(t={context:t,memoizedValue:e,next:null},Ps===null){if(Ou===null)throw Error(Y(308));Ps=t,Ou.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return e}var Oi=null;function rp(t){Oi===null?Oi=[t]:Oi.push(t)}function N0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rp(e)):(n.next=i.next,i.next=n),e.interleaved=n,wr(t,r)}function wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ur=!1;function ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wr(t,n)}return i=r.interleaved,i===null?(e.next=e,rp(r)):(e.next=i.next,i.next=e),r.interleaved=e,wr(t,n)}function nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$f(t,n)}}function ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Du(t,e,n,r){var i=t.updateQueue;Ur=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,h=c=u=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,C=a;switch(f=e,g=n,C.tag){case 1:if(v=C.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=C.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=$e({},d,f);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,u=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wi|=o,t.lanes=o,t.memoizedState=d}}function iy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var Qa={},Kn=gi(Qa),Ra=gi(Qa),Ca=gi(Qa);function Di(t){if(t===Qa)throw Error(Y(174));return t}function sp(t,e){switch(ke(Ca,e),ke(Ra,t),ke(Kn,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vd(e,t)}De(Kn),ke(Kn,e)}function Ks(){De(Kn),De(Ra),De(Ca)}function O0(t){Di(Ca.current);var e=Di(Kn.current),n=vd(e,t.type);e!==n&&(ke(Ra,t),ke(Kn,n))}function op(t){Ra.current===t&&(De(Kn),De(Ra))}var Be=gi(0);function Mu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lh=[];function ap(){for(var t=0;t<Lh.length;t++)Lh[t]._workInProgressVersionPrimary=null;Lh.length=0}var ru=Rr.ReactCurrentDispatcher,Vh=Rr.ReactCurrentBatchConfig,$i=0,ze=null,ot=null,ht=null,Lu=!1,sa=!1,Pa=0,w2=0;function Rt(){throw Error(Y(321))}function lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dn(t[n],e[n]))return!1;return!0}function up(t,e,n,r,i,s){if($i=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ru.current=t===null||t.memoizedState===null?S2:A2,t=n(r,i),sa){s=0;do{if(sa=!1,Pa=0,25<=s)throw Error(Y(301));s+=1,ht=ot=null,e.updateQueue=null,ru.current=R2,t=n(r,i)}while(sa)}if(ru.current=Vu,e=ot!==null&&ot.next!==null,$i=0,ht=ot=ze=null,Lu=!1,e)throw Error(Y(300));return t}function cp(){var t=Pa!==0;return Pa=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?ze.memoizedState=ht=t:ht=ht.next=t,ht}function In(){if(ot===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?ze.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error(Y(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?ze.memoizedState=ht=t:ht=ht.next=t}return ht}function ka(t,e){return typeof e=="function"?e(t):e}function Uh(t){var e=In(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if(($i&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,ze.lanes|=h,Wi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Dn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,Wi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fh(t){var e=In(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dn(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function D0(){}function M0(t,e){var n=ze,r=In(),i=e(),s=!Dn(r.memoizedState,i);if(s&&(r.memoizedState=i,Yt=!0),r=r.queue,hp(U0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,xa(9,V0.bind(null,n,r,i,e),void 0,null),dt===null)throw Error(Y(349));$i&30||L0(n,e,i)}return i}function L0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V0(t,e,n,r){e.value=n,e.getSnapshot=r,F0(e)&&j0(t)}function U0(t,e,n){return n(function(){F0(e)&&j0(t)})}function F0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dn(t,n)}catch{return!0}}function j0(t){var e=wr(t,1);e!==null&&On(e,t,1,-1)}function sy(t){var e=Bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},e.queue=t,t=t.dispatch=I2.bind(null,ze,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function B0(){return In().memoizedState}function iu(t,e,n,r){var i=Bn();ze.flags|=t,i.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function Ic(t,e,n,r){var i=In();r=r===void 0?null:r;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,r!==null&&lp(r,o.deps)){i.memoizedState=xa(e,n,s,r);return}}ze.flags|=t,i.memoizedState=xa(1|e,n,s,r)}function oy(t,e){return iu(8390656,8,t,e)}function hp(t,e){return Ic(2048,8,t,e)}function z0(t,e){return Ic(4,2,t,e)}function $0(t,e){return Ic(4,4,t,e)}function W0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function H0(t,e,n){return n=n!=null?n.concat([t]):null,Ic(4,4,W0.bind(null,e,t),n)}function dp(){}function q0(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function G0(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function K0(t,e,n){return $i&21?(Dn(n,e)||(n=Zv(),ze.lanes|=n,Wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function E2(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Vh.transition;Vh.transition={};try{t(!1),e()}finally{Te=n,Vh.transition=r}}function Q0(){return In().memoizedState}function T2(t,e,n){var r=ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Y0(t))X0(e,n);else if(n=N0(t,e,n,r),n!==null){var i=Bt();On(n,t,r,i),J0(n,e,r)}}function I2(t,e,n){var r=ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y0(t))X0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Dn(a,o)){var u=e.interleaved;u===null?(i.next=i,rp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=N0(t,e,i,r),n!==null&&(i=Bt(),On(n,t,r,i),J0(n,e,r))}}function Y0(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function X0(t,e){sa=Lu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function J0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$f(t,n)}}var Vu={readContext:Tn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},S2={readContext:Tn,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:oy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,iu(4194308,4,W0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return iu(4194308,4,t,e)},useInsertionEffect:function(t,e){return iu(4,2,t,e)},useMemo:function(t,e){var n=Bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=T2.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:dp,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=E2.bind(null,t[1]),Bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=Bn();if(Ue){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),dt===null)throw Error(Y(349));$i&30||L0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,oy(U0.bind(null,r,s,t),[t]),r.flags|=2048,xa(9,V0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Bn(),e=dt.identifierPrefix;if(Ue){var n=cr,r=ur;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=w2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A2={readContext:Tn,useCallback:q0,useContext:Tn,useEffect:hp,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:$0,useMemo:G0,useReducer:Uh,useRef:B0,useState:function(){return Uh(ka)},useDebugValue:dp,useDeferredValue:function(t){var e=In();return K0(e,ot.memoizedState,t)},useTransition:function(){var t=Uh(ka)[0],e=In().memoizedState;return[t,e]},useMutableSource:D0,useSyncExternalStore:M0,useId:Q0,unstable_isNewReconciler:!1},R2={readContext:Tn,useCallback:q0,useContext:Tn,useEffect:hp,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:$0,useMemo:G0,useReducer:Fh,useRef:B0,useState:function(){return Fh(ka)},useDebugValue:dp,useDeferredValue:function(t){var e=In();return ot===null?e.memoizedState=t:K0(e,ot.memoizedState,t)},useTransition:function(){var t=Fh(ka)[0],e=In().memoizedState;return[t,e]},useMutableSource:D0,useSyncExternalStore:M0,useId:Q0,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sc={isMounted:function(t){return(t=t._reactInternals)?ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=ri(t),s=pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ti(t,s,i),e!==null&&(On(e,t,i,r),nu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=ri(t),s=pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ti(t,s,i),e!==null&&(On(e,t,i,r),nu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=ri(t),i=pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ti(t,i,r),e!==null&&(On(e,t,r,n),nu(e,t,r))}};function ay(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(i,s):!0}function Z0(t,e,n){var r=!1,i=ci,s=e.contextType;return typeof s=="object"&&s!==null?s=Tn(s):(i=Jt(e)?Bi:Mt.current,r=e.contextTypes,s=(r=r!=null)?Hs(t,i):ci),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ly(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sc.enqueueReplaceState(e,e.state,null)}function Bd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ip(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Tn(s):(s=Jt(e)?Bi:Mt.current,i.context=Hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sc.enqueueReplaceState(i,i.state,null),Du(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qs(t,e){try{var n="",r=e;do n+=eS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function jh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var C2=typeof WeakMap=="function"?WeakMap:Map;function e1(t,e,n){n=pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fu||(Fu=!0,Jd=r),zd(t,e)},n}function t1(t,e,n){n=pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zd(t,e),typeof r!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new C2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=B2.bind(null,t,e,n),e.then(t,t))}function cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pr(-1,1),e.tag=2,ti(n,e,1))),n.lanes|=1),t)}var P2=Rr.ReactCurrentOwner,Yt=!1;function jt(t,e,n,r){e.child=t===null?x0(e,null,n,r):Gs(e,t.child,n,r)}function dy(t,e,n,r,i){n=n.render;var s=e.ref;return Us(e,i),r=up(t,e,n,r,s,i),n=cp(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ue&&n&&Xf(e),e.flags|=1,jt(t,e,r,i),e.child)}function fy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,n1(t,e,s,r,i)):(t=lu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return Er(t,e,i)}return e.flags|=1,t=ii(s,r),t.ref=e.ref,t.return=e,e.child=t}function n1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ta(s,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Er(t,e,i)}return $d(t,e,n,r,i)}function r1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(xs,on),on|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(xs,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(xs,on),on|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ke(xs,on),on|=r;return jt(t,e,i,n),e.child}function i1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $d(t,e,n,r,i){var s=Jt(n)?Bi:Mt.current;return s=Hs(e,s),Us(e,i),n=up(t,e,n,r,s,i),r=cp(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ue&&r&&Xf(e),e.flags|=1,jt(t,e,n,i),e.child)}function py(t,e,n,r,i){if(Jt(n)){var s=!0;ku(e)}else s=!1;if(Us(e,i),e.stateNode===null)su(t,e),Z0(e,n,r),Bd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Tn(c):(c=Jt(n)?Bi:Mt.current,c=Hs(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ly(e,o,r,c),Ur=!1;var f=e.memoizedState;o.state=f,Du(e,r,o,i),u=e.memoizedState,a!==r||f!==u||Xt.current||Ur?(typeof h=="function"&&(jd(e,n,h,r),u=e.memoizedState),(a=Ur||ay(e,n,a,r,f,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,b0(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tn(u):(u=Jt(n)?Bi:Mt.current,u=Hs(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==u)&&ly(e,o,r,u),Ur=!1,f=e.memoizedState,o.state=f,Du(e,r,o,i);var v=e.memoizedState;a!==d||f!==v||Xt.current||Ur?(typeof g=="function"&&(jd(e,n,g,r),v=e.memoizedState),(c=Ur||ay(e,n,c,r,f,v,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wd(t,e,n,r,s,i)}function Wd(t,e,n,r,i,s){i1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zg(e,n,!1),Er(t,e,s);r=e.stateNode,P2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gs(e,t.child,null,s),e.child=Gs(e,null,a,s)):jt(t,e,a,s),e.memoizedState=r.state,i&&Zg(e,n,!0),e.child}function s1(t){var e=t.stateNode;e.pendingContext?Jg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jg(t,e.context,!1),sp(t,e.containerInfo)}function my(t,e,n,r,i){return qs(),Zf(i),e.flags|=256,jt(t,e,n,r),e.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function qd(t){return{baseLanes:t,cachePool:null,transitions:null}}function o1(t,e,n){var r=e.pendingProps,i=Be.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke(Be,i&1),t===null)return Ud(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Cc(o,r,0,null),t=Ui(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qd(n),e.memoizedState=Hd,t):fp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return k2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ii(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ii(a,s):(s=Ui(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hd,r}return s=t.child,t=s.sibling,r=ii(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fp(t,e){return e=Cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Zf(r),Gs(e,t.child,null,n),t=fp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=jh(Error(Y(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cc({mode:"visible",children:r.children},i,0,null),s=Ui(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Gs(e,t.child,null,o),e.child.memoizedState=qd(o),e.memoizedState=Hd,s);if(!(e.mode&1))return Fl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=jh(s,r,void 0),Fl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yt||a){if(r=dt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wr(t,i),On(r,t,i,-1))}return vp(),r=jh(Error(Y(421))),Fl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=z2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,an=ei(i.nextSibling),cn=e,Ue=!0,Nn=null,t!==null&&(yn[_n++]=ur,yn[_n++]=cr,yn[_n++]=zi,ur=t.id,cr=t.overflow,zi=e),e=fp(e,r.children),e.flags|=4096,e)}function gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fd(t.return,e,n)}function Bh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function a1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,n,e);else if(t.tag===19)gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Be,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Bh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Bh(e,!0,n,null,s);break;case"together":Bh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function x2(t,e,n){switch(e.tag){case 3:s1(e),qs();break;case 5:O0(e);break;case 1:Jt(e.type)&&ku(e);break;case 4:sp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(bu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?o1(t,e,n):(ke(Be,Be.current&1),t=Er(t,e,n),t!==null?t.sibling:null);ke(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,r1(t,e,n)}return Er(t,e,n)}var l1,Gd,u1,c1;l1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gd=function(){};u1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Di(Kn.current);var s=null;switch(n){case"input":i=md(t,i),r=md(t,r),s=[];break;case"select":i=$e({},i,{value:void 0}),r=$e({},r,{value:void 0}),s=[];break;case"textarea":i=_d(t,i),r=_d(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cu)}wd(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ma.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ma.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&be("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};c1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Uo(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function N2(t,e,n){var r=e.pendingProps;switch(Jf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Jt(e.type)&&Pu(),Ct(e),null;case 3:return r=e.stateNode,Ks(),De(Xt),De(Mt),ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(tf(Nn),Nn=null))),Gd(t,e),Ct(e),null;case 5:op(e);var i=Di(Ca.current);if(n=e.type,t!==null&&e.stateNode!=null)u1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ct(e),null}if(t=Di(Kn.current),Vl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wn]=e,r[Aa]=s,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(i=0;i<Go.length;i++)be(Go[i],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Ag(r,s),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},be("invalid",r);break;case"textarea":Cg(r,s),be("invalid",r)}wd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ll(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ll(r.textContent,a,t),i=["children",""+a]):ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":Pl(r),Rg(r,s,!0);break;case"textarea":Pl(r),Pg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[Aa]=r,l1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ed(n,r),n){case"dialog":be("cancel",t),be("close",t),i=r;break;case"iframe":case"object":case"embed":be("load",t),i=r;break;case"video":case"audio":for(i=0;i<Go.length;i++)be(Go[i],t);i=r;break;case"source":be("error",t),i=r;break;case"img":case"image":case"link":be("error",t),be("load",t),i=r;break;case"details":be("toggle",t),i=r;break;case"input":Ag(t,r),i=md(t,r),be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$e({},r,{value:void 0}),be("invalid",t);break;case"textarea":Cg(t,r),i=_d(t,r),be("invalid",t);break;default:i=r}wd(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Bv(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fv(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ga(t,u):typeof u=="number"&&ga(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ma.hasOwnProperty(s)?u!=null&&s==="onScroll"&&be("scroll",t):u!=null&&Vf(t,s,u,o))}switch(n){case"input":Pl(t),Rg(t,r,!1);break;case"textarea":Pl(t),Pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ui(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ds(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ds(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)c1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Di(Ca.current),Di(Kn.current),Vl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(s=r.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Ct(e),null;case 13:if(De(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&an!==null&&e.mode&1&&!(e.flags&128))P0(),qs(),e.flags|=98560,s=!1;else if(s=Vl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Wn]=e}else qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else Nn!==null&&(tf(Nn),Nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?at===0&&(at=3):vp())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Ks(),Gd(t,e),t===null&&Ia(e.stateNode.containerInfo),Ct(e),null;case 10:return np(e.type._context),Ct(e),null;case 17:return Jt(e.type)&&Pu(),Ct(e),null;case 19:if(De(Be),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Uo(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mu(t),o!==null){for(e.flags|=128,Uo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Be,Be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xe()>Ys&&(e.flags|=128,r=!0,Uo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Mu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return Ct(e),null}else 2*Xe()-s.renderingStartTime>Ys&&n!==1073741824&&(e.flags|=128,r=!0,Uo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xe(),e.sibling=null,n=Be.current,ke(Be,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return _p(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function b2(t,e){switch(Jf(e),e.tag){case 1:return Jt(e.type)&&Pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(),De(Xt),De(Mt),ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(De(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Be),null;case 4:return Ks(),null;case 10:return np(e.type._context),null;case 22:case 23:return _p(),null;case 24:return null;default:return null}}var jl=!1,Nt=!1,O2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function Kd(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var yy=!1;function D2(t,e){if(Nd=Su,t=m0(),Yf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(u=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:t,selectionRange:n},Su=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var C=v.memoizedProps,x=v.memoizedState,w=e.stateNode,A=w.getSnapshotBeforeUpdate(e.elementType===e.type?C:kn(e.type,C),x);w.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(O){Ge(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return v=yy,yy=!1,v}function oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kd(e,n,s)}i=i.next}while(i!==r)}}function Ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function h1(t){var e=t.alternate;e!==null&&(t.alternate=null,h1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Aa],delete e[Md],delete e[g2],delete e[y2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d1(t){return t.tag===5||t.tag===3||t.tag===4}function _y(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cu));else if(r!==4&&(t=t.child,t!==null))for(Yd(t,e,n),t=t.sibling;t!==null;)Yd(t,e,n),t=t.sibling}function Xd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xd(t,e,n),t=t.sibling;t!==null;)Xd(t,e,n),t=t.sibling}var mt=null,xn=!1;function Dr(t,e,n){for(n=n.child;n!==null;)f1(t,e,n),n=n.sibling}function f1(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(yc,n)}catch{}switch(n.tag){case 5:Nt||ks(n,e);case 6:var r=mt,i=xn;mt=null,Dr(t,e,n),mt=r,xn=i,mt!==null&&(xn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(xn?(t=mt,n=n.stateNode,t.nodeType===8?Dh(t.parentNode,n):t.nodeType===1&&Dh(t,n),wa(t)):Dh(mt,n.stateNode));break;case 4:r=mt,i=xn,mt=n.stateNode.containerInfo,xn=!0,Dr(t,e,n),mt=r,xn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kd(n,e,o),i=i.next}while(i!==r)}Dr(t,e,n);break;case 1:if(!Nt&&(ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Dr(t,e,n),Nt=r):Dr(t,e,n);break;default:Dr(t,e,n)}}function vy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new O2),e.forEach(function(r){var i=$2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,xn=!1;break e;case 3:mt=a.stateNode.containerInfo,xn=!0;break e;case 4:mt=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(mt===null)throw Error(Y(160));f1(s,o,i),mt=null,xn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ge(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p1(e,t),e=e.sibling}function p1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),jn(t),r&4){try{oa(3,t,t.return),Ac(3,t)}catch(C){Ge(t,t.return,C)}try{oa(5,t,t.return)}catch(C){Ge(t,t.return,C)}}break;case 1:Cn(e,t),jn(t),r&512&&n!==null&&ks(n,n.return);break;case 5:if(Cn(e,t),jn(t),r&512&&n!==null&&ks(n,n.return),t.flags&32){var i=t.stateNode;try{ga(i,"")}catch(C){Ge(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Lv(i,s),Ed(a,o);var c=Ed(a,s);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?Bv(i,d):h==="dangerouslySetInnerHTML"?Fv(i,d):h==="children"?ga(i,d):Vf(i,h,d,c)}switch(a){case"input":gd(i,s);break;case"textarea":Vv(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ds(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ds(i,!!s.multiple,s.defaultValue,!0):Ds(i,!!s.multiple,s.multiple?[]:"",!1))}i[Aa]=s}catch(C){Ge(t,t.return,C)}}break;case 6:if(Cn(e,t),jn(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Ge(t,t.return,C)}}break;case 3:if(Cn(e,t),jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(C){Ge(t,t.return,C)}break;case 4:Cn(e,t),jn(t);break;case 13:Cn(e,t),jn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gp=Xe())),r&4&&vy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||h,Cn(e,t),Nt=c):Cn(e,t),jn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(d=ee=h;ee!==null;){switch(f=ee,g=f.child,f.tag){case 0:case 11:case 14:case 15:oa(4,f,f.return);break;case 1:ks(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(C){Ge(r,n,C)}}break;case 5:ks(f,f.return);break;case 22:if(f.memoizedState!==null){Ey(d);continue}}g!==null?(g.return=f,ee=g):Ey(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=jv("display",o))}catch(C){Ge(t,t.return,C)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(C){Ge(t,t.return,C)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cn(e,t),jn(t),r&4&&vy(t);break;case 21:break;default:Cn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(d1(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ga(i,""),r.flags&=-33);var s=_y(t);Xd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_y(t);Yd(t,a,o);break;default:throw Error(Y(161))}}catch(u){Ge(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function M2(t,e,n){ee=t,m1(t)}function m1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Nt;a=jl;var c=Nt;if(jl=o,(Nt=u)&&!c)for(ee=i;ee!==null;)o=ee,u=o.child,o.tag===22&&o.memoizedState!==null?Ty(i):u!==null?(u.return=o,ee=u):Ty(i);for(;s!==null;)ee=s,m1(s),s=s.sibling;ee=i,jl=a,Nt=c}wy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):wy(t)}}function wy(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&wa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Nt||e.flags&512&&Qd(e)}catch(f){Ge(e,e.return,f)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Ey(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Ty(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ac(4,e)}catch(u){Ge(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ge(e,i,u)}}var s=e.return;try{Qd(e)}catch(u){Ge(e,s,u)}break;case 5:var o=e.return;try{Qd(e)}catch(u){Ge(e,o,u)}}}catch(u){Ge(e,e.return,u)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var L2=Math.ceil,Uu=Rr.ReactCurrentDispatcher,pp=Rr.ReactCurrentOwner,wn=Rr.ReactCurrentBatchConfig,pe=0,dt=null,nt=null,vt=0,on=0,xs=gi(0),at=0,Na=null,Wi=0,Rc=0,mp=0,aa=null,Gt=null,gp=0,Ys=1/0,or=null,Fu=!1,Jd=null,ni=null,Bl=!1,Gr=null,ju=0,la=0,Zd=null,ou=-1,au=0;function Bt(){return pe&6?Xe():ou!==-1?ou:ou=Xe()}function ri(t){return t.mode&1?pe&2&&vt!==0?vt&-vt:v2.transition!==null?(au===0&&(au=Zv()),au):(t=Te,t!==0||(t=window.event,t=t===void 0?16:o0(t.type)),t):1}function On(t,e,n,r){if(50<la)throw la=0,Zd=null,Error(Y(185));qa(t,n,r),(!(pe&2)||t!==dt)&&(t===dt&&(!(pe&2)&&(Rc|=n),at===4&&jr(t,vt)),Zt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Ys=Xe()+500,Tc&&yi()))}function Zt(t,e){var n=t.callbackNode;vS(t,e);var r=Iu(t,t===dt?vt:0);if(r===0)n!==null&&Ng(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ng(n),e===1)t.tag===0?_2(Iy.bind(null,t)):A0(Iy.bind(null,t)),p2(function(){!(pe&6)&&yi()}),n=null;else{switch(e0(r)){case 1:n=zf;break;case 4:n=Xv;break;case 16:n=Tu;break;case 536870912:n=Jv;break;default:n=Tu}n=I1(n,g1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g1(t,e){if(ou=-1,au=0,pe&6)throw Error(Y(327));var n=t.callbackNode;if(Fs()&&t.callbackNode!==n)return null;var r=Iu(t,t===dt?vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bu(t,r);else{e=r;var i=pe;pe|=2;var s=_1();(dt!==t||vt!==e)&&(or=null,Ys=Xe()+500,Vi(t,e));do try{F2();break}catch(a){y1(t,a)}while(!0);tp(),Uu.current=s,pe=i,nt!==null?e=0:(dt=null,vt=0,e=at)}if(e!==0){if(e===2&&(i=Rd(t),i!==0&&(r=i,e=ef(t,i))),e===1)throw n=Na,Vi(t,0),jr(t,r),Zt(t,Xe()),n;if(e===6)jr(t,r);else{if(i=t.current.alternate,!(r&30)&&!V2(i)&&(e=Bu(t,r),e===2&&(s=Rd(t),s!==0&&(r=s,e=ef(t,s))),e===1))throw n=Na,Vi(t,0),jr(t,r),Zt(t,Xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:ki(t,Gt,or);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=gp+500-Xe(),10<e)){if(Iu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Dd(ki.bind(null,t,Gt,or),e);break}ki(t,Gt,or);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*L2(r/1960))-r,10<r){t.timeoutHandle=Dd(ki.bind(null,t,Gt,or),r);break}ki(t,Gt,or);break;case 5:ki(t,Gt,or);break;default:throw Error(Y(329))}}}return Zt(t,Xe()),t.callbackNode===n?g1.bind(null,t):null}function ef(t,e){var n=aa;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=Bu(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&tf(e)),t}function tf(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function V2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~mp,e&=~Rc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function Iy(t){if(pe&6)throw Error(Y(327));Fs();var e=Iu(t,0);if(!(e&1))return Zt(t,Xe()),null;var n=Bu(t,e);if(t.tag!==0&&n===2){var r=Rd(t);r!==0&&(e=r,n=ef(t,r))}if(n===1)throw n=Na,Vi(t,0),jr(t,e),Zt(t,Xe()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,Gt,or),Zt(t,Xe()),null}function yp(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Ys=Xe()+500,Tc&&yi())}}function Hi(t){Gr!==null&&Gr.tag===0&&!(pe&6)&&Fs();var e=pe;pe|=1;var n=wn.transition,r=Te;try{if(wn.transition=null,Te=1,t)return t()}finally{Te=r,wn.transition=n,pe=e,!(pe&6)&&yi()}}function _p(){on=xs.current,De(xs)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f2(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Jf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pu();break;case 3:Ks(),De(Xt),De(Mt),ap();break;case 5:op(r);break;case 4:Ks();break;case 13:De(Be);break;case 19:De(Be);break;case 10:np(r.type._context);break;case 22:case 23:_p()}n=n.return}if(dt=t,nt=t=ii(t.current,null),vt=on=e,at=0,Na=null,mp=Rc=Wi=0,Gt=aa=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Oi=null}return t}function y1(t,e){do{var n=nt;try{if(tp(),ru.current=Vu,Lu){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lu=!1}if($i=0,ht=ot=ze=null,sa=!1,Pa=0,pp.current=null,n===null||n.return===null){at=1,Na=e,nt=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=vt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=cy(o);if(g!==null){g.flags&=-257,hy(g,o,a,s,e),g.mode&1&&uy(s,c,e),e=g,u=c;var v=e.updateQueue;if(v===null){var C=new Set;C.add(u),e.updateQueue=C}else v.add(u);break e}else{if(!(e&1)){uy(s,c,e),vp();break e}u=Error(Y(426))}}else if(Ue&&a.mode&1){var x=cy(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),hy(x,o,a,s,e),Zf(Qs(u,a));break e}}s=u=Qs(u,a),at!==4&&(at=2),aa===null?aa=[s]:aa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=e1(s,u,e);ry(s,w);break e;case 1:a=u;var A=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(ni===null||!ni.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=t1(s,a,e);ry(s,O);break e}}s=s.return}while(s!==null)}w1(n)}catch(M){e=M,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function _1(){var t=Uu.current;return Uu.current=Vu,t===null?Vu:t}function vp(){(at===0||at===3||at===2)&&(at=4),dt===null||!(Wi&268435455)&&!(Rc&268435455)||jr(dt,vt)}function Bu(t,e){var n=pe;pe|=2;var r=_1();(dt!==t||vt!==e)&&(or=null,Vi(t,e));do try{U2();break}catch(i){y1(t,i)}while(!0);if(tp(),pe=n,Uu.current=r,nt!==null)throw Error(Y(261));return dt=null,vt=0,at}function U2(){for(;nt!==null;)v1(nt)}function F2(){for(;nt!==null&&!cS();)v1(nt)}function v1(t){var e=T1(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?w1(t):nt=e,pp.current=null}function w1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=b2(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,nt=null;return}}else if(n=N2(n,e,on),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);at===0&&(at=5)}function ki(t,e,n){var r=Te,i=wn.transition;try{wn.transition=null,Te=1,j2(t,e,n,r)}finally{wn.transition=i,Te=r}return null}function j2(t,e,n,r){do Fs();while(Gr!==null);if(pe&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wS(t,s),t===dt&&(nt=dt=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bl||(Bl=!0,I1(Tu,function(){return Fs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wn.transition,wn.transition=null;var o=Te;Te=1;var a=pe;pe|=4,pp.current=null,D2(t,n),p1(n,t),o2(bd),Su=!!Nd,bd=Nd=null,t.current=n,M2(n),hS(),pe=a,Te=o,wn.transition=s}else t.current=n;if(Bl&&(Bl=!1,Gr=t,ju=i),s=t.pendingLanes,s===0&&(ni=null),pS(n.stateNode),Zt(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fu)throw Fu=!1,t=Jd,Jd=null,t;return ju&1&&t.tag!==0&&Fs(),s=t.pendingLanes,s&1?t===Zd?la++:(la=0,Zd=t):la=0,yi(),null}function Fs(){if(Gr!==null){var t=e0(ju),e=wn.transition,n=Te;try{if(wn.transition=null,Te=16>t?16:t,Gr===null)var r=!1;else{if(t=Gr,Gr=null,ju=0,pe&6)throw Error(Y(331));var i=pe;for(pe|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ee=c;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:oa(8,h,s)}var d=h.child;if(d!==null)d.return=h,ee=d;else for(;ee!==null;){h=ee;var f=h.sibling,g=h.return;if(h1(h),h===c){ee=null;break}if(f!==null){f.return=g,ee=f;break}ee=g}}}var v=s.alternate;if(v!==null){var C=v.child;if(C!==null){v.child=null;do{var x=C.sibling;C.sibling=null,C=x}while(C!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oa(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ee=w;break e}ee=s.return}}var A=t.current;for(ee=A;ee!==null;){o=ee;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,ee=R;else e:for(o=A;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ac(9,a)}}catch(M){Ge(a,a.return,M)}if(a===o){ee=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,ee=O;break e}ee=a.return}}if(pe=i,yi(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(yc,t)}catch{}r=!0}return r}finally{Te=n,wn.transition=e}}return!1}function Sy(t,e,n){e=Qs(n,e),e=e1(t,e,1),t=ti(t,e,1),e=Bt(),t!==null&&(qa(t,1,e),Zt(t,e))}function Ge(t,e,n){if(t.tag===3)Sy(t,t,n);else for(;e!==null;){if(e.tag===3){Sy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ni===null||!ni.has(r))){t=Qs(n,t),t=t1(e,t,1),e=ti(e,t,1),t=Bt(),e!==null&&(qa(e,1,t),Zt(e,t));break}}e=e.return}}function B2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(vt&n)===n&&(at===4||at===3&&(vt&130023424)===vt&&500>Xe()-gp?Vi(t,0):mp|=n),Zt(t,e)}function E1(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=Bt();t=wr(t,e),t!==null&&(qa(t,e,n),Zt(t,n))}function z2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E1(t,n)}function $2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),E1(t,n)}var T1;T1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,x2(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Ue&&e.flags&1048576&&R0(e,Nu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;su(t,e),t=e.pendingProps;var i=Hs(e,Mt.current);Us(e,n),i=up(null,e,r,t,i,n);var s=cp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(s=!0,ku(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ip(e),i.updater=Sc,e.stateNode=i,i._reactInternals=e,Bd(e,r,t,n),e=Wd(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&Xf(e),jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(su(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=H2(r),t=kn(r,t),i){case 0:e=$d(null,e,r,t,n);break e;case 1:e=py(null,e,r,t,n);break e;case 11:e=dy(null,e,r,t,n);break e;case 14:e=fy(null,e,r,kn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),$d(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),py(t,e,r,i,n);case 3:e:{if(s1(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,b0(t,e),Du(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qs(Error(Y(423)),e),e=my(t,e,r,n,i);break e}else if(r!==i){i=Qs(Error(Y(424)),e),e=my(t,e,r,n,i);break e}else for(an=ei(e.stateNode.containerInfo.firstChild),cn=e,Ue=!0,Nn=null,n=x0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qs(),r===i){e=Er(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return O0(e),t===null&&Ud(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Od(r,i)?o=null:s!==null&&Od(r,s)&&(e.flags|=32),i1(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&Ud(e),null;case 13:return o1(t,e,n);case 4:return sp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gs(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),dy(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ke(bu,r._currentValue),r._currentValue=o,s!==null)if(Dn(s.value,o)){if(s.children===i.children&&!Xt.current){e=Er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=pr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Fd(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Us(e,n),i=Tn(i),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,i=kn(r,e.pendingProps),i=kn(r.type,i),fy(t,e,r,i,n);case 15:return n1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),su(t,e),e.tag=1,Jt(r)?(t=!0,ku(e)):t=!1,Us(e,n),Z0(e,r,i),Bd(e,r,i,n),Wd(null,e,r,!0,t,n);case 19:return a1(t,e,n);case 22:return r1(t,e,n)}throw Error(Y(156,e.tag))};function I1(t,e){return Yv(t,e)}function W2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new W2(t,e,n,r)}function wp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H2(t){if(typeof t=="function")return wp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ff)return 11;if(t===jf)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")wp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ws:return Ui(n.children,i,s,e);case Uf:o=8,i|=8;break;case hd:return t=vn(12,n,e,i|2),t.elementType=hd,t.lanes=s,t;case dd:return t=vn(13,n,e,i),t.elementType=dd,t.lanes=s,t;case fd:return t=vn(19,n,e,i),t.elementType=fd,t.lanes=s,t;case Ov:return Cc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nv:o=10;break e;case bv:o=9;break e;case Ff:o=11;break e;case jf:o=14;break e;case Vr:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=vn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ui(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function Cc(t,e,n,r){return t=vn(22,t,r,e),t.elementType=Ov,t.lanes=n,t.stateNode={isHidden:!1},t}function zh(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function $h(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ih(0),this.expirationTimes=Ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ep(t,e,n,r,i,s,o,a,u){return t=new q2(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ip(s),t}function G2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S1(t){if(!t)return ci;t=t._reactInternals;e:{if(ts(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Jt(n))return S0(t,n,e)}return e}function A1(t,e,n,r,i,s,o,a,u){return t=Ep(n,r,!0,t,i,s,o,a,u),t.context=S1(null),n=t.current,r=Bt(),i=ri(n),s=pr(r,i),s.callback=e??null,ti(n,s,i),t.current.lanes=i,qa(t,i,r),Zt(t,r),t}function Pc(t,e,n,r){var i=e.current,s=Bt(),o=ri(i);return n=S1(n),e.context===null?e.context=n:e.pendingContext=n,e=pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ti(i,e,o),t!==null&&(On(t,i,o,s),nu(t,i,o)),o}function zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ay(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tp(t,e){Ay(t,e),(t=t.alternate)&&Ay(t,e)}function K2(){return null}var R1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ip(t){this._internalRoot=t}kc.prototype.render=Ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Pc(t,e,null,null)};kc.prototype.unmount=Ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hi(function(){Pc(null,t,null,null)}),e[vr]=null}};function kc(t){this._internalRoot=t}kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=r0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&s0(t)}};function Sp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ry(){}function Q2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=zu(o);s.call(c)}}var o=A1(e,r,t,0,null,!1,!1,"",Ry);return t._reactRootContainer=o,t[vr]=o.current,Ia(t.nodeType===8?t.parentNode:t),Hi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=zu(u);a.call(c)}}var u=Ep(t,0,!1,null,null,!1,!1,"",Ry);return t._reactRootContainer=u,t[vr]=u.current,Ia(t.nodeType===8?t.parentNode:t),Hi(function(){Pc(e,u,n,r)}),u}function Nc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=zu(o);a.call(u)}}Pc(e,o,t,i)}else o=Q2(n,e,t,i,r);return zu(o)}t0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&($f(e,n|1),Zt(e,Xe()),!(pe&6)&&(Ys=Xe()+500,yi()))}break;case 13:Hi(function(){var r=wr(t,1);if(r!==null){var i=Bt();On(r,t,1,i)}}),Tp(t,1)}};Wf=function(t){if(t.tag===13){var e=wr(t,134217728);if(e!==null){var n=Bt();On(e,t,134217728,n)}Tp(t,134217728)}};n0=function(t){if(t.tag===13){var e=ri(t),n=wr(t,e);if(n!==null){var r=Bt();On(n,t,e,r)}Tp(t,e)}};r0=function(){return Te};i0=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Id=function(t,e,n){switch(e){case"input":if(gd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ec(r);if(!i)throw Error(Y(90));Mv(r),gd(r,i)}}}break;case"textarea":Vv(t,n);break;case"select":e=n.value,e!=null&&Ds(t,!!n.multiple,e,!1)}};Wv=yp;Hv=Hi;var Y2={usingClientEntryPoint:!1,Events:[Ka,Ss,Ec,zv,$v,yp]},Fo={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X2={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kv(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||K2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{yc=zl.inject(X2),Gn=zl}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y2;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sp(e))throw Error(Y(200));return G2(t,e,null,n)};dn.createRoot=function(t,e){if(!Sp(t))throw Error(Y(299));var n=!1,r="",i=R1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ep(t,1,!1,null,null,n,!1,r,i),t[vr]=e.current,Ia(t.nodeType===8?t.parentNode:t),new Ip(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Kv(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Hi(t)};dn.hydrate=function(t,e,n){if(!xc(e))throw Error(Y(200));return Nc(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!Sp(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=R1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=A1(e,null,t,1,n??null,i,!1,s,o),t[vr]=e.current,Ia(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new kc(e)};dn.render=function(t,e,n){if(!xc(e))throw Error(Y(200));return Nc(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!xc(t))throw Error(Y(40));return t._reactRootContainer?(Hi(function(){Nc(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};dn.unstable_batchedUpdates=yp;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xc(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Nc(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function C1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C1)}catch(t){console.error(t)}}C1(),Cv.exports=dn;var J2=Cv.exports,P1,Cy=J2;P1=Cy.createRoot,Cy.hydrateRoot;var k1={exports:{}},Z2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eA=Z2,tA=eA;function x1(){}function N1(){}N1.resetWarningCache=x1;var nA=function(){function t(r,i,s,o,a,u){if(u!==tA){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:N1,resetWarningCache:x1};return n.PropTypes=n,n};k1.exports=nA();var rA=k1.exports;const lr=mv(rA);/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ba(){return ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ba.apply(this,arguments)}var Kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Kr||(Kr={}));const Py="popstate";function iA(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return nf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$u(i)}return oA(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function b1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sA(){return Math.random().toString(36).substr(2,8)}function ky(t,e){return{usr:t.state,key:t.key,idx:e}}function nf(t,e,n,r){return n===void 0&&(n=null),ba({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uo(e):e,{state:n,key:e&&e.key||r||sA()})}function $u(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Kr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(ba({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Kr.Pop;let x=h(),w=x==null?null:x-c;c=x,u&&u({action:a,location:C.location,delta:w})}function f(x,w){a=Kr.Push;let A=nf(C.location,x,w);c=h()+1;let R=ky(A,c),O=C.createHref(A);try{o.pushState(R,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(O)}s&&u&&u({action:a,location:C.location,delta:1})}function g(x,w){a=Kr.Replace;let A=nf(C.location,x,w);c=h();let R=ky(A,c),O=C.createHref(A);o.replaceState(R,"",O),s&&u&&u({action:a,location:C.location,delta:0})}function v(x){let w=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof x=="string"?x:$u(x);return A=A.replace(/ $/,"%20"),Je(w,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,w)}let C={get action(){return a},get location(){return t(i,o)},listen(x){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Py,d),u=x,()=>{i.removeEventListener(Py,d),u=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let w=v(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:g,go(x){return o.go(x)}};return C}var xy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xy||(xy={}));function aA(t,e,n){return n===void 0&&(n="/"),lA(t,e,n,!1)}function lA(t,e,n,r){let i=typeof e=="string"?uo(e):e,s=Ap(i.pathname||"/",n);if(s==null)return null;let o=O1(t);uA(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=wA(s);a=_A(o[u],c,r)}return a}function O1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=si([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),O1(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:gA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of D1(s.path))i(s,o,u)}),e}function D1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=D1(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function uA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cA=/^:[\w-]+$/,hA=3,dA=2,fA=1,pA=10,mA=-2,Ny=t=>t==="*";function gA(t,e){let n=t.split("/"),r=n.length;return n.some(Ny)&&(r+=mA),e&&(r+=dA),n.filter(i=>!Ny(i)).reduce((i,s)=>i+(cA.test(s)?hA:s===""?fA:pA),r)}function yA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _A(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=by({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),f=u.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=by({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:si([s,d.pathname]),pathnameBase:SA(si([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=si([s,d.pathnameBase]))}return o}function by(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let C=a[d]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const v=a[d];return g&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function vA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),b1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return b1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ap(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uo(t):t;return{pathname:n?n.startsWith("/")?n:TA(n,e):e,search:AA(r),hash:RA(i)}}function TA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Wh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rp(t,e){let n=IA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uo(t):(i=ba({},t),Je(!i.pathname||!i.pathname.includes("?"),Wh("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),Wh("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),Wh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let u=EA(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const si=t=>t.join("/").replace(/\/\/+/g,"/"),SA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const M1=["post","put","patch","delete"];new Set(M1);const PA=["get",...M1];new Set(PA);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oa.apply(this,arguments)}const Pp=G.createContext(null),kA=G.createContext(null),_i=G.createContext(null),bc=G.createContext(null),vi=G.createContext({outlet:null,matches:[],isDataRoute:!1}),L1=G.createContext(null);function xA(t,e){let{relative:n}=e===void 0?{}:e;co()||Je(!1);let{basename:r,navigator:i}=G.useContext(_i),{hash:s,pathname:o,search:a}=U1(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:si([r,o])),i.createHref({pathname:u,search:a,hash:s})}function co(){return G.useContext(bc)!=null}function Ya(){return co()||Je(!1),G.useContext(bc).location}function V1(t){G.useContext(_i).static||G.useLayoutEffect(t)}function Oc(){let{isDataRoute:t}=G.useContext(vi);return t?$A():NA()}function NA(){co()||Je(!1);let t=G.useContext(Pp),{basename:e,future:n,navigator:r}=G.useContext(_i),{matches:i}=G.useContext(vi),{pathname:s}=Ya(),o=JSON.stringify(Rp(i,n.v7_relativeSplatPath)),a=G.useRef(!1);return V1(()=>{a.current=!0}),G.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Cp(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:si([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function U1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=G.useContext(_i),{matches:i}=G.useContext(vi),{pathname:s}=Ya(),o=JSON.stringify(Rp(i,r.v7_relativeSplatPath));return G.useMemo(()=>Cp(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function bA(t,e){return OA(t,e)}function OA(t,e,n,r){co()||Je(!1);let{navigator:i}=G.useContext(_i),{matches:s}=G.useContext(vi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Ya(),h;if(e){var d;let x=typeof e=="string"?uo(e):e;u==="/"||(d=x.pathname)!=null&&d.startsWith(u)||Je(!1),h=x}else h=c;let f=h.pathname||"/",g=f;if(u!=="/"){let x=u.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=aA(t,{pathname:g}),C=UA(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:si([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:si([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&C?G.createElement(bc.Provider,{value:{location:Oa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Kr.Pop}},C):C}function DA(){let t=zA(),e=CA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:i},n):null,null)}const MA=G.createElement(DA,null);class LA extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(vi.Provider,{value:this.props.routeContext},G.createElement(L1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VA(t){let{routeContext:e,match:n,children:r}=t,i=G.useContext(Pp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(vi.Provider,{value:e},r)}function UA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Je(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:g}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,v=!1,C=null,x=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,C=d.route.errorElement||MA,u&&(c<0&&f===0?(v=!0,x=null):c===f&&(v=!0,x=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),A=()=>{let R;return g?R=C:v?R=x:d.route.Component?R=G.createElement(d.route.Component,null):d.route.element?R=d.route.element:R=h,G.createElement(VA,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:R})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?G.createElement(LA,{location:n.location,revalidation:n.revalidation,component:C,error:g,children:A(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):A()},null)}var F1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(F1||{}),Wu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wu||{});function FA(t){let e=G.useContext(Pp);return e||Je(!1),e}function jA(t){let e=G.useContext(kA);return e||Je(!1),e}function BA(t){let e=G.useContext(vi);return e||Je(!1),e}function j1(t){let e=BA(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function zA(){var t;let e=G.useContext(L1),n=jA(Wu.UseRouteError),r=j1(Wu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function $A(){let{router:t}=FA(F1.UseNavigateStable),e=j1(Wu.UseNavigateStable),n=G.useRef(!1);return V1(()=>{n.current=!0}),G.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Oa({fromRouteId:e},s)))},[t,e])}function Hh(t){let{to:e,replace:n,state:r,relative:i}=t;co()||Je(!1);let{future:s,static:o}=G.useContext(_i),{matches:a}=G.useContext(vi),{pathname:u}=Ya(),c=Oc(),h=Cp(e,Rp(a,s.v7_relativeSplatPath),u,i==="path"),d=JSON.stringify(h);return G.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function ps(t){Je(!1)}function WA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Kr.Pop,navigator:s,static:o=!1,future:a}=t;co()&&Je(!1);let u=e.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:u,navigator:s,static:o,future:Oa({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=uo(r));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:v="default"}=r,C=G.useMemo(()=>{let x=Ap(h,u);return x==null?null:{location:{pathname:x,search:d,hash:f,state:g,key:v},navigationType:i}},[u,h,d,f,g,v,i]);return C==null?null:G.createElement(_i.Provider,{value:c},G.createElement(bc.Provider,{children:n,value:C}))}function HA(t){let{children:e,location:n}=t;return bA(rf(e),n)}new Promise(()=>{});function rf(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(r,i)=>{if(!G.isValidElement(r))return;let s=[...e,i];if(r.type===G.Fragment){n.push.apply(n,rf(r.props.children,s));return}r.type!==ps&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(this,arguments)}function qA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function GA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KA(t,e){return t.button===0&&(!e||e==="_self")&&!GA(t)}const QA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],YA="6";try{window.__reactRouterVersion=YA}catch{}const XA="startTransition",Oy=BI[XA];function JA(t){let{basename:e,children:n,future:r,window:i}=t,s=G.useRef();s.current==null&&(s.current=iA({window:i,v5Compat:!0}));let o=s.current,[a,u]=G.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=G.useCallback(d=>{c&&Oy?Oy(()=>u(d)):u(d)},[u,c]);return G.useLayoutEffect(()=>o.listen(h),[o,h]),G.createElement(WA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const ZA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B1=G.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,f=qA(e,QA),{basename:g}=G.useContext(_i),v,C=!1;if(typeof c=="string"&&eR.test(c)&&(v=c,ZA))try{let R=new URL(window.location.href),O=c.startsWith("//")?new URL(R.protocol+c):new URL(c),M=Ap(O.pathname,g);O.origin===R.origin&&M!=null?c=M+O.search+O.hash:C=!0}catch{}let x=xA(c,{relative:i}),w=tR(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:d});function A(R){r&&r(R),R.defaultPrevented||w(R)}return G.createElement("a",sf({},f,{href:v||x,onClick:C||s?r:A,ref:n,target:u}))});var Dy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dy||(Dy={}));var My;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(My||(My={}));function tR(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,u=Oc(),c=Ya(),h=U1(t,{relative:o});return G.useCallback(d=>{if(KA(d,n)){d.preventDefault();let f=r!==void 0?r:$u(c)===$u(h);u(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,u,h,r,i,n,t,s,o,a])}var Ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(f=64)),r.push(n[h],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new rR;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iR=function(t){const e=z1(t);return $1.encodeByteArray(e,!0)},Hu=function(t){return iR(t).replace(/\./g,"")},W1=function(t){try{return $1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=()=>sR().__FIREBASE_DEFAULTS__,aR=()=>{if(typeof process>"u"||typeof Ly>"u")return;const t=Ly.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W1(t[1]);return e&&JSON.parse(e)},Dc=()=>{try{return oR()||aR()||lR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H1=t=>{var e,n;return(n=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},q1=t=>{const e=H1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},G1=()=>{var t;return(t=Dc())===null||t===void 0?void 0:t.config},K1=t=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hu(JSON.stringify(n)),Hu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function hR(){var t;const e=(t=Dc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pR(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mR(){return!hR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gR(){try{return typeof indexedDB=="object"}catch{return!1}}function yR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_R,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new nr(i,a,r)}}function vR(t,e){return t.replace(wR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wR=/\{\$([^}]+)}/g;function ER(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Da(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Vy(s)&&Vy(o)){if(!Da(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ko(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TR(t,e){const n=new IR(t,e);return n.subscribe.bind(n)}class IR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qh),i.error===void 0&&(i.error=qh),i.complete===void 0&&(i.complete=qh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CR(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RR(t){return t===xi?void 0:t}function CR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const kR={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},xR=he.INFO,NR={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},bR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kp{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const OR=(t,e)=>e.some(n=>t instanceof n);let Uy,Fy;function DR(){return Uy||(Uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MR(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y1=new WeakMap,of=new WeakMap,X1=new WeakMap,Gh=new WeakMap,xp=new WeakMap;function LR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(oi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Y1.set(n,t)}).catch(()=>{}),xp.set(e,t),e}function VR(t){if(of.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});of.set(t,e)}let af={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return of.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UR(t){af=t(af)}function FR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kh(this),e,...n);return X1.set(r,e.sort?e.sort():[e]),oi(r)}:MR().includes(t)?function(...e){return t.apply(Kh(this),e),oi(Y1.get(this))}:function(...e){return oi(t.apply(Kh(this),e))}}function jR(t){return typeof t=="function"?FR(t):(t instanceof IDBTransaction&&VR(t),OR(t,DR())?new Proxy(t,af):t)}function oi(t){if(t instanceof IDBRequest)return LR(t);if(Gh.has(t))return Gh.get(t);const e=jR(t);return e!==t&&(Gh.set(t,e),xp.set(e,t)),e}const Kh=t=>xp.get(t);function BR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=oi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(oi(o.result),u.oldVersion,u.newVersion,oi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const zR=["get","getKey","getAll","getAllKeys","count"],$R=["put","add","delete","clear"],Qh=new Map;function jy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qh.get(e))return Qh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$R.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zR.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Qh.set(e,s),s}UR(t=>({...t,get:(e,n,r)=>jy(e,n)||t.get(e,n,r),has:(e,n)=>!!jy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",By="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new kp("@firebase/app"),qR="@firebase/app-compat",GR="@firebase/analytics-compat",KR="@firebase/analytics",QR="@firebase/app-check-compat",YR="@firebase/app-check",XR="@firebase/auth",JR="@firebase/auth-compat",ZR="@firebase/database",eC="@firebase/database-compat",tC="@firebase/functions",nC="@firebase/functions-compat",rC="@firebase/installations",iC="@firebase/installations-compat",sC="@firebase/messaging",oC="@firebase/messaging-compat",aC="@firebase/performance",lC="@firebase/performance-compat",uC="@firebase/remote-config",cC="@firebase/remote-config-compat",hC="@firebase/storage",dC="@firebase/storage-compat",fC="@firebase/firestore",pC="@firebase/vertexai-preview",mC="@firebase/firestore-compat",gC="firebase",yC="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",_C={[lf]:"fire-core",[qR]:"fire-core-compat",[KR]:"fire-analytics",[GR]:"fire-analytics-compat",[YR]:"fire-app-check",[QR]:"fire-app-check-compat",[XR]:"fire-auth",[JR]:"fire-auth-compat",[ZR]:"fire-rtdb",[eC]:"fire-rtdb-compat",[tC]:"fire-fn",[nC]:"fire-fn-compat",[rC]:"fire-iid",[iC]:"fire-iid-compat",[sC]:"fire-fcm",[oC]:"fire-fcm-compat",[aC]:"fire-perf",[lC]:"fire-perf-compat",[uC]:"fire-rc",[cC]:"fire-rc-compat",[hC]:"fire-gcs",[dC]:"fire-gcs-compat",[fC]:"fire-fst",[mC]:"fire-fst-compat",[pC]:"fire-vertex","fire-js":"fire-js",[gC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Map,vC=new Map,cf=new Map;function zy(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qi(t){const e=t.name;if(cf.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,t);for(const n of qu.values())zy(n,t);for(const n of vC.values())zy(n,t);return!0}function Mc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new Xa("app","Firebase",wC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=yC;function J1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:uf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ai.create("bad-app-name",{appName:String(i)});if(n||(n=G1()),!n)throw ai.create("no-options");const s=qu.get(i);if(s){if(Da(n,s.options)&&Da(r,s.config))return s;throw ai.create("duplicate-app",{appName:i})}const o=new PR(i);for(const u of cf.values())o.addComponent(u);const a=new EC(n,r,o);return qu.set(i,a),a}function Np(t=uf){const e=qu.get(t);if(!e&&t===uf&&G1())return J1();if(!e)throw ai.create("no-app",{appName:t});return e}function Qn(t,e,n){var r;let i=(r=_C[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(a.join(" "));return}qi(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="firebase-heartbeat-database",IC=1,Ma="firebase-heartbeat-store";let Yh=null;function Z1(){return Yh||(Yh=BR(TC,IC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),Yh}async function SC(t){try{const n=(await Z1()).transaction(Ma),r=await n.objectStore(Ma).get(ew(t));return await n.done,r}catch(e){if(e instanceof nr)Tr.warn(e.message);else{const n=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function $y(t,e){try{const r=(await Z1()).transaction(Ma,"readwrite");await r.objectStore(Ma).put(e,ew(t)),await r.done}catch(n){if(n instanceof nr)Tr.warn(n.message);else{const r=ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(r.message)}}}function ew(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=1024,RC=30*24*60*60*1e3;class CC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wy(),{heartbeatsToSend:r,unsentEntries:i}=PC(this._heartbeatsCache.heartbeats),s=Hu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Tr.warn(n),""}}}function Wy(){return new Date().toISOString().substring(0,10)}function PC(t,e=AC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gR()?yR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hy(t){return Hu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){qi(new hi("platform-logger",e=>new WR(e),"PRIVATE")),qi(new hi("heartbeat",e=>new CC(e),"PRIVATE")),Qn(lf,By,t),Qn(lf,By,"esm2017"),Qn("fire-js","")}xC("");function bp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NC=tw,nw=new Xa("auth","Firebase",tw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new kp("@firebase/auth");function bC(t,...e){Gu.logLevel<=he.WARN&&Gu.warn(`Auth (${ns}): ${t}`,...e)}function uu(t,...e){Gu.logLevel<=he.ERROR&&Gu.error(`Auth (${ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw Op(t,...e)}function Yn(t,...e){return Op(t,...e)}function rw(t,e,n){const r=Object.assign(Object.assign({},NC()),{[e]:n});return new Xa("auth","Firebase",r).create(e,{appName:t.name})}function mr(t){return rw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nw.create(t,...e)}function se(t,e,...n){if(!t)throw Op(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uu(e),new Error(e)}function Ir(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OC(){return qy()==="http:"||qy()==="https:"}function qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OC()||dR()||"connection"in navigator)?navigator.onLine:!0}function MC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=cR()||fR()}get(){return DC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new Za(3e4,6e4);function Cr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function rr(t,e,n,r,i={}){return sw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ja(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),iw.fetch()(ow(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function sw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LC),e);try{const i=new FC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $l(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $l(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw $l(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw $l(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rw(t,h,c);Mn(t,h)}}catch(i){if(i instanceof nr)throw i;Mn(t,"network-request-failed",{message:String(i)})}}async function el(t,e,n,r,i={}){const s=await rr(t,e,n,r,i);return"mfaPendingCredential"in s&&Mn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ow(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Dp(t.config,i):`${t.config.apiScheme}://${i}`}function UC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),VC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $l(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}function Gy(t){return t!==void 0&&t.enterprise!==void 0}class jC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return UC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function BC(t,e){return rr(t,"GET","/v2/recaptchaConfig",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e){return rr(t,"POST","/v1/accounts:delete",e)}async function aw(t,e){return rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $C(t,e=!1){const n=Me(t),r=await n.getIdToken(e),i=Mp(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ua(Xh(i.auth_time)),issuedAtTime:ua(Xh(i.iat)),expirationTime:ua(Xh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Xh(t){return Number(t)*1e3}function Mp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const i=W1(n);return i?JSON.parse(i):(uu("Failed to decode base64 JWT payload"),null)}catch(i){return uu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ky(t){const e=Mp(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&WC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ua(this.lastLoginAt),this.creationTime=ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xs(t,aw(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lw(s.providerUserInfo):[],a=GC(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new df(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function qC(t){const e=Me(t);await Ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lw(t){return t.map(e=>{var{providerId:n}=e,r=bp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e){const n=await sw(t,{},async()=>{const r=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ow(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",iw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QC(t,e){return rr(t,"POST","/v2/accounts:revokeToken",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=Ky(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await KC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new js;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new js,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new df(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xs(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $C(this,e)}reload(){return qC(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ku(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await Xs(this,zC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,A=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:R,emailVerified:O,isAnonymous:M,providerData:b,stsTokenManager:S}=n;se(R&&S,e,"internal-error");const m=js.fromJSON(this.name,S);se(typeof R=="string",e,"internal-error"),Mr(d,e.name),Mr(f,e.name),se(typeof O=="boolean",e,"internal-error"),se(typeof M=="boolean",e,"internal-error"),Mr(g,e.name),Mr(v,e.name),Mr(C,e.name),Mr(x,e.name),Mr(w,e.name),Mr(A,e.name);const y=new dr({uid:R,auth:e,email:f,emailVerified:O,displayName:d,isAnonymous:M,photoURL:v,phoneNumber:g,tenantId:C,stsTokenManager:m,createdAt:w,lastLoginAt:A});return b&&Array.isArray(b)&&(y.providerData=b.map(E=>Object.assign({},E))),x&&(y._redirectEventId=x),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new js;i.updateFromServerResponse(n);const s=new dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ku(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new js;a.updateFromIdToken(r);const u=new dr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new df(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;function fr(t){Ir(t instanceof Function,"Expected a class definition");let e=Qy.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uw.type="NONE";const Yy=uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e,n){return`firebase:${t}:${e}:${n}`}class Bs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=cu(this.userKey,i.apiKey,s),this.fullPersistenceKey=cu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bs(fr(Yy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||fr(Yy);const o=cu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=dr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Bs(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Bs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mw(e))return"Blackberry";if(gw(e))return"Webos";if(hw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(pw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cw(t=Lt()){return/firefox\//i.test(t)}function hw(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(t=Lt()){return/crios\//i.test(t)}function fw(t=Lt()){return/iemobile/i.test(t)}function pw(t=Lt()){return/android/i.test(t)}function mw(t=Lt()){return/blackberry/i.test(t)}function gw(t=Lt()){return/webos/i.test(t)}function Lp(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YC(t=Lt()){var e;return Lp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XC(){return pR()&&document.documentMode===10}function yw(t=Lt()){return Lp(t)||pw(t)||gw(t)||mw(t)||/windows phone/i.test(t)||fw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e=[]){let n;switch(t){case"Browser":n=Xy(Lt());break;case"Worker":n=`${Xy(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e={}){return rr(t,"GET","/v2/passwordPolicy",Cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=6;class tP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jy(this),this.idTokenSubscription=new Jy(this),this.beforeStateQueue=new JC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aw(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ku(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(mr(this));const n=e?Me(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZC(this),n=new tP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Bs.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rs(t){return Me(t)}class Jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rP(t){Lc=t}function vw(t){return Lc.loadJS(t)}function iP(){return Lc.recaptchaEnterpriseScript}function sP(){return Lc.gapiScript}function oP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const aP="recaptcha-enterprise",lP="NO_RECAPTCHA";class uP{constructor(e){this.type=aP,this.auth=rs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{BC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new jC(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;Gy(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(lP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Gy(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iP();u.length!==0&&(u+=a),vw(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Zy(t,e,n,r=!1){const i=new uP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ff(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Zy(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Zy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e){const n=Mc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Da(s,e??{}))return i;Mn(i,"already-initialized")}return n.initialize({options:e})}function hP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dP(t,e,n){const r=rs(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ww(e),{host:o,port:a}=fP(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pP()}function ww(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fP(t){const e=ww(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:e_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:e_(o)}}}function e_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}async function mP(t,e){return rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(t,e){return el(t,"POST","/v1/accounts:signInWithPassword",Cr(t,e))}async function yP(t,e){return rr(t,"POST","/v1/accounts:sendOobCode",Cr(t,e))}async function _P(t,e){return yP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){return el(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}async function wP(t,e){return el(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Vp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new La(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new La(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,n,"signInWithPassword",gP);case"emailLink":return vP(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,r,"signUpPassword",mP);case"emailLink":return wP(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e){return el(t,"POST","/v1/accounts:signInWithIdp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="http://localhost";class Gi extends Vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=bp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Gi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zs(e,n)}buildRequest(){const e={requestUri:EP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IP(t){const e=Ko(Qo(t)).link,n=e?Ko(Qo(e)).deep_link_id:null,r=Ko(Qo(t)).deep_link_id;return(r?Ko(Qo(r)).link:null)||r||n||e||t}class Up{constructor(e){var n,r,i,s,o,a;const u=Ko(Qo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,d=TP((i=u.mode)!==null&&i!==void 0?i:null);se(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=IP(e);try{return new Up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return La._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Up.parseLink(n);return se(r,"argument-error"),La._fromEmailAndCode(e,r.code,r.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Ew{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends tl{constructor(){super("facebook.com")}static credential(e){return Gi._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gi._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends tl{constructor(){super("github.com")}static credential(e){return Gi._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends tl{constructor(){super("twitter.com")}static credential(e,n){return Gi._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e){return el(t,"POST","/v1/accounts:signUp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await dr._fromIdTokenResponse(e,r,i),o=t_(r);return new Ki({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=t_(r);return new Ki({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function t_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends nr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qu(e,n,r,i)}}function Tw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qu._fromErrorAndOperation(t,s,e,r):s})}async function AP(t,e,n=!1){const r=await Xs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ki._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(mr(r));const i="reauthenticate";try{const s=await Xs(t,Tw(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Mp(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Ki._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(t,e,n=!1){if(Hn(t.app))return Promise.reject(mr(t));const r="signIn",i=await Tw(t,r,e),s=await Ki._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function CP(t,e){return Iw(rs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(t){const e=rs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PP(t,e,n){if(Hn(t.app))return Promise.reject(mr(t));const r=rs(t),o=await ff(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Sw(t),u}),a=await Ki._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function kP(t,e,n){return Hn(t.app)?Promise.reject(mr(t)):CP(Me(t),ho.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Sw(t),r})}async function xP(t,e){const n=Me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await _P(n.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){return rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Me(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Xs(r,NP(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function bP(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function OP(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function DP(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function MP(t){return Me(t).signOut()}const Yu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yu,"1"),this.storage.removeItem(Yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=1e3,VP=10;class Cw extends Rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);XC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,VP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cw.type="LOCAL";const UP=Cw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Pw.type="SESSION";const kw=Pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Vc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await FP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Fp("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function BP(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function zP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $P(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function WP(){return xw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firebaseLocalStorageDb",HP=1,Xu="firebaseLocalStorage",bw="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uc(t,e){return t.transaction([Xu],e?"readwrite":"readonly").objectStore(Xu)}function qP(){const t=indexedDB.deleteDatabase(Nw);return new nl(t).toPromise()}function pf(){const t=indexedDB.open(Nw,HP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xu,{keyPath:bw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xu)?e(r):(r.close(),await qP(),e(await pf()))})})}async function n_(t,e,n){const r=Uc(t,!0).put({[bw]:e,value:n});return new nl(r).toPromise()}async function GP(t,e){const n=Uc(t,!1).get(e),r=await new nl(n).toPromise();return r===void 0?null:r.value}function r_(t,e){const n=Uc(t,!0).delete(e);return new nl(n).toPromise()}const KP=800,QP=3;class Ow{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vc._getInstance(WP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zP(),!this.activeServiceWorker)return;this.sender=new jP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$P()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pf();return await n_(e,Yu,"1"),await r_(e,Yu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>r_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Uc(i,!1).getAll();return new nl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ow.type="LOCAL";const YP=Ow;new Za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e){return e?fr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JP(t){return Iw(t.auth,new jp(t),t.bypassAuthState)}function ZP(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),RP(n,new jp(t),t.bypassAuthState)}async function ek(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),AP(n,new jp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JP;case"linkViaPopup":case"linkViaRedirect":return ek;case"reauthViaPopup":case"reauthViaRedirect":return ZP;default:Mn(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new Za(2e3,1e4);class Ns extends Dw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tk.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="pendingRedirect",hu=new Map;class rk extends Dw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hu.get(this.auth._key());if(!e){try{const r=await ik(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hu.set(this.auth._key(),e)}return this.bypassAuthState||hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ik(t,e){const n=ak(e),r=ok(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function sk(t,e){hu.set(t._key(),e)}function ok(t){return fr(t._redirectPersistence)}function ak(t){return cu(nk,t.config.apiKey,t.name)}async function lk(t,e,n=!1){if(Hn(t.app))return Promise.reject(mr(t));const r=rs(t),i=XP(r,e),o=await new rk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=10*60*1e3;class ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Mw(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uk&&this.cachedEventUids.clear(),this.cachedEventUids.has(i_(e))}saveEventToCache(e){this.cachedEventUids.add(i_(e)),this.lastProcessedEventTime=Date.now()}}function i_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e={}){return rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pk=/^https?/;async function mk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dk(t);for(const n of e)try{if(gk(n))return}catch{}Mn(t,"unauthorized-domain")}function gk(t){const e=hf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pk.test(n))return!1;if(fk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Za(3e4,6e4);function s_(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _k(t){return new Promise((e,n)=>{var r,i,s;function o(){s_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s_(),n(Yn(t,"network-request-failed"))},timeout:yk.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const a=oP("iframefcb");return Xn()[a]=()=>{gapi.load?o():n(Yn(t,"network-request-failed"))},vw(`${sP()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw du=null,e})}let du=null;function vk(t){return du=du||_k(t),du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=new Za(5e3,15e3),Ek="__/auth/iframe",Tk="emulator/auth/iframe",Ik={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ak(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dp(e,Tk):`https://${t.config.authDomain}/${Ek}`,r={apiKey:e.apiKey,appName:t.name,v:ns},i=Sk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ja(r).slice(1)}`}async function Rk(t){const e=await vk(t),n=Xn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:Ak(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ik,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),a=Xn().setTimeout(()=>{s(o)},wk.get());function u(){Xn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pk=500,kk=600,xk="_blank",Nk="http://localhost";class o_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bk(t,e,n,r=Pk,i=kk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Ck),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Lt().toLowerCase();n&&(a=dw(c)?xk:n),cw(c)&&(e=e||Nk,u.scrollbars="yes");const h=Object.entries(u).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(YC(c)&&a!=="_self")return Ok(e||"",a),new o_(null);const d=window.open(e||"",a,h);se(d,t,"popup-blocked");try{d.focus()}catch{}return new o_(d)}function Ok(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="__/auth/handler",Mk="emulator/auth/handler",Lk=encodeURIComponent("fac");async function a_(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ns,eventId:i};if(e instanceof Ew){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ER(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof tl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${Lk}=${encodeURIComponent(u)}`:"";return`${Vk(t)}?${Ja(a).slice(1)}${c}`}function Vk({config:t}){return t.emulator?Dp(t,Mk):`https://${t.authDomain}/${Dk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="webStorageSupport";class Uk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kw,this._completeRedirectFn=lk,this._overrideRedirectResult=sk}async _openPopup(e,n,r,i){var s;Ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await a_(e,n,r,hf(),i);return bk(e,o,Fp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await a_(e,n,r,hf(),i);return BP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Rk(e),r=new ck(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jh,{type:Jh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Jh];o!==void 0&&n(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yw()||hw()||Lp()}}const Fk=Uk;var l_="@firebase/auth",u_="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zk(t){qi(new hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_w(t)},c=new nP(r,i,s,u);return hP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qi(new hi("auth-internal",e=>{const n=rs(e.getProvider("auth").getImmediate());return(r=>new jk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(l_,u_,Bk(t)),Qn(l_,u_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=5*60,Wk=K1("authIdTokenMaxAge")||$k;let c_=null;const Hk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wk)return;const i=n==null?void 0:n.token;c_!==i&&(c_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qk(t=Np()){const e=Mc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cP(t,{popupRedirectResolver:Fk,persistence:[YP,UP,kw]}),r=K1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Hk(s.toString());OP(n,o,()=>o(n.currentUser)),bP(n,a=>o(a))}}const i=H1("auth");return i&&dP(n,`http://${i}`),n}function Gk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Gk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zk("Browser");var Kk="firebase",Qk="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(Kk,Qk,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebasestorage.googleapis.com",Vw="storageBucket",Yk=2*60*1e3,Xk=10*60*1e3,Jk=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends nr{constructor(e,n,r=0){super(Zh(e),`Firebase Storage: ${n} (${Zh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,He.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Le;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Le||(Le={}));function Zh(t){return"storage/"+t}function Bp(){const t="An unknown error occurred, please check the error payload for server response.";return new He(Le.UNKNOWN,t)}function Zk(t){return new He(Le.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ex(t){return new He(Le.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function tx(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(Le.UNAUTHENTICATED,t)}function nx(){return new He(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function rx(t){return new He(Le.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Uw(){return new He(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Fw(){return new He(Le.CANCELED,"User canceled the upload/download.")}function ix(t){return new He(Le.INVALID_URL,"Invalid URL '"+t+"'.")}function sx(t){return new He(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ox(){return new He(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vw+"' property when initializing the app?")}function jw(){return new He(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ax(){return new He(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function lx(){return new He(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ux(t){return new He(Le.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mf(t){return new He(Le.INVALID_ARGUMENT,t)}function Bw(){return new He(Le.APP_DELETED,"The Firebase app was deleted.")}function cx(t){return new He(Le.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ca(t,e){return new He(Le.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function jo(t){throw new He(Le.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw sx(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),v={bucket:1,path:3},C=n===Lw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",w=new RegExp(`^https?://${C}/${i}/${x}`,"i"),R=[{regex:a,indices:u,postModify:s},{regex:g,indices:v,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<R.length;O++){const M=R[O],b=M.regex.exec(e);if(b){const S=b[M.indices.bucket];let m=b[M.indices.path];m||(m=""),r=new ln(S,m),M.postModify(r);break}}if(r==null)throw ix(e);return r}}class hx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...x){c||(c=!0,e.apply(null,x))}function d(x){i=setTimeout(()=>{i=null,t(g,u())},x)}function f(){s&&clearTimeout(s)}function g(x,...w){if(c){f();return}if(x){f(),h.call(null,x,...w);return}if(u()||o){f(),h.call(null,x,...w);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,d(R)}let v=!1;function C(x){v||(v=!0,f(),!c&&(i!==null?(x||(a=2),clearTimeout(i),d(0)):x||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,C(!0)},n),C}function fx(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){return t!==void 0}function mx(t){return typeof t=="function"}function gx(t){return typeof t=="object"&&!Array.isArray(t)}function Fc(t){return typeof t=="string"||t instanceof String}function h_(t){return zp()&&t instanceof Blob}function zp(){return typeof Blob<"u"}function d_(t,e,n,r){if(r<e)throw mf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw mf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function zw(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fi||(Fi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i,s,o,a,u,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Wl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Fi.NO_ERROR,u=s.getStatus();if(!a||$w(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Fi.ABORT;r(!1,new Wl(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Wl(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());px(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Bp();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Bw():Fw();o(u)}else{const u=Uw();o(u)}};this.canceled_?n(!1,new Wl(!1,null,!0)):this.backoffId_=dx(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _x(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vx(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wx(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Ex(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Tx(t,e,n,r,i,s,o=!0){const a=zw(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return wx(c,e),_x(c,n),vx(c,s),Ex(c,r),new yx(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Sx(...t){const e=Ix();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zp())return new Blob(t);throw new He(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ax(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){if(typeof atob>"u")throw ux("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ed{constructor(e,n){this.data=e,this.contentType=n||null}}function Cx(t,e){switch(t){case qn.RAW:return new ed(Ww(e));case qn.BASE64:case qn.BASE64URL:return new ed(Hw(t,e));case qn.DATA_URL:return new ed(kx(e),xx(e))}throw Bp()}function Ww(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Px(t){let e;try{e=decodeURIComponent(t)}catch{throw ca(qn.DATA_URL,"Malformed data URL.")}return Ww(e)}function Hw(t,e){switch(t){case qn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ca(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ca(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Rx(e)}catch(i){throw i.message.includes("polyfill")?i:ca(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ca(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Nx(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function kx(t){const e=new qw(t);return e.base64?Hw(qn.BASE64,e.rest):Px(e.rest)}function xx(t){return new qw(t).contentType}function Nx(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){let r=0,i="";h_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(h_(this.data_)){const r=this.data_,i=Ax(r,e,n);return i===null?null:new Hr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hr(r,!0)}}static getBlob(...e){if(zp()){const n=e.map(r=>r instanceof Hr?r.data_:r);return new Hr(Sx.apply(null,n))}else{const n=e.map(o=>Fc(o)?Cx(qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Hr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){let e;try{e=JSON.parse(t)}catch{return null}return gx(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Ox(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Kw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e){return e}class Ft{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Dx}}let Hl=null;function Mx(t){return!Fc(t)||t.length<2?t:Kw(t)}function Qw(){if(Hl)return Hl;const t=[];t.push(new Ft("bucket")),t.push(new Ft("generation")),t.push(new Ft("metageneration")),t.push(new Ft("name","fullPath",!0));function e(s,o){return Mx(o)}const n=new Ft("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ft("size");return i.xform=r,t.push(i),t.push(new Ft("timeCreated")),t.push(new Ft("updated")),t.push(new Ft("md5Hash",null,!0)),t.push(new Ft("cacheControl",null,!0)),t.push(new Ft("contentDisposition",null,!0)),t.push(new Ft("contentEncoding",null,!0)),t.push(new Ft("contentLanguage",null,!0)),t.push(new Ft("contentType",null,!0)),t.push(new Ft("metadata","customMetadata",!0)),Hl=t,Hl}function Lx(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new ln(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Vx(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Lx(r,t),r}function Yw(t,e,n){const r=Gw(e);return r===null?null:Vx(t,r,n)}function Ux(t,e,n,r){const i=Gw(e);if(i===null||!Fc(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),g=rl(f,n,r),v=zw({alt:"media",token:c});return g+v})[0]}function Xw(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class fo{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){if(!t)throw Bp()}function $p(t,e){function n(r,i){const s=Yw(t,i,e);return gr(s!==null),s}return n}function Fx(t,e){function n(r,i){const s=Yw(t,i,e);return gr(s!==null),Ux(s,i,t.host,t._protocol)}return n}function il(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=nx():i=tx():n.getStatus()===402?i=ex(t.bucket):n.getStatus()===403?i=rx(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Jw(t){const e=il(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Zk(t.path)),s.serverResponse=i.serverResponse,s}return n}function jx(t,e,n){const r=e.fullServerUrl(),i=rl(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new fo(i,s,$p(t,n),o);return a.errorHandler=Jw(e),a}function Bx(t,e,n){const r=e.fullServerUrl(),i=rl(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new fo(i,s,Fx(t,n),o);return a.errorHandler=Jw(e),a}function zx(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Zw(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=zx(null,e)),r}function $x(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let O=0;O<2;O++)R=R+Math.random().toString().slice(2);return R}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=Zw(e,r,i),h=Xw(c,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+u+"--",g=Hr.getBlob(d,r,f);if(g===null)throw jw();const v={name:c.fullPath},C=rl(s,t.host,t._protocol),x="POST",w=t.maxUploadRetryTime,A=new fo(C,x,$p(t,n),w);return A.urlParams=v,A.headers=o,A.body=g.uploadData(),A.errorHandler=il(e),A}class Ju{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Wp(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{gr(!1)}return gr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Wx(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=Zw(e,r,i),a={name:o.fullPath},u=rl(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=Xw(o,n),f=t.maxUploadRetryTime;function g(C){Wp(C);let x;try{x=C.getResponseHeader("X-Goog-Upload-URL")}catch{gr(!1)}return gr(Fc(x)),x}const v=new fo(u,c,g,f);return v.urlParams=a,v.headers=h,v.body=d,v.errorHandler=il(e),v}function Hx(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=Wp(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gr(!1)}d||gr(!1);const f=Number(d);return gr(!isNaN(f)),new Ju(f,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,u=new fo(n,o,s,a);return u.headers=i,u.errorHandler=il(e),u}const f_=256*1024;function qx(t,e,n,r,i,s,o,a){const u=new Ju(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw ax();const c=u.total-u.current;let h=c;i>0&&(h=Math.min(h,i));const d=u.current,f=d+h;let g="";h===0?g="finalize":c===h?g="upload, finalize":g="upload";const v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${u.current}`},C=r.slice(d,f);if(C===null)throw jw();function x(O,M){const b=Wp(O,["active","final"]),S=u.current+h,m=r.size();let y;return b==="final"?y=$p(e,s)(O,M):y=null,new Ju(S,m,b==="final",y)}const w="POST",A=e.maxUploadRetryTime,R=new fo(n,w,x,A);return R.headers=v,R.body=C.uploadData(),R.progressCallback=a||null,R.errorHandler=il(t),R}const qt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function td(t){switch(t){case"running":case"pausing":case"canceling":return qt.RUNNING;case"paused":return qt.PAUSED;case"success":return qt.SUCCESS;case"canceled":return qt.CANCELED;case"error":return qt.ERROR;default:return qt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r){if(mx(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Kx{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw jo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Qx extends Kx{initXhr(){this.xhr_.responseType="text"}}function ms(){return new Qx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Qw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if($w(i.status,[]))if(s)i=Uw();else{this.sleepTime=Math.max(this.sleepTime*2,Jk),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Wx(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ms,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Hx(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ms,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=f_*this._chunkMultiplier,n=new Ju(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=qx(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ms,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){f_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=jx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ms,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=$x(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ms,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Fw(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=td(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Gx(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(td(this._state)){case qt.SUCCESS:ds(this._resolve.bind(null,this.snapshot))();break;case qt.CANCELED:case qt.ERROR:const n=this._reject;ds(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(td(this._state)){case qt.RUNNING:case qt.PAUSED:e.next&&ds(e.next.bind(e,this.snapshot))();break;case qt.SUCCESS:e.complete&&ds(e.complete.bind(e))();break;case qt.CANCELED:case qt.ERROR:e.error&&ds(e.error.bind(e,this._error))();break;default:e.error&&ds(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qi(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kw(this._location.path)}get storage(){return this._service}get parent(){const e=bx(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new Qi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cx(e)}}function Xx(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Yx(t,new Hr(e),n)}function Jx(t){t._throwIfRoot("getDownloadURL");const e=Bx(t.storage,t._location,Qw());return t.storage.makeRequestWithTokens(e,ms).then(n=>{if(n===null)throw lx();return n})}function Zx(t,e){const n=Ox(t._location.path,e),r=new ln(t._location.bucket,n);return new Qi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){return/^[A-Za-z]+:\/\//.test(t)}function tN(t,e){return new Qi(t,e)}function eE(t,e){if(t instanceof Hp){const n=t;if(n._bucket==null)throw ox();const r=new Qi(n,n._bucket);return e!=null?eE(r,e):r}else return e!==void 0?Zx(t,e):t}function nN(t,e){if(e&&eN(e)){if(t instanceof Hp)return tN(t,e);throw mf("To use ref(service, url), the first argument must be a Storage instance.")}else return eE(t,e)}function p_(t,e){const n=e==null?void 0:e[Vw];return n==null?null:ln.makeFromBucketSpec(n,t)}function rN(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Q1(i,t.app.options.projectId))}class Hp{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Lw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yk,this._maxUploadRetryTime=Xk,this._requests=new Set,i!=null?this._bucket=ln.makeFromBucketSpec(i,this._host):this._bucket=p_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=p_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qi(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new hx(Bw());{const o=Tx(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const m_="@firebase/storage",g_="0.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="storage";function nE(t,e,n){return t=Me(t),Xx(t,e,n)}function rE(t){return t=Me(t),Jx(t)}function iE(t,e){return t=Me(t),nN(t,e)}function iN(t=Np(),e){t=Me(t);const r=Mc(t,tE).getImmediate({identifier:e}),i=q1("storage");return i&&sN(r,...i),r}function sN(t,e,n,r={}){rN(t,e,n,r)}function oN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Hp(n,r,i,e,ns)}function aN(){qi(new hi(tE,oN,"PUBLIC").setMultipleInstances(!0)),Qn(m_,g_,""),Qn(m_,g_,"esm2017")}aN();var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,sE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,m){function y(){}y.prototype=m.prototype,S.D=m.prototype,S.prototype=new y,S.prototype.constructor=S,S.C=function(E,I,P){for(var T=Array(arguments.length-2),L=2;L<arguments.length;L++)T[L-2]=arguments[L];return m.prototype[I].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,m,y){y||(y=0);var E=Array(16);if(typeof m=="string")for(var I=0;16>I;++I)E[I]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(I=0;16>I;++I)E[I]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=S.g[0],y=S.g[1],I=S.g[2];var P=S.g[3],T=m+(P^y&(I^P))+E[0]+3614090360&4294967295;m=y+(T<<7&4294967295|T>>>25),T=P+(I^m&(y^I))+E[1]+3905402710&4294967295,P=m+(T<<12&4294967295|T>>>20),T=I+(y^P&(m^y))+E[2]+606105819&4294967295,I=P+(T<<17&4294967295|T>>>15),T=y+(m^I&(P^m))+E[3]+3250441966&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(P^y&(I^P))+E[4]+4118548399&4294967295,m=y+(T<<7&4294967295|T>>>25),T=P+(I^m&(y^I))+E[5]+1200080426&4294967295,P=m+(T<<12&4294967295|T>>>20),T=I+(y^P&(m^y))+E[6]+2821735955&4294967295,I=P+(T<<17&4294967295|T>>>15),T=y+(m^I&(P^m))+E[7]+4249261313&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(P^y&(I^P))+E[8]+1770035416&4294967295,m=y+(T<<7&4294967295|T>>>25),T=P+(I^m&(y^I))+E[9]+2336552879&4294967295,P=m+(T<<12&4294967295|T>>>20),T=I+(y^P&(m^y))+E[10]+4294925233&4294967295,I=P+(T<<17&4294967295|T>>>15),T=y+(m^I&(P^m))+E[11]+2304563134&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(P^y&(I^P))+E[12]+1804603682&4294967295,m=y+(T<<7&4294967295|T>>>25),T=P+(I^m&(y^I))+E[13]+4254626195&4294967295,P=m+(T<<12&4294967295|T>>>20),T=I+(y^P&(m^y))+E[14]+2792965006&4294967295,I=P+(T<<17&4294967295|T>>>15),T=y+(m^I&(P^m))+E[15]+1236535329&4294967295,y=I+(T<<22&4294967295|T>>>10),T=m+(I^P&(y^I))+E[1]+4129170786&4294967295,m=y+(T<<5&4294967295|T>>>27),T=P+(y^I&(m^y))+E[6]+3225465664&4294967295,P=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(P^m))+E[11]+643717713&4294967295,I=P+(T<<14&4294967295|T>>>18),T=y+(P^m&(I^P))+E[0]+3921069994&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(I^P&(y^I))+E[5]+3593408605&4294967295,m=y+(T<<5&4294967295|T>>>27),T=P+(y^I&(m^y))+E[10]+38016083&4294967295,P=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(P^m))+E[15]+3634488961&4294967295,I=P+(T<<14&4294967295|T>>>18),T=y+(P^m&(I^P))+E[4]+3889429448&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(I^P&(y^I))+E[9]+568446438&4294967295,m=y+(T<<5&4294967295|T>>>27),T=P+(y^I&(m^y))+E[14]+3275163606&4294967295,P=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(P^m))+E[3]+4107603335&4294967295,I=P+(T<<14&4294967295|T>>>18),T=y+(P^m&(I^P))+E[8]+1163531501&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(I^P&(y^I))+E[13]+2850285829&4294967295,m=y+(T<<5&4294967295|T>>>27),T=P+(y^I&(m^y))+E[2]+4243563512&4294967295,P=m+(T<<9&4294967295|T>>>23),T=I+(m^y&(P^m))+E[7]+1735328473&4294967295,I=P+(T<<14&4294967295|T>>>18),T=y+(P^m&(I^P))+E[12]+2368359562&4294967295,y=I+(T<<20&4294967295|T>>>12),T=m+(y^I^P)+E[5]+4294588738&4294967295,m=y+(T<<4&4294967295|T>>>28),T=P+(m^y^I)+E[8]+2272392833&4294967295,P=m+(T<<11&4294967295|T>>>21),T=I+(P^m^y)+E[11]+1839030562&4294967295,I=P+(T<<16&4294967295|T>>>16),T=y+(I^P^m)+E[14]+4259657740&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(y^I^P)+E[1]+2763975236&4294967295,m=y+(T<<4&4294967295|T>>>28),T=P+(m^y^I)+E[4]+1272893353&4294967295,P=m+(T<<11&4294967295|T>>>21),T=I+(P^m^y)+E[7]+4139469664&4294967295,I=P+(T<<16&4294967295|T>>>16),T=y+(I^P^m)+E[10]+3200236656&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(y^I^P)+E[13]+681279174&4294967295,m=y+(T<<4&4294967295|T>>>28),T=P+(m^y^I)+E[0]+3936430074&4294967295,P=m+(T<<11&4294967295|T>>>21),T=I+(P^m^y)+E[3]+3572445317&4294967295,I=P+(T<<16&4294967295|T>>>16),T=y+(I^P^m)+E[6]+76029189&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(y^I^P)+E[9]+3654602809&4294967295,m=y+(T<<4&4294967295|T>>>28),T=P+(m^y^I)+E[12]+3873151461&4294967295,P=m+(T<<11&4294967295|T>>>21),T=I+(P^m^y)+E[15]+530742520&4294967295,I=P+(T<<16&4294967295|T>>>16),T=y+(I^P^m)+E[2]+3299628645&4294967295,y=I+(T<<23&4294967295|T>>>9),T=m+(I^(y|~P))+E[0]+4096336452&4294967295,m=y+(T<<6&4294967295|T>>>26),T=P+(y^(m|~I))+E[7]+1126891415&4294967295,P=m+(T<<10&4294967295|T>>>22),T=I+(m^(P|~y))+E[14]+2878612391&4294967295,I=P+(T<<15&4294967295|T>>>17),T=y+(P^(I|~m))+E[5]+4237533241&4294967295,y=I+(T<<21&4294967295|T>>>11),T=m+(I^(y|~P))+E[12]+1700485571&4294967295,m=y+(T<<6&4294967295|T>>>26),T=P+(y^(m|~I))+E[3]+2399980690&4294967295,P=m+(T<<10&4294967295|T>>>22),T=I+(m^(P|~y))+E[10]+4293915773&4294967295,I=P+(T<<15&4294967295|T>>>17),T=y+(P^(I|~m))+E[1]+2240044497&4294967295,y=I+(T<<21&4294967295|T>>>11),T=m+(I^(y|~P))+E[8]+1873313359&4294967295,m=y+(T<<6&4294967295|T>>>26),T=P+(y^(m|~I))+E[15]+4264355552&4294967295,P=m+(T<<10&4294967295|T>>>22),T=I+(m^(P|~y))+E[6]+2734768916&4294967295,I=P+(T<<15&4294967295|T>>>17),T=y+(P^(I|~m))+E[13]+1309151649&4294967295,y=I+(T<<21&4294967295|T>>>11),T=m+(I^(y|~P))+E[4]+4149444226&4294967295,m=y+(T<<6&4294967295|T>>>26),T=P+(y^(m|~I))+E[11]+3174756917&4294967295,P=m+(T<<10&4294967295|T>>>22),T=I+(m^(P|~y))+E[2]+718787259&4294967295,I=P+(T<<15&4294967295|T>>>17),T=y+(P^(I|~m))+E[9]+3951481745&4294967295,S.g[0]=S.g[0]+m&4294967295,S.g[1]=S.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,m){m===void 0&&(m=S.length);for(var y=m-this.blockSize,E=this.B,I=this.h,P=0;P<m;){if(I==0)for(;P<=y;)i(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<m;)if(E[I++]=S.charCodeAt(P++),I==this.blockSize){i(this,E),I=0;break}}else for(;P<m;)if(E[I++]=S[P++],I==this.blockSize){i(this,E),I=0;break}}this.h=I,this.o+=m},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var m=1;m<S.length-8;++m)S[m]=0;var y=8*this.o;for(m=S.length-8;m<S.length;++m)S[m]=y&255,y/=256;for(this.u(S),S=Array(16),m=y=0;4>m;++m)for(var E=0;32>E;E+=8)S[y++]=this.g[m]>>>E&255;return S};function s(S,m){var y=a;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=m(S)}function o(S,m){this.h=m;for(var y=[],E=!0,I=S.length-1;0<=I;I--){var P=S[I]|0;E&&P==m||(y[I]=P,E=!1)}this.g=y}var a={};function u(S){return-128<=S&&128>S?s(S,function(m){return new o([m|0],0>m?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return x(c(-S));for(var m=[],y=1,E=0;S>=y;E++)m[E]=S/y|0,y*=4294967296;return new o(m,0)}function h(S,m){if(S.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(S.charAt(0)=="-")return x(h(S.substring(1),m));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(m,8)),E=d,I=0;I<S.length;I+=8){var P=Math.min(8,S.length-I),T=parseInt(S.substring(I,I+P),m);8>P?(P=c(Math.pow(m,P)),E=E.j(P).add(c(T))):(E=E.j(y),E=E.add(c(T)))}return E}var d=u(0),f=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-x(this).m();for(var S=0,m=1,y=0;y<this.g.length;y++){var E=this.i(y);S+=(0<=E?E:4294967296+E)*m,m*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(C(this))return"-"+x(this).toString(S);for(var m=c(Math.pow(S,6)),y=this,E="";;){var I=O(y,m).g;y=w(y,I.j(m));var P=((0<y.g.length?y.g[0]:y.h)>>>0).toString(S);if(y=I,v(y))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var m=0;m<S.g.length;m++)if(S.g[m]!=0)return!1;return!0}function C(S){return S.h==-1}t.l=function(S){return S=w(this,S),C(S)?-1:v(S)?0:1};function x(S){for(var m=S.g.length,y=[],E=0;E<m;E++)y[E]=~S.g[E];return new o(y,~S.h).add(f)}t.abs=function(){return C(this)?x(this):this},t.add=function(S){for(var m=Math.max(this.g.length,S.g.length),y=[],E=0,I=0;I<=m;I++){var P=E+(this.i(I)&65535)+(S.i(I)&65535),T=(P>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);E=T>>>16,P&=65535,T&=65535,y[I]=T<<16|P}return new o(y,y[y.length-1]&-2147483648?-1:0)};function w(S,m){return S.add(x(m))}t.j=function(S){if(v(this)||v(S))return d;if(C(this))return C(S)?x(this).j(x(S)):x(x(this).j(S));if(C(S))return x(this.j(x(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var m=this.g.length+S.g.length,y=[],E=0;E<2*m;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var I=0;I<S.g.length;I++){var P=this.i(E)>>>16,T=this.i(E)&65535,L=S.i(I)>>>16,z=S.i(I)&65535;y[2*E+2*I]+=T*z,A(y,2*E+2*I),y[2*E+2*I+1]+=P*z,A(y,2*E+2*I+1),y[2*E+2*I+1]+=T*L,A(y,2*E+2*I+1),y[2*E+2*I+2]+=P*L,A(y,2*E+2*I+2)}for(E=0;E<m;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=m;E<2*m;E++)y[E]=0;return new o(y,0)};function A(S,m){for(;(S[m]&65535)!=S[m];)S[m+1]+=S[m]>>>16,S[m]&=65535,m++}function R(S,m){this.g=S,this.h=m}function O(S,m){if(v(m))throw Error("division by zero");if(v(S))return new R(d,d);if(C(S))return m=O(x(S),m),new R(x(m.g),x(m.h));if(C(m))return m=O(S,x(m)),new R(x(m.g),m.h);if(30<S.g.length){if(C(S)||C(m))throw Error("slowDivide_ only works with positive integers.");for(var y=f,E=m;0>=E.l(S);)y=M(y),E=M(E);var I=b(y,1),P=b(E,1);for(E=b(E,2),y=b(y,2);!v(E);){var T=P.add(E);0>=T.l(S)&&(I=I.add(y),P=T),E=b(E,1),y=b(y,1)}return m=w(S,I.j(m)),new R(I,m)}for(I=d;0<=S.l(m);){for(y=Math.max(1,Math.floor(S.m()/m.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),P=c(y),T=P.j(m);C(T)||0<T.l(S);)y-=E,P=c(y),T=P.j(m);v(P)&&(P=f),I=I.add(P),S=w(S,T)}return new R(I,S)}t.A=function(S){return O(this,S).h},t.and=function(S){for(var m=Math.max(this.g.length,S.g.length),y=[],E=0;E<m;E++)y[E]=this.i(E)&S.i(E);return new o(y,this.h&S.h)},t.or=function(S){for(var m=Math.max(this.g.length,S.g.length),y=[],E=0;E<m;E++)y[E]=this.i(E)|S.i(E);return new o(y,this.h|S.h)},t.xor=function(S){for(var m=Math.max(this.g.length,S.g.length),y=[],E=0;E<m;E++)y[E]=this.i(E)^S.i(E);return new o(y,this.h^S.h)};function M(S){for(var m=S.g.length+1,y=[],E=0;E<m;E++)y[E]=S.i(E)<<1|S.i(E-1)>>>31;return new o(y,S.h)}function b(S,m){var y=m>>5;m%=32;for(var E=S.g.length-y,I=[],P=0;P<E;P++)I[P]=0<m?S.i(P+y)>>>m|S.i(P+y+1)<<32-m:S.i(P+y);return new o(I,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ji=o}).apply(typeof y_<"u"?y_:typeof self<"u"?self:typeof window<"u"?window:{});var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oE,aE,Yo,lE,fu,gf,uE,cE,hE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,_){return l==Array.prototype||l==Object.prototype||(l[p]=_.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ql=="object"&&ql];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(l,p){if(p)e:{var _=r;l=l.split(".");for(var k=0;k<l.length-1;k++){var F=l[k];if(!(F in _))break e;_=_[F]}l=l[l.length-1],k=_[l],p=p(k),p!=k&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}function s(l,p){l instanceof String&&(l+="");var _=0,k=!1,F={next:function(){if(!k&&_<l.length){var $=_++;return{value:p($,l[$]),done:!1}}return k=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function c(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function h(l,p,_){return l.call.apply(l.bind,arguments)}function d(l,p,_){if(!l)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,k),l.apply(p,F)}}return function(){return l.apply(p,arguments)}}function f(l,p,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var k=_.slice();return k.push.apply(k,arguments),l.apply(this,k)}}function v(l,p){function _(){}_.prototype=p.prototype,l.aa=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(k,F,$){for(var Z=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)Z[Se-2]=arguments[Se];return p.prototype[F].apply(k,Z)}}function C(l){const p=l.length;if(0<p){const _=Array(p);for(let k=0;k<p;k++)_[k]=l[k];return _}return[]}function x(l,p){for(let _=1;_<arguments.length;_++){const k=arguments[_];if(u(k)){const F=l.length||0,$=k.length||0;l.length=F+$;for(let Z=0;Z<$;Z++)l[F+Z]=k[Z]}else l.push(k)}}class w{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function A(l){return/^[\s\xa0]*$/.test(l)}function R(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function O(l){return O[" "](l),l}O[" "]=function(){};var M=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function b(l,p,_){for(const k in l)p.call(_,l[k],k,l)}function S(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function m(l){const p={};for(const _ in l)p[_]=l[_];return p}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,p){let _,k;for(let F=1;F<arguments.length;F++){k=arguments[F];for(_ in k)l[_]=k[_];for(let $=0;$<y.length;$++)_=y[$],Object.prototype.hasOwnProperty.call(k,_)&&(l[_]=k[_])}}function I(l){var p=1;l=l.split(":");const _=[];for(;0<p&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function P(l){a.setTimeout(()=>{throw l},0)}function T(){var l=V;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class L{constructor(){this.h=this.g=null}add(p,_){const k=z.get();k.set(p,_),this.h?this.h.next=k:this.g=k,this.h=k}}var z=new w(()=>new D,l=>l.reset());class D{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let N,U=!1,V=new L,j=()=>{const l=a.Promise.resolve(void 0);N=()=>{l.then(J)}};var J=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(_){P(_)}var p=z;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}U=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};a.addEventListener("test",_,p),a.removeEventListener("test",_,p)}catch{}return l}();function W(l,p){if(X.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,k=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(M){e:{try{O(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement);this.relatedTarget=p,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:re[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&W.aa.h.call(this)}}v(W,X);var re={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),ve=0;function me(l,p,_,k,F){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!k,this.ha=F,this.key=++ve,this.da=this.fa=!1}function _e(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Re(l){this.src=l,this.g={},this.h=0}Re.prototype.add=function(l,p,_,k,F){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var Z=Sn(l,p,k,F);return-1<Z?(p=l[Z],_||(p.fa=!1)):(p=new me(p,this.src,$,!!k,F),p.fa=_,l.push(p)),p};function Fe(l,p){var _=p.type;if(_ in l.g){var k=l.g[_],F=Array.prototype.indexOf.call(k,p,void 0),$;($=0<=F)&&Array.prototype.splice.call(k,F,1),$&&(_e(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Sn(l,p,_,k){for(var F=0;F<l.length;++F){var $=l[F];if(!$.da&&$.listener==p&&$.capture==!!_&&$.ha==k)return F}return-1}var Wt="closure_lm_"+(1e6*Math.random()|0),Ce={};function it(l,p,_,k,F){if(Array.isArray(p)){for(var $=0;$<p.length;$++)it(l,p[$],_,k,F);return null}return _=It(_),l&&l[de]?l.K(p,_,c(k)?!!k.capture:!!k,F):Pe(l,p,_,!1,k,F)}function Pe(l,p,_,k,F,$){if(!p)throw Error("Invalid event type");var Z=c(F)?!!F.capture:!!F,Se=Ve(l);if(Se||(l[Wt]=Se=new Re(l)),_=Se.add(p,_,k,Z,$),_.proxy)return _;if(k=Ie(),_.proxy=k,k.src=l,k.listener=_,l.addEventListener)Q||(F=Z),F===void 0&&(F=!1),l.addEventListener(p.toString(),k,F);else if(l.attachEvent)l.attachEvent(je(p.toString()),k);else if(l.addListener&&l.removeListener)l.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ie(){function l(_){return p.call(l.src,l.listener,_)}const p=Vt;return l}function Ze(l,p,_,k,F){if(Array.isArray(p))for(var $=0;$<p.length;$++)Ze(l,p[$],_,k,F);else k=c(k)?!!k.capture:!!k,_=It(_),l&&l[de]?(l=l.i,p=String(p).toString(),p in l.g&&($=l.g[p],_=Sn($,_,k,F),-1<_&&(_e($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete l.g[p],l.h--)))):l&&(l=Ve(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Sn(p,_,k,F)),(_=-1<l?p[l]:null)&&st(_))}function st(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[de])Fe(p.i,l);else{var _=l.type,k=l.proxy;p.removeEventListener?p.removeEventListener(_,k,l.capture):p.detachEvent?p.detachEvent(je(_),k):p.addListener&&p.removeListener&&p.removeListener(k),(_=Ve(p))?(Fe(_,l),_.h==0&&(_.src=null,p[Wt]=null)):_e(l)}}}function je(l){return l in Ce?Ce[l]:Ce[l]="on"+l}function Vt(l,p){if(l.da)l=!0;else{p=new W(p,this);var _=l.listener,k=l.ha||l.src;l.fa&&st(l),l=_.call(k,p)}return l}function Ve(l){return l=l[Wt],l instanceof Re?l:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(l){return typeof l=="function"?l:(l[we]||(l[we]=function(p){return l.handleEvent(p)}),l[we])}function xe(){q.call(this),this.i=new Re(this),this.M=this,this.F=null}v(xe,q),xe.prototype[de]=!0,xe.prototype.removeEventListener=function(l,p,_,k){Ze(this,l,p,_,k)};function et(l,p){var _,k=l.F;if(k)for(_=[];k;k=k.F)_.push(k);if(l=l.M,k=p.type||p,typeof p=="string")p=new X(p,l);else if(p instanceof X)p.target=p.target||l;else{var F=p;p=new X(k,l),E(p,F)}if(F=!0,_)for(var $=_.length-1;0<=$;$--){var Z=p.g=_[$];F=Qe(Z,k,!0,p)&&F}if(Z=p.g=l,F=Qe(Z,k,!0,p)&&F,F=Qe(Z,k,!1,p)&&F,_)for($=0;$<_.length;$++)Z=p.g=_[$],F=Qe(Z,k,!1,p)&&F}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var _=l.g[p],k=0;k<_.length;k++)_e(_[k]);delete l.g[p],l.h--}}this.F=null},xe.prototype.K=function(l,p,_,k){return this.i.add(String(l),p,!1,_,k)},xe.prototype.L=function(l,p,_,k){return this.i.add(String(l),p,!0,_,k)};function Qe(l,p,_,k){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,$=0;$<p.length;++$){var Z=p[$];if(Z&&!Z.da&&Z.capture==_){var Se=Z.listener,ft=Z.ha||Z.src;Z.fa&&Fe(l.i,Z),F=Se.call(ft,k)!==!1&&F}}return F&&!k.defaultPrevented}function Un(l,p,_){if(typeof l=="function")_&&(l=f(l,_));else if(l&&typeof l.handleEvent=="function")l=f(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function lt(l){l.g=Un(()=>{l.g=null,l.i&&(l.i=!1,lt(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class tn extends q{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ut(l){q.call(this),this.h=l,this.g={}}v(ut,q);var pn=[];function nn(l){b(l.g,function(p,_){this.g.hasOwnProperty(_)&&st(p)},l),l.g={}}ut.prototype.N=function(){ut.aa.N.call(this),nn(this)},ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=a.JSON.stringify,vo=a.JSON.parse,sh=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ti(){}Ti.prototype.h=null;function wo(l){return l.h||(l.h=l.i())}function kr(){}var Ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mn(){X.call(this,"d")}v(mn,X);function gn(){X.call(this,"c")}v(gn,X);var Ht={},xr=null;function Si(){return xr=xr||new xe}Ht.La="serverreachability";function Fn(l){X.call(this,Ht.La,l)}v(Fn,X);function rn(l){const p=Si();et(p,new Fn(p))}Ht.STAT_EVENT="statevent";function bm(l,p){X.call(this,Ht.STAT_EVENT,l),this.stat=p}v(bm,X);function Ut(l){const p=Si();et(p,new bm(p,l))}Ht.Ma="timingevent";function Om(l,p){X.call(this,Ht.Ma,l),this.size=p}v(Om,X);function Eo(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function To(){this.g=!0}To.prototype.xa=function(){this.g=!1};function nI(l,p,_,k,F,$){l.info(function(){if(l.g)if($)for(var Z="",Se=$.split("&"),ft=0;ft<Se.length;ft++){var ge=Se[ft].split("=");if(1<ge.length){var St=ge[0];ge=ge[1];var At=St.split("_");Z=2<=At.length&&At[1]=="type"?Z+(St+"="+ge+"&"):Z+(St+"=redacted&")}}else Z=null;else Z=$;return"XMLHTTP REQ ("+k+") [attempt "+F+"]: "+p+`
`+_+`
`+Z})}function rI(l,p,_,k,F,$,Z){l.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+F+"]: "+p+`
`+_+`
`+$+" "+Z})}function as(l,p,_,k){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+sI(l,_)+(k?" "+k:"")})}function iI(l,p){l.info(function(){return"TIMEOUT: "+p})}To.prototype.info=function(){};function sI(l,p){if(!l.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var k=_[l];if(!(2>k.length)){var F=k[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var Z=1;Z<F.length;Z++)F[Z]=""}}}}return An(_)}catch{return p}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oh;function pl(){}v(pl,Ti),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},oh=new pl;function Nr(l,p,_,k){this.j=l,this.i=p,this.l=_,this.R=k||1,this.U=new ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mm}function Mm(){this.i=null,this.g="",this.h=!1}var Lm={},ah={};function lh(l,p,_){l.L=1,l.v=_l(ir(p)),l.m=_,l.P=!0,Vm(l,null)}function Vm(l,p){l.F=Date.now(),ml(l),l.A=ir(l.v);var _=l.A,k=l.R;Array.isArray(k)||(k=[String(k)]),Xm(_.i,"t",k),l.C=0,_=l.j.J,l.h=new Mm,l.g=mg(l.j,_?p:null,!l.m),0<l.O&&(l.M=new tn(f(l.Y,l,l.g),l.O)),p=l.U,_=l.g,k=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(pn[0]=F.toString()),F=pn);for(var $=0;$<F.length;$++){var Z=it(_,F[$],k||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=l.H?m(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),rn(),nI(l.i,l.u,l.A,l.l,l.R,l.m)}Nr.prototype.ca=function(l){l=l.target;const p=this.M;p&&sr(l)==3?p.j():this.Y(l)},Nr.prototype.Y=function(l){try{if(l==this.g)e:{const At=sr(this.g);var p=this.g.Ba();const cs=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||ig(this.g)))){this.J||At!=4||p==7||(p==8||0>=cs?rn(3):rn(2)),uh(this);var _=this.g.Z();this.X=_;t:if(Um(this)){var k=ig(this.g);l="";var F=k.length,$=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),Io(this);var Z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,l+=this.h.i.decode(k[p],{stream:!($&&p==F-1)});k.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,rI(this.i,this.u,this.A,this.l,this.R,At,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ft=this.g;if((Se=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Se)){var ge=Se;break t}}ge=null}if(_=ge)as(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ch(this,_);else{this.o=!1,this.s=3,Ut(12),Ai(this),Io(this);break e}}if(this.P){_=!0;let Rn;for(;!this.J&&this.C<Z.length;)if(Rn=oI(this,Z),Rn==ah){At==4&&(this.s=4,Ut(14),_=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Lm){this.s=4,Ut(15),as(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else as(this.i,this.l,Rn,null),ch(this,Rn);if(Um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||Z.length!=0||this.h.h||(this.s=1,Ut(16),_=!1),this.o=this.o&&_,!_)as(this.i,this.l,Z,"[Invalid Chunked Response]"),Ai(this),Io(this);else if(0<Z.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),gh(St),St.M=!0,Ut(11))}}else as(this.i,this.l,Z,null),ch(this,Z);At==4&&Ai(this),this.o&&!this.J&&(At==4?hg(this.j,this):(this.o=!1,ml(this)))}else II(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Ai(this),Io(this)}}}catch{}finally{}};function Um(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function oI(l,p){var _=l.C,k=p.indexOf(`
`,_);return k==-1?ah:(_=Number(p.substring(_,k)),isNaN(_)?Lm:(k+=1,k+_>p.length?ah:(p=p.slice(k,k+_),l.C=k+_,p)))}Nr.prototype.cancel=function(){this.J=!0,Ai(this)};function ml(l){l.S=Date.now()+l.I,Fm(l,l.I)}function Fm(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Eo(f(l.ba,l),p)}function uh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(iI(this.i,this.A),this.L!=2&&(rn(),Ut(17)),Ai(this),this.s=2,Io(this)):Fm(this,this.S-l)};function Io(l){l.j.G==0||l.J||hg(l.j,l)}function Ai(l){uh(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,nn(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function ch(l,p){try{var _=l.j;if(_.G!=0&&(_.g==l||hh(_.h,l))){if(!l.K&&hh(_.h,l)&&_.G==3){try{var k=_.Da.g.parse(p)}catch{k=null}if(Array.isArray(k)&&k.length==3){var F=k;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Il(_),El(_);else break e;mh(_),Ut(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Eo(f(_.Za,_),6e3));if(1>=zm(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ci(_,11)}else if((l.K||_.g==l)&&Il(_),!A(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let ge=F[p];if(_.T=ge[0],ge=ge[1],_.G==2)if(ge[0]=="c"){_.K=ge[1],_.ia=ge[2];const St=ge[3];St!=null&&(_.la=St,_.j.info("VER="+_.la));const At=ge[4];At!=null&&(_.Aa=At,_.j.info("SVER="+_.Aa));const cs=ge[5];cs!=null&&typeof cs=="number"&&0<cs&&(k=1.5*cs,_.L=k,_.j.info("backChannelRequestTimeoutMs_="+k)),k=_;const Rn=l.g;if(Rn){const Al=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var $=k.h;$.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(dh($,$.h),$.h=null))}if(k.D){const yh=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(k.ya=yh,Ne(k.I,k.D,yh))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),k=_;var Z=l;if(k.qa=pg(k,k.J?k.ia:null,k.W),Z.K){$m(k.h,Z);var Se=Z,ft=k.L;ft&&(Se.I=ft),Se.B&&(uh(Se),ml(Se)),k.g=Z}else ug(k);0<_.i.length&&Tl(_)}else ge[0]!="stop"&&ge[0]!="close"||Ci(_,7);else _.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Ci(_,7):ph(_):ge[0]!="noop"&&_.l&&_.l.ta(ge),_.v=0)}}rn(4)}catch{}}var aI=class{constructor(l,p){this.g=l,this.map=p}};function jm(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function zm(l){return l.h?1:l.g?l.g.size:0}function hh(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function dh(l,p){l.g?l.g.add(p):l.h=p}function $m(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}jm.prototype.cancel=function(){if(this.i=Wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Wm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.D);return p}return C(l.i)}function lI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],_=l.length,k=0;k<_;k++)p.push(l[k]);return p}p=[],_=0;for(k in l)p[_++]=l[k];return p}function uI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var _=0;_<l;_++)p.push(_);return p}p=[],_=0;for(const k in l)p[_++]=k;return p}}}function Hm(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var _=uI(l),k=lI(l),F=k.length,$=0;$<F;$++)p.call(void 0,k[$],_&&_[$],l)}var qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cI(l,p){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var k=l[_].indexOf("="),F=null;if(0<=k){var $=l[_].substring(0,k);F=l[_].substring(k+1)}else $=l[_];p($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ri(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ri){this.h=l.h,gl(this,l.j),this.o=l.o,this.g=l.g,yl(this,l.s),this.l=l.l;var p=l.i,_=new Ro;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Gm(this,_),this.m=l.m}else l&&(p=String(l).match(qm))?(this.h=!1,gl(this,p[1]||"",!0),this.o=So(p[2]||""),this.g=So(p[3]||"",!0),yl(this,p[4]),this.l=So(p[5]||"",!0),Gm(this,p[6]||"",!0),this.m=So(p[7]||"")):(this.h=!1,this.i=new Ro(null,this.h))}Ri.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Ao(p,Km,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Ao(p,Km,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Ao(_,_.charAt(0)=="/"?fI:dI,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Ao(_,mI)),l.join("")};function ir(l){return new Ri(l)}function gl(l,p,_){l.j=_?So(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function yl(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Gm(l,p,_){p instanceof Ro?(l.i=p,gI(l.i,l.h)):(_||(p=Ao(p,pI)),l.i=new Ro(p,l.h))}function Ne(l,p,_){l.i.set(p,_)}function _l(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function So(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ao(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,hI),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function hI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Km=/[#\/\?@]/g,dI=/[#\?:]/g,fI=/[#\?]/g,pI=/[#\?@]/g,mI=/#/g;function Ro(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function br(l){l.g||(l.g=new Map,l.h=0,l.i&&cI(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=Ro.prototype,t.add=function(l,p){br(this),this.i=null,l=ls(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function Qm(l,p){br(l),p=ls(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Ym(l,p){return br(l),p=ls(l,p),l.g.has(p)}t.forEach=function(l,p){br(this),this.g.forEach(function(_,k){_.forEach(function(F){l.call(p,F,k,this)},this)},this)},t.na=function(){br(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let k=0;k<p.length;k++){const F=l[k];for(let $=0;$<F.length;$++)_.push(p[k])}return _},t.V=function(l){br(this);let p=[];if(typeof l=="string")Ym(this,l)&&(p=p.concat(this.g.get(ls(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)p=p.concat(l[_])}return p},t.set=function(l,p){return br(this),this.i=null,l=ls(this,l),Ym(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Xm(l,p,_){Qm(l,p),0<_.length&&(l.i=null,l.g.set(ls(l,p),C(_)),l.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var k=p[_];const $=encodeURIComponent(String(k)),Z=this.V(k);for(k=0;k<Z.length;k++){var F=$;Z[k]!==""&&(F+="="+encodeURIComponent(String(Z[k]))),l.push(F)}}return this.i=l.join("&")};function ls(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function gI(l,p){p&&!l.j&&(br(l),l.i=null,l.g.forEach(function(_,k){var F=k.toLowerCase();k!=F&&(Qm(this,k),Xm(this,F,_))},l)),l.j=p}function yI(l,p){const _=new To;if(a.Image){const k=new Image;k.onload=g(Or,_,"TestLoadImage: loaded",!0,p,k),k.onerror=g(Or,_,"TestLoadImage: error",!1,p,k),k.onabort=g(Or,_,"TestLoadImage: abort",!1,p,k),k.ontimeout=g(Or,_,"TestLoadImage: timeout",!1,p,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=l}else p(!1)}function _I(l,p){const _=new To,k=new AbortController,F=setTimeout(()=>{k.abort(),Or(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:k.signal}).then($=>{clearTimeout(F),$.ok?Or(_,"TestPingServer: ok",!0,p):Or(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Or(_,"TestPingServer: error",!1,p)})}function Or(l,p,_,k,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),k(_)}catch{}}function vI(){this.g=new sh}function wI(l,p,_){const k=_||"";try{Hm(l,function(F,$){let Z=F;c(F)&&(Z=An(F)),p.push(k+$+"="+encodeURIComponent(Z))})}catch(F){throw p.push(k+"type="+encodeURIComponent("_badmap")),F}}function Co(l){this.l=l.Ub||null,this.j=l.eb||!1}v(Co,Ti),Co.prototype.g=function(){return new vl(this.l,this.j)},Co.prototype.i=function(l){return function(){return l}}({});function vl(l,p){xe.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(vl,xe),t=vl.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,ko(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Po(this):ko(this),this.readyState==3&&Jm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Po(this))},t.Qa=function(l){this.g&&(this.response=l,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ko(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function ko(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zm(l){let p="";return b(l,function(_,k){p+=k,p+=":",p+=_,p+=`\r
`}),p}function fh(l,p,_){e:{for(k in _){var k=!1;break e}k=!0}k||(_=Zm(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Ne(l,p,_))}function qe(l){xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(qe,xe);var EI=/^https?$/i,TI=["POST","PUT"];t=qe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,_,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oh.g(),this.v=this.o?wo(this.o):wo(oh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch($){eg(this,$);return}if(l=_||"",_=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var F in k)_.set(F,k[F]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const $ of k.keys())_.set($,k.get($));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TI,p,void 0))||k||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Z]of _)this.g.setRequestHeader($,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rg(this),this.u=!0,this.g.send(l),this.u=!1}catch($){eg(this,$)}};function eg(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,tg(l),wl(l)}function tg(l){l.A||(l.A=!0,et(l,"complete"),et(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,et(this,"complete"),et(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ng(this):this.bb())},t.bb=function(){ng(this)};function ng(l){if(l.h&&typeof o<"u"&&(!l.v[1]||sr(l)!=4||l.Z()!=2)){if(l.u&&sr(l)==4)Un(l.Ea,0,l);else if(et(l,"readystatechange"),sr(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var k;if(k=Z===0){var F=String(l.D).match(qm)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),k=!EI.test(F?F.toLowerCase():"")}_=k}if(_)et(l,"complete"),et(l,"success");else{l.m=6;try{var $=2<sr(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",tg(l)}}finally{wl(l)}}}}function wl(l,p){if(l.g){rg(l);const _=l.g,k=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||et(l,"ready");try{_.onreadystatechange=k}catch{}}}function rg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function sr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),vo(p)}};function ig(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function II(l){const p={};l=(l.g&&2<=sr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<l.length;k++){if(A(l[k]))continue;var _=I(l[k]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=p[F]||[];p[F]=$,$.push(_)}S(p,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function sg(l){this.Aa=0,this.i=[],this.j=new To,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xo("baseRetryDelayMs",5e3,l),this.cb=xo("retryDelaySeedMs",1e4,l),this.Wa=xo("forwardChannelMaxRetries",2,l),this.wa=xo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new jm(l&&l.concurrentRequestLimit),this.Da=new vI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sg.prototype,t.la=8,t.G=1,t.connect=function(l,p,_,k){Ut(0),this.W=l,this.H=p||{},_&&k!==void 0&&(this.H.OSID=_,this.H.OAID=k),this.F=this.X,this.I=pg(this,null,this.W),Tl(this)};function ph(l){if(og(l),l.G==3){var p=l.U++,_=ir(l.I);if(Ne(_,"SID",l.K),Ne(_,"RID",p),Ne(_,"TYPE","terminate"),No(l,_),p=new Nr(l,l.j,p),p.L=2,p.v=_l(ir(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=p.v,_=!0),_||(p.g=mg(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ml(p)}fg(l)}function El(l){l.g&&(gh(l),l.g.cancel(),l.g=null)}function og(l){El(l),l.u&&(a.clearTimeout(l.u),l.u=null),Il(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Tl(l){if(!Bm(l.h)&&!l.s){l.s=!0;var p=l.Ga;N||j(),U||(N(),U=!0),V.add(p,l),l.B=0}}function SI(l,p){return zm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Eo(f(l.Ga,l,p),dg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new Nr(this,this.j,l);let $=this.o;if(this.S&&($?($=m($),E($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var k=this.i[_];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(p+=k,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=lg(this,F,p),_=ir(this.I),Ne(_,"RID",l),Ne(_,"CVER",22),this.D&&Ne(_,"X-HTTP-Session-Id",this.D),No(this,_),$&&(this.O?p="headers="+encodeURIComponent(String(Zm($)))+"&"+p:this.m&&fh(_,this.m,$)),dh(this.h,F),this.Ua&&Ne(_,"TYPE","init"),this.P?(Ne(_,"$req",p),Ne(_,"SID","null"),F.T=!0,lh(F,_,null)):lh(F,_,p),this.G=2}}else this.G==3&&(l?ag(this,l):this.i.length==0||Bm(this.h)||ag(this))};function ag(l,p){var _;p?_=p.l:_=l.U++;const k=ir(l.I);Ne(k,"SID",l.K),Ne(k,"RID",_),Ne(k,"AID",l.T),No(l,k),l.m&&l.o&&fh(k,l.m,l.o),_=new Nr(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),p&&(l.i=p.D.concat(l.i)),p=lg(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),dh(l.h,_),lh(_,k,p)}function No(l,p){l.H&&b(l.H,function(_,k){Ne(p,k,_)}),l.l&&Hm({},function(_,k){Ne(p,k,_)})}function lg(l,p,_){_=Math.min(l.i.length,_);var k=l.l?f(l.l.Na,l.l,l):null;e:{var F=l.i;let $=-1;for(;;){const Z=["count="+_];$==-1?0<_?($=F[0].g,Z.push("ofs="+$)):$=0:Z.push("ofs="+$);let Se=!0;for(let ft=0;ft<_;ft++){let ge=F[ft].g;const St=F[ft].map;if(ge-=$,0>ge)$=Math.max(0,F[ft].g-100),Se=!1;else try{wI(St,Z,"req"+ge+"_")}catch{k&&k(St)}}if(Se){k=Z.join("&");break e}}}return l=l.i.splice(0,_),p.D=l,k}function ug(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;N||j(),U||(N(),U=!0),V.add(p,l),l.v=0}}function mh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Eo(f(l.Fa,l),dg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Eo(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),El(this),cg(this))};function gh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function cg(l){l.g=new Nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=ir(l.qa);Ne(p,"RID","rpc"),Ne(p,"SID",l.K),Ne(p,"AID",l.T),Ne(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(p,"TO",l.ja),Ne(p,"TYPE","xmlhttp"),No(l,p),l.m&&l.o&&fh(p,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=_l(ir(p)),_.m=null,_.P=!0,Vm(_,l)}t.Za=function(){this.C!=null&&(this.C=null,El(this),mh(this),Ut(19))};function Il(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function hg(l,p){var _=null;if(l.g==p){Il(l),gh(l),l.g=null;var k=2}else if(hh(l.h,p))_=p.D,$m(l.h,p),k=1;else return;if(l.G!=0){if(p.o)if(k==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=l.B;k=Si(),et(k,new Om(k,_)),Tl(l)}else ug(l);else if(F=p.s,F==3||F==0&&0<p.X||!(k==1&&SI(l,p)||k==2&&mh(l)))switch(_&&0<_.length&&(p=l.h,p.i=p.i.concat(_)),F){case 1:Ci(l,5);break;case 4:Ci(l,10);break;case 3:Ci(l,6);break;default:Ci(l,2)}}}function dg(l,p){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*p}function Ci(l,p){if(l.j.info("Error code "+p),p==2){var _=f(l.fb,l),k=l.Xa;const F=!k;k=new Ri(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gl(k,"https"),_l(k),F?yI(k.toString(),_):_I(k.toString(),_)}else Ut(2);l.G=0,l.l&&l.l.sa(p),fg(l),og(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function fg(l){if(l.G=0,l.ka=[],l.l){const p=Wm(l.h);(p.length!=0||l.i.length!=0)&&(x(l.ka,p),x(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function pg(l,p,_){var k=_ instanceof Ri?ir(_):new Ri(_);if(k.g!="")p&&(k.g=p+"."+k.g),yl(k,k.s);else{var F=a.location;k=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var $=new Ri(null);k&&gl($,k),p&&($.g=p),F&&yl($,F),_&&($.l=_),k=$}return _=l.D,p=l.ya,_&&p&&Ne(k,_,p),Ne(k,"VER",l.la),No(l,k),k}function mg(l,p,_){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new qe(new Co({eb:_})):new qe(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gg(){}t=gg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(l,p){return new sn(l,p)};function sn(l,p){xe.call(this),this.g=new sg(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!A(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new us(this)}v(sn,xe),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){ph(this.g)},sn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=An(l),l=_);p.i.push(new aI(p.Ya++,l)),p.G==3&&Tl(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,sn.aa.N.call(this)};function yg(l){mn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}v(yg,mn);function _g(){gn.call(this),this.status=1}v(_g,gn);function us(l){this.g=l}v(us,gg),us.prototype.ua=function(){et(this.g,"a")},us.prototype.ta=function(l){et(this.g,new yg(l))},us.prototype.sa=function(l){et(this.g,new _g)},us.prototype.ra=function(){et(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,hE=function(){return new Sl},cE=function(){return Si()},uE=Ht,gf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,fu=fl,Dm.COMPLETE="complete",lE=Dm,kr.EventType=Ii,Ii.OPEN="a",Ii.CLOSE="b",Ii.ERROR="c",Ii.MESSAGE="d",xe.prototype.listen=xe.prototype.K,Yo=kr,aE=Co,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,oE=qe}).apply(typeof ql<"u"?ql:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new kp("@firebase/firestore");function Bo(){return Yi.logLevel}function ne(t,...e){if(Yi.logLevel<=he.DEBUG){const n=e.map(qp);Yi.debug(`Firestore (${po}): ${t}`,...n)}}function Sr(t,...e){if(Yi.logLevel<=he.ERROR){const n=e.map(qp);Yi.error(`Firestore (${po}): ${t}`,...n)}}function Js(t,...e){if(Yi.logLevel<=he.WARN){const n=e.map(qp);Yi.warn(`Firestore (${po}): ${t}`,...n)}}function qp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: `+t;throw Sr(e),new Error(e)}function Ae(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class uN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cN{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new dE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new xt(e)}}class hN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new fN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ke(0,0))}static max(){return new ae(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Va.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Va?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Va{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const gN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Va{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return gN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new te(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Oe.fromString(e))}static fromName(e){return new ie(Oe.fromString(e).popFirst(5))}static empty(){return new ie(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Oe(e.slice()))}}function yN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new di(i,ie.empty(),e)}function _N(t){return new di(t.readTime,t.key,-1)}class di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new di(ae.min(),ie.empty(),-1)}static max(){return new di(ae.max(),ie.empty(),-1)}}function vN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==wN)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new K((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function TN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gp.oe=-1;function jc(t){return t==null}function Zu(t){return t===0&&1/t==-1/0}function IN(t){return typeof t=="number"&&Number.isInteger(t)&&!Zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}}class Gl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??gt.RED,this.left=i??gt.EMPTY,this.right=s??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new un([])}unionWith(e){let n=new wt(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mE("Invalid base64 string: "+s):s}}(e);return new Tt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const SN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=SN.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xi(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qp(t){const e=t.mapValue.fields.__previous_value__;return Kp(e)?Qp(e):e}function Ua(t){const e=fi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kp(t)?4:CN(t)?9007199254740991:RN(t)?10:11:oe()}function tr(t,e){if(t===e)return!0;const n=Ji(t);if(n!==Ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fi(i.timestampValue),a=fi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xi(i.bytesValue).isEqual(Xi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Zu(o)===Zu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(v_(o)!==v_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!tr(o[u],a[u])))return!1;return!0}(t,e);default:return oe()}}function ja(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function eo(t,e){if(t===e)return 0;const n=Ji(t),r=Ji(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),u=Ye(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return E_(t.timestampValue,e.timestampValue);case 4:return E_(Ua(t),Ua(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xi(s),u=Xi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ye(a[c],u[c]);if(h!==0)return h}return ye(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ye(Ye(s.latitude),Ye(o.latitude));return a!==0?a:ye(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return T_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(u=f.value)===null||u===void 0?void 0:u.arrayValue,C=ye(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:T_(g,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Kl.mapValue&&o===Kl.mapValue)return 0;if(s===Kl.mapValue)return 1;if(o===Kl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const f=ye(u[d],h[d]);if(f!==0)return f;const g=eo(a[u[d]],c[h[d]]);if(g!==0)return g}return ye(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function E_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=fi(t),r=fi(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function T_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=eo(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function to(t){return yf(t)}function yf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=yf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${yf(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function I_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _f(t){return!!t&&"integerValue"in t}function Yp(t){return!!t&&"arrayValue"in t}function S_(t){return!!t&&"nullValue"in t}function A_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pu(t){return!!t&&"mapValue"in t}function RN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ha(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){is(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(ha(this.value))}}function gE(t){const e=[];return is(t.fields,(n,r)=>{const i=new _t([n]);if(pu(r)){const s=gE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,ae.min(),ae.min(),ae.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new bt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new bt(e,2,n,ae.min(),ae.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,ae.min(),ae.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.position=e,this.inclusive=n}}function R_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=eo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function C_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n="asc"){this.field=e,this.dir=n}}function PN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{}class rt extends yE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xN(e,n,r):n==="array-contains"?new ON(e,r):n==="in"?new DN(e,r):n==="not-in"?new MN(e,r):n==="array-contains-any"?new LN(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NN(e,r):new bN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(eo(n,this.value)):n!==null&&Ji(this.value)===Ji(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends yE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ln(e,n)}matches(e){return _E(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _E(t){return t.op==="and"}function vE(t){return kN(t)&&_E(t)}function kN(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function vf(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+to(t.value);if(vE(t))return t.filters.map(e=>vf(e)).join(",");{const e=t.filters.map(n=>vf(n)).join(",");return`${t.op}(${e})`}}function wE(t,e){return t instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)}(t,e):t instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wE(o,i.filters[a]),!0):!1}(t,e):void oe()}function EE(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(EE).join(" ,")+"}"}(t):"Filter"}class xN extends rt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class NN extends rt{constructor(e,n){super(e,"in",n),this.keys=TE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bN extends rt{constructor(e,n){super(e,"not-in",n),this.keys=TE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class ON extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&ja(n.arrayValue,this.value)}}class DN extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ja(this.value.arrayValue,n)}}class MN extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ja(this.value.arrayValue,n)}}class LN extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ja(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function P_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new VN(t,e,n,r,i,s,o)}function Xp(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>to(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>to(r)).join(",")),e.ue=n}return e.ue}function Jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!C_(t.startAt,e.startAt)&&C_(t.endAt,e.endAt)}function wf(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UN(t,e,n,r,i,s,o,a){return new al(t,e,n,r,i,s,o,a)}function Bc(t){return new al(t)}function k_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IE(t){return t.collectionGroup!==null}function da(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wt(_t.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new tc(s,r))}),n.has(_t.keyField().canonicalString())||e.ce.push(new tc(_t.keyField(),r))}return e.ce}function Jn(t){const e=le(t);return e.le||(e.le=FN(e,da(t))),e.le}function FN(t,e){if(t.limitType==="F")return P_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new tc(i.field,s)});const n=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return P_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ef(t,e){const n=t.filters.concat([e]);return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tf(t,e,n){return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zc(t,e){return Jp(Jn(t),Jn(e))&&t.limitType===e.limitType}function SE(t){return`${Xp(Jn(t))}|lt:${t.limitType}`}function gs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EE(i)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>to(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>to(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function $c(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of da(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=R_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,da(r),i)||r.endAt&&!function(o,a,u){const c=R_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,da(r),i))}(t,e)}function jN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AE(t){return(e,n)=>{let r=!1;for(const i of da(t)){const s=BN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function BN(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?eo(u,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new We(ie.comparator);function Ar(){return zN}const RE=new We(ie.comparator);function Xo(...t){let e=RE;for(const n of t)e=e.insert(n.key,n);return e}function CE(t){let e=RE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mi(){return fa()}function PE(){return fa()}function fa(){return new mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const $N=new We(ie.comparator),WN=new wt(ie.comparator);function ce(...t){let e=WN;for(const n of t)e=e.add(n);return e}const HN=new wt(ye);function qN(){return HN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function kE(t){return{integerValue:""+t}}function GN(t,e){return IN(e)?kE(e):Zp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function KN(t,e,n){return t instanceof Ba?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Kp(s)&&(s=Qp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof no?NE(t,e):t instanceof za?bE(t,e):function(i,s){const o=xE(i,s),a=x_(o)+x_(i.Pe);return _f(o)&&_f(i.Pe)?kE(a):Zp(i.serializer,a)}(t,e)}function QN(t,e,n){return t instanceof no?NE(t,e):t instanceof za?bE(t,e):n}function xE(t,e){return t instanceof nc?function(r){return _f(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ba extends Wc{}class no extends Wc{constructor(e){super(),this.elements=e}}function NE(t,e){const n=OE(e);for(const r of t.elements)n.some(i=>tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class za extends Wc{constructor(e){super(),this.elements=e}}function bE(t,e){let n=OE(e);for(const r of t.elements)n=n.filter(i=>!tr(i,r));return{arrayValue:{values:n}}}class nc extends Wc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function x_(t){return Ye(t.integerValue||t.doubleValue)}function OE(t){return Yp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.field=e,this.transform=n}}function YN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof no&&i instanceof no||r instanceof za&&i instanceof za?Zs(r.elements,i.elements,tr):r instanceof nc&&i instanceof nc?tr(r.Pe,i.Pe):r instanceof Ba&&i instanceof Ba}(t.transform,e.transform)}class XN{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hc{}function ME(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VE(t.key,Zn.none()):new ll(t.key,t.data,Zn.none());{const n=t.data,r=Qt.empty();let i=new wt(_t.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wi(t.key,r,new un(i.toArray()),Zn.none())}}function JN(t,e,n){t instanceof ll?function(i,s,o){const a=i.value.clone(),u=b_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(i,s,o){if(!mu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=b_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(LE(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pa(t,e,n,r){return t instanceof ll?function(s,o,a,u){if(!mu(s.precondition,o))return a;const c=s.value.clone(),h=O_(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof wi?function(s,o,a,u){if(!mu(s.precondition,o))return a;const c=O_(s.fieldTransforms,u,o),h=o.data;return h.setAll(LE(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return mu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ZN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xE(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function N_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(s,o)=>YN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ll extends Hc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wi extends Hc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function b_(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QN(o,a,n[i]))}return r}function O_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KN(s,o,e))}return r}class VE extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e4 extends Hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&JN(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ME(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>N_(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>N_(n,r))}}class em{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=function(){return $N}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new em(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,fe;function i4(t){switch(t){default:return oe();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function UE(t){if(t===void 0)return Sr("GRPC error has no .code"),H.UNKNOWN;switch(t){case tt.OK:return H.OK;case tt.CANCELLED:return H.CANCELLED;case tt.UNKNOWN:return H.UNKNOWN;case tt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case tt.INTERNAL:return H.INTERNAL;case tt.UNAVAILABLE:return H.UNAVAILABLE;case tt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case tt.NOT_FOUND:return H.NOT_FOUND;case tt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case tt.ABORTED:return H.ABORTED;case tt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case tt.DATA_LOSS:return H.DATA_LOSS;default:return oe()}}(fe=tt||(tt={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new ji([4294967295,4294967295],0);function D_(t){const e=s4().encode(t),n=new sE;return n.update(e),new Uint8Array(n.digest())}function M_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ji([n,r],0),new ji([i,s],0)]}class tm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(r<0)throw new Jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ji.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ji.fromNumber(r)));return i.compare(o4)===1&&(i=new ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=D_(e),[r,i]=M_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=D_(e),[r,i]=M_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qc(ae.min(),i,new We(ye),Ar(),ce())}}class ul{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ul(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class FE{constructor(e,n){this.targetId=e,this.me=n}}class jE{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class L_{constructor(){this.fe=0,this.ge=U_(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new ul(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=U_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class a4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ar(),this.qe=V_(),this.Qe=new We(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(wf(s))if(r===0){const o=new ie(s.path);this.Ue(n,o,bt.newNoDocument(o,ae.min()))}else Ae(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Xi(r).toUint8Array()}catch(u){if(u instanceof mE)return Js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new tm(o,i,s)}catch(u){return Js(u instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&wf(a.target)){const u=new ie(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,bt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new qc(e,n,this.Qe,this.ke,r);return this.ke=Ar(),this.qe=V_(),this.Qe=new We(ye),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new L_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new L_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function V_(){return new We(ie.comparator)}function U_(){return new We(ie.comparator)}const l4={asc:"ASCENDING",desc:"DESCENDING"},u4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c4={and:"AND",or:"OR"};class h4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function If(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d4(t,e){return rc(t,e.toTimestamp())}function er(t){return Ae(!!t),ae.fromTimestamp(function(n){const r=fi(n);return new Ke(r.seconds,r.nanos)}(t))}function nm(t,e){return Sf(t,e).canonicalString()}function Sf(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zE(t){const e=Oe.fromString(t);return Ae(GE(e)),e}function Af(t,e){return nm(t.databaseId,e.path)}function nd(t,e){const n=zE(e);if(n.get(1)!==t.databaseId.projectId)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(WE(n))}function $E(t,e){return nm(t.databaseId,e)}function f4(t){const e=zE(t);return e.length===4?Oe.emptyPath():WE(e)}function Rf(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WE(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function F_(t,e,n){return{name:Af(t,e),fields:n.value.mapValue.fields}}function p4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ae(h===void 0||typeof h=="string"),Tt.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?H.UNKNOWN:UE(c.code);return new te(h,c.message||"")}(o);n=new jE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=nd(t,r.document.name),s=er(r.document.updateTime),o=r.document.createTime?er(r.document.createTime):ae.min(),a=new Qt({mapValue:{fields:r.document.fields}}),u=bt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new gu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=nd(t,r.document),s=r.readTime?er(r.readTime):ae.min(),o=bt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=nd(t,r.document),s=r.removedTargetIds||[];n=new gu([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new r4(i,s),a=r.targetId;n=new FE(a,o)}}return n}function m4(t,e){let n;if(e instanceof ll)n={update:F_(t,e.key,e.value)};else if(e instanceof VE)n={delete:Af(t,e.key)};else if(e instanceof wi)n={update:F_(t,e.key,e.data),updateMask:S4(e.fieldMask)};else{if(!(e instanceof e4))return oe();n={verify:Af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof no)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:d4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function g4(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?er(i.updateTime):er(s);return o.isEqual(ae.min())&&(o=er(s)),new XN(o,i.transformResults||[])}(n,e))):[]}function y4(t,e){return{documents:[$E(t,e.path)]}}function _4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$E(t,i);const s=function(c){if(c.length!==0)return qE(Ln.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:ys(f.field),direction:E4(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=If(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function v4(t){let e=f4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=HE(d);return f instanceof Ln&&vE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new tc(_s(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,jc(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,g=d.values||[];return new ec(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new ec(g,f)}(n.endAt)),UN(e,i,o,s,a,"F",u,c)}function w4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_s(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_s(n.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_s(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_s(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(_s(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>HE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function E4(t){return l4[t]}function T4(t){return u4[t]}function I4(t){return c4[t]}function ys(t){return{fieldPath:t.canonicalString()}}function _s(t){return _t.fromServerFormat(t.fieldPath)}function qE(t){return t instanceof rt?function(n){if(n.op==="=="){if(A_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(S_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(S_(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:T4(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(i=>qE(i));return r.length===1?r[0]:{compositeFilter:{op:I4(n.op),filters:r}}}(t):oe()}function S4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=Tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.ct=e}}function R4(t){const e=v4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.un=new P4}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(di.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class P4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new wt(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ro(0)}static kn(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.changes=new mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pa(r.mutation,i,un.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ar();const o=fa(),a=function(){return fa()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof wi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),pa(h.mutation,c,h.mutation.getFieldMask(),Ke.now())):o.set(c.key,un.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new x4(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fa();let i=new We((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||un.empty();h=a.applyToLocalView(c,h),r.set(u,h);const d=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=PE();h.forEach(f=>{if(!s.has(f)){const g=ME(n.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(Mi());let a=-1,u=s;return o.next(c=>K.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{u=u.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ce())).next(h=>({batchId:a,changes:CE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=Xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Xo();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,u=>{const c=function(d,f){return new al(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,bt.newInvalidDocument(h)))});let a=Xo();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&pa(h.mutation,c,un.empty(),Ke.now()),$c(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:er(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:R4(i.bundledQuery),readTime:er(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.overlays=new We(ie.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Mi();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Mi(),s=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Mi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Mi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return K.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new n4(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Tr=new wt(ct.Er),this.dr=new wt(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Oe([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Oe([])),r=new ct(n,e),i=new ct(n,e+1);let s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(ct.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new t4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(ye);return n.forEach(i=>{const s=new ct(i,0),o=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new ct(new ie(s),0);let a=new wt(ye);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),K.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ct(n,0),i=this.br.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.Mr=e,this.docs=function(){return new We(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ar();const o=n.path,a=new ie(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vN(_N(h),r)<=0||(i.has(h.key)||$c(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Or(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new V4(this)}getSize(e){return K.resolve(this.size)}}class V4 extends k4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.persistence=e,this.Nr=new mo(n=>Xp(n),Jp),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rm,this.targetCount=0,this.kr=ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gp(0),this.Kr=!1,this.Kr=!0,this.$r=new D4,this.referenceDelegate=e(this),this.Ur=new U4(this),this.indexManager=new C4,this.remoteDocumentCache=function(i){return new L4(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new A4(n),this.Gr=new b4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new O4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new M4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new j4(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class j4 extends EN{constructor(e){super(),this.currentSequenceNumber=e}}class im{constructor(e){this.persistence=e,this.Jr=new rm,this.Yr=null}static Zr(e){return new im(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mR()?8:TN(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new B4;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bo()<=he.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(Bo()<=he.DEBUG&&ne("QueryEngine","Query:",gs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bo()<=he.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):K.resolve())}Yi(e,n){if(k_(n))return K.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tf(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Tf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return k_(n)||i.isEqual(ae.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?K.resolve(null):(Bo()<=he.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gs(n)),this.rs(e,o,n,yN(i,-1)).next(a=>a))})}ts(e,n){let r=new wt(AE(e));return n.forEach((i,s)=>{$c(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bo()<=he.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",gs(n)),this.Ji.getDocumentsMatchingQuery(e,n,di.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new We(ye),this._s=new mo(s=>Xp(s),Jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function W4(t,e,n,r){return new $4(t,e,n,r)}async function KE(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function H4(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,f=d.keys();let g=K.resolve();return f.forEach(v=>{g=g.next(()=>h.getEntry(u,v)).next(C=>{const x=c.docVersions.get(v);Ae(x!==null),C.version.compareTo(x)<0&&(d.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),h.addEntry(C)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function QE(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function q4(t,e){const n=le(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Tt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(C,x,w){return C.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let u=Ar(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(G4(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function G4(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ar();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function K4(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q4(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Qr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=le(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ol(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function j_(t,e,n){const r=le(t);let i=ae.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=le(u),f=d._s.get(h);return f!==void 0?K.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ce())).next(a=>(Y4(r,jN(e),a),{documents:a,Ts:s})))}function Y4(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class B_{constructor(){this.activeTargetIds=qN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X4{constructor(){this.so=new B_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new B_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function rd(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class tb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=rd(),u=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Js("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Z4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=rd();return new Promise((o,a)=>{const u=new oE;u.setWithCredentials(!0),u.listenOnce(lE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fu.NO_ERROR:const h=u.getResponseJson();ne(Pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case fu.TIMEOUT:ne(Pt,`RPC '${e}' ${s} timed out`),a(new te(H.DEADLINE_EXCEEDED,"Request time out"));break;case fu.HTTP_ERROR:const d=u.getStatus();if(ne(Pt,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(w)>=0?w:H.UNKNOWN}(g.status);a(new te(v,g.message))}else a(new te(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new te(H.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ne(Pt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ne(Pt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=rd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hE(),a=cE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new aE({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ne(Pt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const d=o.createWebChannel(h,u);let f=!1,g=!1;const v=new eb({Io:x=>{g?ne(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(ne(Pt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ne(Pt,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},To:()=>d.close()}),C=(x,w,A)=>{x.listen(w,R=>{try{A(R)}catch(O){setTimeout(()=>{throw O},0)}})};return C(d,Yo.EventType.OPEN,()=>{g||(ne(Pt,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),C(d,Yo.EventType.CLOSE,()=>{g||(g=!0,ne(Pt,`RPC '${e}' stream ${i} transport closed`),v.So())}),C(d,Yo.EventType.ERROR,x=>{g||(g=!0,Js(Pt,`RPC '${e}' stream ${i} transport errored:`,x),v.So(new te(H.UNAVAILABLE,"The operation could not be completed")))}),C(d,Yo.EventType.MESSAGE,x=>{var w;if(!g){const A=x.data[0];Ae(!!A);const R=A,O=R.error||((w=R[0])===null||w===void 0?void 0:w.error);if(O){ne(Pt,`RPC '${e}' stream ${i} received error:`,O);const M=O.status;let b=function(y){const E=tt[y];if(E!==void 0)return UE(E)}(M),S=O.message;b===void 0&&(b=H.INTERNAL,S="Unknown error status: "+M+" with message "+O.message),g=!0,v.So(new te(b,S)),d.close()}else ne(Pt,`RPC '${e}' stream ${i} received:`,A),v.bo(A)}}),C(a,uE.STAT_EVENT,x=>{x.stat===gf.PROXY?ne(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===gf.NOPROXY&&ne(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){return new h4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new YE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new te(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nb extends XE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=p4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?er(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=wf(u)?{documents:y4(s,u)}:{query:_4(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BE(s,o.resumeToken);const c=If(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=rc(s,o.snapshotVersion.toTimestamp());const c=If(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=w4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rf(this.serializer),n.removeTarget=e,this.a_(n)}}class rb extends XE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=g4(e.writeResults,e.commitTime),r=er(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>m4(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Sf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(H.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Sf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(H.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sr(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ss(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=le(u);c.L_.add(4),await cl(c),c.q_.set("Unknown"),c.L_.delete(4),await Kc(c)}(this))})}),this.q_=new sb(r,i)}}async function Kc(t){if(ss(t))for(const e of t.B_)await e(!0)}async function cl(t){for(const e of t.B_)await e(!1)}function JE(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),um(n)?lm(n):go(n).r_()&&am(n,e))}function om(t,e){const n=le(t),r=go(n);n.N_.delete(e),r.r_()&&ZE(n,e),n.N_.size===0&&(r.r_()?r.o_():ss(n)&&n.q_.set("Unknown"))}function am(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).A_(e)}function ZE(t,e){t.Q_.xe(e),go(t).R_(e)}function lm(t){t.Q_=new a4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),go(t).start(),t.q_.v_()}function um(t){return ss(t)&&!go(t).n_()&&t.N_.size>0}function ss(t){return le(t).L_.size===0}function eT(t){t.Q_=void 0}async function ab(t){t.q_.set("Online")}async function lb(t){t.N_.forEach((e,n)=>{am(t,e)})}async function ub(t,e){eT(t),um(t)?(t.q_.M_(e),lm(t)):t.q_.set("Unknown")}async function cb(t,e,n){if(t.q_.set("Online"),e instanceof jE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ic(t,r)}else if(e instanceof gu?t.Q_.Ke(e):e instanceof FE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await QE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),ZE(s,u);const d=new Qr(h.target,u,c,h.sequenceNumber);am(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await ic(t,r)}}async function ic(t,e,n){if(!ol(e))throw e;t.L_.add(1),await cl(t),t.q_.set("Offline"),n||(n=()=>QE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Kc(t)})}function tT(t,e){return e().catch(n=>ic(t,n,e))}async function Qc(t){const e=le(t),n=pi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hb(e);)try{const i=await K4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,db(e,i)}catch(i){await ic(e,i)}nT(e)&&rT(e)}function hb(t){return ss(t)&&t.O_.length<10}function db(t,e){t.O_.push(e);const n=pi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function nT(t){return ss(t)&&!pi(t).n_()&&t.O_.length>0}function rT(t){pi(t).start()}async function fb(t){pi(t).p_()}async function pb(t){const e=pi(t);for(const n of t.O_)e.m_(n.mutations)}async function mb(t,e,n){const r=t.O_.shift(),i=em.from(r,e,n);await tT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qc(t)}async function gb(t,e){e&&pi(t).V_&&await async function(r,i){if(function(o){return i4(o)&&o!==H.ABORTED}(i.code)){const s=r.O_.shift();pi(r).s_(),await tT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qc(r)}}(t,e),nT(t)&&rT(t)}async function $_(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=ss(n);n.L_.add(3),await cl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Kc(n)}async function yb(t,e){const n=le(t);e?(n.L_.delete(2),await Kc(n)):e||(n.L_.add(2),await cl(n),n.q_.set("Unknown"))}function go(t){return t.K_||(t.K_=function(n,r,i){const s=le(n);return s.w_(),new nb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ab.bind(null,t),Ro:lb.bind(null,t),mo:ub.bind(null,t),d_:cb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),um(t)?lm(t):t.q_.set("Unknown")):(await t.K_.stop(),eT(t))})),t.K_}function pi(t){return t.U_||(t.U_=function(n,r,i){const s=le(n);return s.w_(),new rb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fb.bind(null,t),mo:gb.bind(null,t),f_:pb.bind(null,t),g_:mb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Qc(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new cm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(t,e){if(Sr("AsyncQueue",`${e}: ${t}`),ol(t))return new te(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new $s(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.W_=new We(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class io{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new io(e,n,$s.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vb{constructor(){this.queries=H_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=le(n),s=i.queries;i.queries=H_(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new te(H.ABORTED,"Firestore shutting down"))}}function H_(){return new mo(t=>SE(t),zc)}async function dm(t,e){const n=le(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _b,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=hm(o,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&pm(n)}async function fm(t,e){const n=le(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wb(t,e){const n=le(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&pm(n)}function Eb(t,e,n){const r=le(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function pm(t){t.Y_.forEach(e=>{e.next()})}var Pf,q_;(q_=Pf||(Pf={})).ea="default",q_.Cache="cache";class mm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.key=e}}class sT{constructor(e){this.key=e}}class Tb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=AE(e),this.Ra=new $s(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new W_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),g=$c(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;f&&g?f.data.isEqual(g.data)?v!==C&&(r.track({type:3,doc:g}),x=!0):this.ga(f,g)||(r.track({type:2,doc:g}),x=!0,(u&&this.Aa(g,u)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),x=!0):f&&!g&&(r.track({type:1,doc:f}),x=!0,(u||c)&&(a=!0)),x&&(g?(o=o.add(g),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,v){const C=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return C(g)-C(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new io(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new W_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new sT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new iT(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return io.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Ib{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sb{constructor(e){this.key=e,this.va=!1}}class Ab{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new mo(a=>SE(a),zc),this.Ma=new Map,this.xa=new Set,this.Oa=new We(ie.comparator),this.Na=new Map,this.La=new rm,this.Ba={},this.ka=new Map,this.qa=ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Rb(t,e,n=!0){const r=hT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await oT(r,e,n,!0),i}async function Cb(t,e){const n=hT(t);await oT(n,e,!0,!1)}async function oT(t,e,n,r){const i=await Q4(t.localStore,Jn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Pb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&JE(t.remoteStore,i),a}async function Pb(t,e,n,r,i){t.Ka=(d,f,g)=>async function(C,x,w,A){let R=x.view.ma(w);R.ns&&(R=await j_(C.localStore,x.query,!1).then(({documents:S})=>x.view.ma(S,R)));const O=A&&A.targetChanges.get(x.targetId),M=A&&A.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(R,C.isPrimaryClient,O,M);return K_(C,x.targetId,b.wa),b.snapshot}(t,d,f,g);const s=await j_(t.localStore,e,!0),o=new Tb(e,s.Ts),a=o.ma(s.documents),u=ul.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);K_(t,n,c.wa);const h=new Ib(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function kb(t,e,n){const r=le(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!zc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&om(r.remoteStore,i.targetId),kf(r,i.targetId)}).catch(sl)):(kf(r,i.targetId),await Cf(r.localStore,i.targetId,!0))}async function xb(t,e){const n=le(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),om(n.remoteStore,r.targetId))}async function Nb(t,e,n){const r=Ub(t);try{const i=await function(o,a){const u=le(o),c=Ke.now(),h=a.reduce((g,v)=>g.add(v.key),ce());let d,f;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Ar(),C=ce();return u.cs.getEntries(g,h).next(x=>{v=x,v.forEach((w,A)=>{A.isValidDocument()||(C=C.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,v)).next(x=>{d=x;const w=[];for(const A of a){const R=ZN(A,d.get(A.key).overlayedDocument);R!=null&&w.push(new wi(A.key,R,gE(R.value.mapValue),Zn.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,w,a)}).next(x=>{f=x;const w=x.applyToLocalDocumentSet(d,C);return u.documentOverlayCache.saveOverlays(g,x.batchId,w)})}).then(()=>({batchId:f.batchId,changes:CE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new We(ye)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await hl(r,i.changes),await Qc(r.remoteStore)}catch(i){const s=hm(i,"Failed to persist write");n.reject(s)}}async function aT(t,e){const n=le(t);try{const r=await q4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ae(o.va):i.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await hl(n,r,e)}catch(r){await sl(r)}}function G_(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=le(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&pm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bb(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new We(ie.comparator);o=o.insert(s,bt.newNoDocument(s,ae.min()));const a=ce().add(s),u=new qc(ae.min(),new Map,new We(ye),o,a);await aT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),gm(r)}else await Cf(r.localStore,e,!1).then(()=>kf(r,e,n)).catch(sl)}async function Ob(t,e){const n=le(t),r=e.batch.batchId;try{const i=await H4(n.localStore,e);uT(n,r,null),lT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hl(n,i)}catch(i){await sl(i)}}async function Db(t,e,n){const r=le(t);try{const i=await function(o,a){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(Ae(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);uT(r,e,n),lT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hl(r,i)}catch(i){await sl(i)}}function lT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uT(t,e,n){const r=le(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||cT(t,r)})}function cT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(om(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gm(t))}function K_(t,e,n){for(const r of n)r instanceof iT?(t.La.addReference(r.key,e),Mb(t,r)):r instanceof sT?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||cT(t,r.key)):oe()}function Mb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),gm(t))}function gm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new Sb(n)),t.Oa=t.Oa.insert(n,r),JE(t.remoteStore,new Qr(Jn(Bc(n.path)),r,"TargetPurposeLimboResolution",Gp.oe))}}async function hl(t,e,n){const r=le(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){i.push(c);const d=sm.Wi(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=le(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(c,f=>K.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>K.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!ol(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.os.get(f),v=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(f,C)}}}(r.localStore,s))}async function Lb(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await KE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new te(H.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hl(n,r.hs)}}function Vb(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function hT(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bb.bind(null,e),e.Ca.d_=wb.bind(null,e.eventManager),e.Ca.$a=Eb.bind(null,e.eventManager),e}function Ub(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ob.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Db.bind(null,e),e}class Q_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return W4(this.persistence,new z4,e.initialUser,this.serializer)}createPersistence(e){return new F4(im.Zr,this.serializer)}createSharedClientState(e){return new X4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lb.bind(null,this.syncEngine),await yb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vb}()}createDatastore(e){const n=Gc(e.databaseInfo.databaseId),r=function(s){return new tb(s)}(e.databaseInfo);return function(s,o,a,u){return new ib(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ob(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>G_(this.syncEngine,n,0),function(){return z_.D()?new z_:new J4}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const d=new Ab(i,s,o,a,u,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=le(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await cl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=fE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ne("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sd(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await KE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zb(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$_(e.remoteStore,i)),t._onlineComponents=e}function Bb(t){return t.name==="FirebaseError"?t.code===H.FAILED_PRECONDITION||t.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function zb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await sd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Bb(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await sd(t,new Q_)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await sd(t,new Q_);return t._offlineComponents}async function dT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await Y_(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await Y_(t,new Fb))),t._onlineComponents}function $b(t){return dT(t).then(e=>e.syncEngine)}async function sc(t){const e=await dT(t),n=e.eventManager;return n.onListen=Rb.bind(null,e.syncEngine),n.onUnlisten=kb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Cb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xb.bind(null,e.syncEngine),n}function Wb(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new ym({next:f=>{o.enqueueAndForget(()=>fm(s,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new te(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&u&&u.source==="server"?c.reject(new te(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new mm(Bc(a.path),h,{includeMetadataChanges:!0,_a:!0});return dm(s,d)}(await sc(t),t.asyncQueue,e,n,r)),r.promise}function Hb(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new ym({next:f=>{o.enqueueAndForget(()=>fm(s,d)),f.fromCache&&u.source==="server"?c.reject(new te(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new mm(a,h,{includeMetadataChanges:!0,_a:!0});return dm(s,d)}(await sc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e,n){if(!n)throw new te(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qb(t,e,n,r){if(e===!0&&r===!0)throw new te(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function J_(t){if(!ie.isDocumentKey(t))throw new te(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z_(t){if(ie.isDocumentKey(t))throw new te(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yc(t);throw new te(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ev({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new te(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ev(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lN;switch(r.type){case"firstParty":return new dN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=X_.get(n);r&&(ne("ComponentProvider","Removing Datastore"),X_.delete(n),r.terminate())}(this),Promise.resolve()}}function Gb(t,e,n,r={}){var i;const s=(t=En(t,Xc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=xt.MOCK_USER;else{a=Q1(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new te(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new xt(c)}t._authCredentials=new uN(new dE(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class li extends os{constructor(e,n,r){super(e,n,Bc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new ie(e))}withConverter(e){return new li(this.firestore,e,this._path)}}function Kb(t,e,...n){if(t=Me(t),pT("collection","path",e),t instanceof Xc){const r=Oe.fromString(e,...n);return Z_(r),new li(t,null,r)}{if(!(t instanceof Dt||t instanceof li))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Z_(r),new li(t.firestore,null,r)}}function Ot(t,e,...n){if(t=Me(t),arguments.length===1&&(e=fE.newId()),pT("doc","path",e),t instanceof Xc){const r=Oe.fromString(e,...n);return J_(r),new Dt(t,null,new ie(r))}{if(!(t instanceof Dt||t instanceof li))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return J_(r),new Dt(t.firestore,t instanceof li?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new YE(this,"async_queue_retry"),this.Eu=()=>{const n=id();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=id();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new yr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ol(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Sr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=cm.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&oe()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function tv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Zi extends Xc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Qb}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mT(this),this._firestoreClient.terminate()}}function Yb(t,e){const n=typeof t=="object"?t:Np(),r=typeof t=="string"?t:"(default)",i=Mc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=q1("firestore");s&&Gb(i,...s)}return i}function Jc(t){return t._firestoreClient||mT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mT(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new AN(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new jb(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._byteString=e}static fromBase64String(e){try{return new so(Tt.fromBase64String(e))}catch(n){throw new te(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new so(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=/^__.*__$/;class Jb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ll(e,this.data,n,this.fieldTransforms)}}class gT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class eh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new eh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return oc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(yT(this.wu)&&Xb.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class Zb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gc(e)}Nu(e,n,r,i=!1){return new eh({wu:e,methodName:n,Ou:r,path:_t.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wm(t){const e=t._freezeSettings(),n=Gc(t._databaseId);return new Zb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eO(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);Im("Data must be an object, but it was:",o,r);const a=_T(r,o);let u,c;if(s.merge)u=new un(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=xf(e,d,n);if(!o.contains(f))throw new te(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wT(h,f)||h.push(f)}u=new un(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Jb(new Qt(a),u,c)}class th extends dl{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function tO(t,e,n){return new eh({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Em extends dl{_toFieldTransform(e){return new DE(e.path,new Ba)}isEqual(e){return e instanceof Em}}class Tm extends dl{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=tO(this,e,!0),r=this.Lu.map(s=>yo(s,n)),i=new no(r);return new DE(e.path,i)}isEqual(e){return e instanceof Tm&&Da(this.Lu,e.Lu)}}function nO(t,e,n,r){const i=t.Nu(1,e,n);Im("Data must be an object, but it was:",i,r);const s=[],o=Qt.empty();is(r,(u,c)=>{const h=Sm(e,u,n);c=Me(c);const d=i.Cu(h);if(c instanceof th)s.push(h);else{const f=yo(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new un(s);return new gT(o,a,i.fieldTransforms)}function rO(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[xf(e,r,n)],u=[i];if(s.length%2!=0)throw new te(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(xf(e,s[f])),u.push(s[f+1]);const c=[],h=Qt.empty();for(let f=a.length-1;f>=0;--f)if(!wT(c,a[f])){const g=a[f];let v=u[f];v=Me(v);const C=o.Cu(g);if(v instanceof th)c.push(g);else{const x=yo(v,C);x!=null&&(c.push(g),h.set(g,x))}}const d=new un(c);return new gT(h,d,o.fieldTransforms)}function iO(t,e,n,r=!1){return yo(n,t.Nu(r?4:3,e))}function yo(t,e){if(vT(t=Me(t)))return Im("Unsupported field value:",e,t),_T(t,e);if(t instanceof dl)return function(r,i){if(!yT(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=yo(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ke.fromDate(r);return{timestampValue:rc(i.serializer,s)}}if(r instanceof Ke){const s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rc(i.serializer,s)}}if(r instanceof _m)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof so)return{bytesValue:BE(i.serializer,r._byteString)};if(r instanceof Dt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Zp(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Yc(r)}`)}(t,e)}function _T(t,e){const n={};return pE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,i)=>{const s=yo(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof _m||t instanceof so||t instanceof Dt||t instanceof dl||t instanceof vm)}function Im(t,e,n){if(!vT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Yc(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function xf(t,e,n){if((e=Me(e))instanceof Zc)return e._internalPath;if(typeof e=="string")return Sm(t,e);throw oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const sO=new RegExp("[~\\*/\\[\\]]");function Sm(t,e,n){if(e.search(sO)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zc(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new te(H.INVALID_ARGUMENT,a+t+u)}function wT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oO extends ET{data(){return super.data()}}function Am(t,e){return typeof e=="string"?Sm(t,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rm{}class aO extends Rm{}function lO(t,e,...n){let r=[];e instanceof Rm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Cm).length,a=s.filter(u=>u instanceof nh).length;if(o>1||o>0&&a>0)throw new te(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class nh extends aO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nh(e,n,r)}_apply(e){const n=this._parse(e);return IT(e._query,n),new os(e.firestore,e.converter,Ef(e._query,n))}_parse(e){const n=wm(e.firestore);return function(s,o,a,u,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){rv(d,h);const g=[];for(const v of d)g.push(nv(u,s,v));f={arrayValue:{values:g}}}else f=nv(u,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||rv(d,h),f=iO(a,o,d,h==="in"||h==="not-in");return rt.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uO(t,e,n){const r=e,i=Am("where",t);return nh._create(i,r,n)}class Cm extends Rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)IT(o,u),o=Ef(o,u)}(e._query,n),new os(e.firestore,e.converter,Ef(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nv(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new te(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IE(e)&&n.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!ie.isDocumentKey(r))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return I_(t,new ie(r))}if(n instanceof Dt)return I_(t,n._key);throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yc(n)}.`)}function rv(t,e){if(!Array.isArray(t)||t.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IT(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cO{convertValue(e,n="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ye(o.doubleValue));return new vm(s)}convertGeoPoint(e){return new _m(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=fi(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Ae(GE(r));const i=new Fa(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||Sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ST extends ET{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yu extends ST{data(e={}){return super.data(e)}}class AT{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yu(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new yu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new yu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:dO(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){t=En(t,Dt);const e=En(t.firestore,Zi);return Wb(Jc(e),t._key).then(n=>xT(e,t,n))}class Pm extends cO{constructor(e){super(),this.firestore=e}convertBytes(e){return new so(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function fO(t){t=En(t,os);const e=En(t.firestore,Zi),n=Jc(e),r=new Pm(e);return TT(t._query),Hb(n,t._query).then(i=>new AT(e,r,t,i))}function CT(t,e,n){t=En(t,Dt);const r=En(t.firestore,Zi),i=hO(t.converter,e);return kT(r,[eO(wm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zn.none())])}function zn(t,e,n,...r){t=En(t,Dt);const i=En(t.firestore,Zi),s=wm(i);let o;return o=typeof(e=Me(e))=="string"||e instanceof Zc?rO(s,"updateDoc",t._key,e,n,r):nO(s,"updateDoc",t._key,e),kT(i,[o.toMutation(t._key,Zn.exists(!0))])}function PT(t,...e){var n,r,i;t=Me(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||tv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(tv(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,h;if(t instanceof Dt)c=En(t.firestore,Zi),h=Bc(t._key.path),u={next:d=>{e[o]&&e[o](xT(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=En(t,os);c=En(d.firestore,Zi),h=d._query;const f=new Pm(c);u={next:g=>{e[o]&&e[o](new AT(c,f,d,g))},error:e[o+1],complete:e[o+2]},TT(t._query)}return function(f,g,v,C){const x=new ym(C),w=new mm(g,x,v);return f.asyncQueue.enqueueAndForget(async()=>dm(await sc(f),w)),()=>{x.za(),f.asyncQueue.enqueueAndForget(async()=>fm(await sc(f),w))}}(Jc(c),h,a,u)}function kT(t,e){return function(r,i){const s=new yr;return r.asyncQueue.enqueueAndForget(async()=>Nb(await $b(r),i,s)),s.promise}(Jc(t),e)}function xT(t,e,n){const r=n.docs.get(e._key),i=new Pm(t);return new ST(t,i,e._key,r,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}function bs(){return new Em("serverTimestamp")}function iv(...t){return new Tm("arrayUnion",t)}(function(e,n=!0){(function(i){po=i})(ns),qi(new hi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zi(new cN(r.getProvider("auth-internal")),new pN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qn(__,"4.7.1",e),Qn(__,"4.7.1","esm2017")})();const pO={apiKey:"AIzaSyB0MQro7Yv8ekRZghOSbfIG03XaTKKpTr4",authDomain:"chatzone-81e5b.firebaseapp.com",projectId:"chatzone-81e5b",storageBucket:"chatzone-81e5b.appspot.com",messagingSenderId:"85352328106",appId:"1:85352328106:web:84d5cca8713d1d90e2d9d3"},km=J1(pO),$a=qk(km),NT=iN(km),yt=Yb(km),Ei=G.createContext(),bT=({children:t})=>{const[e,n]=G.useState(null);return G.useEffect(()=>{const r=DP($a,i=>{n(i)});return()=>r()},[]),B.jsx(Ei.Provider,{value:{currentUser:e},children:t})};bT.propTypes={children:lr.node.isRequired};var OT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sv=Yr.createContext&&Yr.createContext(OT),mO=["attr","size","title"];function gO(t,e){if(t==null)return{};var n=yO(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yO(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ac.apply(this,arguments)}function ov(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ov(Object(n),!0).forEach(function(r){_O(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ov(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _O(t,e,n){return e=vO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vO(t){var e=wO(t,"string");return typeof e=="symbol"?e:e+""}function wO(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DT(t){return t&&t.map((e,n)=>Yr.createElement(e.tag,lc({key:n},e.attr),DT(e.child)))}function Pr(t){return e=>Yr.createElement(EO,ac({attr:lc({},t.attr)},e),DT(t.child))}function EO(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=gO(t,mO),a=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Yr.createElement("svg",ac({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:lc(lc({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Yr.createElement("title",null,s),t.children)};return sv!==void 0?Yr.createElement(sv.Consumer,null,n=>e(n)):e(OT)}function MT(t){return Pr({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(t)}function LT(t){return Pr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(t)}function TO(t){return Pr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(t)}function VT(t){return Pr({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const IO=()=>{const[t,e]=G.useState(""),[n,r]=G.useState(""),[i,s]=G.useState(""),[o,a]=G.useState(""),u=Oc(),c=d=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d),h=async d=>{if(d.preventDefault(),!c(t)){a("Invalid email format");return}try{const g=(await PP($a,t,n)).user;await Aw(g,{displayName:i}),await xP(g),await CT(Ot(yt,"users",g.uid),{uid:g.uid,displayName:i,email:t}),e(""),r(""),s(""),a(""),u("/verify-email")}catch(f){a("Failed to create account: "+f.message)}};return B.jsx("div",{className:"signup-container",children:B.jsxs("form",{className:"signup-form",onSubmit:h,children:[B.jsxs("h2",{className:"title",children:["Create Your ",B.jsx("span",{children:"Account"})]}),B.jsxs("label",{htmlFor:"displayName",children:["Display Name:",B.jsx("input",{type:"text",id:"displayName",value:i,onChange:d=>s(d.target.value)})]}),B.jsxs("label",{htmlFor:"email",children:["Email:",B.jsx("input",{type:"email",id:"email",value:t,onChange:d=>e(d.target.value)})]}),B.jsxs("label",{htmlFor:"password",children:["Password:",B.jsx("input",{type:"password",id:"password",value:n,onChange:d=>r(d.target.value)})]}),B.jsxs("label",{htmlFor:"rememberMe",className:"remember-me-label",children:[B.jsx("input",{type:"checkbox",id:"rememberMe"}),"Remember me"]}),B.jsx("button",{type:"submit",children:"Sign Up"}),B.jsxs("p",{children:["Forgot your password? ",B.jsx("a",{href:"/forgot-password",children:"Click here"})]}),B.jsxs("div",{className:"social-login",children:[B.jsxs("div",{className:"or-container",children:[B.jsx("span",{className:"line"}),B.jsx("span",{className:"or-box",children:"OR"}),B.jsx("span",{className:"line"})]}),B.jsxs("div",{className:"social-icons",children:[B.jsx("a",{href:"/facebook-auth",className:"social-icon",children:B.jsx(MT,{})}),B.jsx("a",{href:"/google-auth",className:"social-icon",children:B.jsx(VT,{})}),B.jsx("a",{href:"/linkedin-auth",className:"social-icon",children:B.jsx(LT,{})})]})]}),B.jsxs("p",{className:"text",children:["Already Registered? ",B.jsx(B1,{to:"/login",children:"Login"})]})]})})},SO=()=>{const[t,e]=G.useState(""),[n,r]=G.useState(""),i=Oc(),s=async o=>{o.preventDefault();try{await kP($a,t,n),console.log("Login successful"),e(""),r(""),i("/home")}catch(a){a.code==="auth/wrong-password"?window.alert("Incorrect password. Please try again."):window.alert("Failed to login: "+a.message),e(""),r("")}};return B.jsx("div",{className:"signup-container",children:B.jsxs("form",{className:"signup-form",onSubmit:s,children:[B.jsxs("h2",{className:"title",children:["Welcome ",B.jsx("span",{children:"Back"})]}),B.jsxs("label",{htmlFor:"email",children:["Email:",B.jsx("input",{type:"email",id:"email",value:t,onChange:o=>e(o.target.value),required:!0})]}),B.jsxs("label",{htmlFor:"password",children:["Password:",B.jsx("input",{type:"password",id:"password",value:n,onChange:o=>r(o.target.value),required:!0})]}),B.jsxs("label",{htmlFor:"rememberMe",className:"remember-me-label",children:[B.jsx("input",{type:"checkbox",id:"rememberMe"}),"Remember me"]}),B.jsx("button",{type:"submit",children:"Login"}),B.jsxs("p",{children:["Forgot your password? ",B.jsx("a",{href:"/forgot-password",children:"Click here"})]}),B.jsxs("div",{className:"social-login",children:[B.jsxs("div",{className:"or-container",children:[B.jsx("span",{className:"line"}),B.jsx("span",{className:"or-box",children:"OR"}),B.jsx("span",{className:"line"})]}),B.jsxs("div",{className:"social-icons",children:[B.jsx("a",{href:"/facebook-auth",className:"social-icon",children:B.jsx(MT,{})}),B.jsx("a",{href:"/google-auth",className:"social-icon",children:B.jsx(VT,{})}),B.jsx("a",{href:"/linkedin-auth",className:"social-icon",children:B.jsx(LT,{})})]})]}),B.jsxs("p",{className:"text",children:["Need an account? ",B.jsx(B1,{to:"/signup",children:"Signup"})]})]})})};function AO(t){return Pr({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"},child:[]}]})(t)}function RO(t){return Pr({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0 0 12.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0 0 12.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 0 0 174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"},child:[]}]})(t)}function CO(t){return Pr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function PO(t){return Pr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function kO(t){return Pr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}const _o=G.createContext(),UT=({children:t})=>{const{currentUser:e}=G.useContext(Ei),n={chatId:"null",user:{},lastMessage:null},r=(o,a)=>{switch(a.type){case"CHANGE_USER":return{...o,user:a.payload,chatId:e.uid>a.payload.uid?e.uid+a.payload.uid:a.payload.uid+e.uid,lastMessage:null};case"CLEAR_MESSAGES":return{...o,lastMessage:null};default:return o}},[i,s]=G.useReducer(r,n);return B.jsx(_o.Provider,{value:{data:i,dispatch:s},children:t})};UT.propTypes={children:lr.node.isRequired};const FT=6048e5,xO=864e5,NO=36e5,av=Symbol.for("constructDateFrom");function Vn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&av in t?t[av](e):t instanceof Date?new t.constructor(e):new Date(e)}function en(t,e){return Vn(e||t,t)}function bO(t,e,n){return Vn(t,+en(t)+e)}function OO(t,e,n){return bO(t,e*NO)}let DO={};function rh(){return DO}function Wa(t,e){var a,u,c,h;const n=rh(),r=(e==null?void 0:e.weekStartsOn)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,i=en(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function uc(t,e){return Wa(t,{...e,weekStartsOn:1})}function jT(t,e){const n=en(t,e==null?void 0:e.in),r=n.getFullYear(),i=Vn(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=uc(i),o=Vn(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=uc(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function lv(t){const e=en(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function BT(t,...e){const n=Vn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function cc(t,e){const n=en(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function MO(t,e,n){const[r,i]=BT(n==null?void 0:n.in,t,e),s=cc(r),o=cc(i),a=+s-lv(s),u=+o-lv(o);return Math.round((a-u)/xO)}function LO(t,e){const n=jT(t,e),r=Vn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),uc(r)}function VO(t){return Vn(t,Date.now())}function UO(t,e,n){const[r,i]=BT(n==null?void 0:n.in,t,e);return+cc(r)==+cc(i)}function FO(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jO(t){return!(!FO(t)&&typeof t!="number"||isNaN(+en(t)))}function BO(t,e){const n=en(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const zO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$O=(t,e,n)=>{let r;const i=zO[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function od(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const WO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GO={date:od({formats:WO,defaultWidth:"full"}),time:od({formats:HO,defaultWidth:"full"}),dateTime:od({formats:qO,defaultWidth:"full"})},KO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},QO=(t,e,n,r)=>KO[t];function zo(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const YO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nD=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rD={ordinalNumber:nD,era:zo({values:YO,defaultWidth:"wide"}),quarter:zo({values:XO,defaultWidth:"wide",argumentCallback:t=>t-1}),month:zo({values:JO,defaultWidth:"wide"}),day:zo({values:ZO,defaultWidth:"wide"}),dayPeriod:zo({values:eD,defaultWidth:"wide",formattingValues:tD,defaultFormattingWidth:"wide"})};function $o(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?sD(a,d=>d.test(o)):iD(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function iD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function sD(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function oD(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const aD=/^(\d+)(th|st|nd|rd)?/i,lD=/\d+/i,uD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cD={any:[/^b/i,/^(a|c)/i]},hD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dD={any:[/1/i,/2/i,/3/i,/4/i]},fD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_D={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vD={ordinalNumber:oD({matchPattern:aD,parsePattern:lD,valueCallback:t=>parseInt(t,10)}),era:$o({matchPatterns:uD,defaultMatchWidth:"wide",parsePatterns:cD,defaultParseWidth:"any"}),quarter:$o({matchPatterns:hD,defaultMatchWidth:"wide",parsePatterns:dD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:$o({matchPatterns:fD,defaultMatchWidth:"wide",parsePatterns:pD,defaultParseWidth:"any"}),day:$o({matchPatterns:mD,defaultMatchWidth:"wide",parsePatterns:gD,defaultParseWidth:"any"}),dayPeriod:$o({matchPatterns:yD,defaultMatchWidth:"any",parsePatterns:_D,defaultParseWidth:"any"})},wD={code:"en-US",formatDistance:$O,formatLong:GO,formatRelative:QO,localize:rD,match:vD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ED(t,e){const n=en(t,e==null?void 0:e.in);return MO(n,BO(n))+1}function TD(t,e){const n=en(t,e==null?void 0:e.in),r=+uc(n)-+LO(n);return Math.round(r/FT)+1}function zT(t,e){var h,d,f,g;const n=en(t,e==null?void 0:e.in),r=n.getFullYear(),i=rh(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(f=i.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=Vn((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Wa(o,e),u=Vn((e==null?void 0:e.in)||t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const c=Wa(u,e);return+n>=+a?r+1:+n>=+c?r:r-1}function ID(t,e){var a,u,c,h;const n=rh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,i=zT(t,e),s=Vn((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Wa(s,e)}function SD(t,e){const n=en(t,e==null?void 0:e.in),r=+Wa(n,e)-+ID(n,e);return Math.round(r/FT)+1}function Ee(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Lr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ee(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ee(n+1,2)},d(t,e){return Ee(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ee(t.getHours()%12||12,e.length)},H(t,e){return Ee(t.getHours(),e.length)},m(t,e){return Ee(t.getMinutes(),e.length)},s(t,e){return Ee(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ee(i,e.length)}},fs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},uv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Lr.y(t,e)},Y:function(t,e,n,r){const i=zT(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Ee(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ee(s,e.length)},R:function(t,e){const n=jT(t);return Ee(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ee(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ee(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ee(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Lr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ee(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=SD(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ee(i,e.length)},I:function(t,e,n){const r=TD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ee(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Lr.d(t,e)},D:function(t,e,n){const r=ED(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ee(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ee(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ee(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ee(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=fs.noon:r===0?i=fs.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=fs.evening:r>=12?i=fs.afternoon:r>=4?i=fs.morning:i=fs.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Lr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Lr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ee(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ee(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Lr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Lr.s(t,e)},S:function(t,e){return Lr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return hv(r);case"XXXX":case"XX":return Ni(r);case"XXXXX":case"XXX":default:return Ni(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return hv(r);case"xxxx":case"xx":return Ni(r);case"xxxxx":case"xxx":default:return Ni(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cv(r,":");case"OOOO":default:return"GMT"+Ni(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cv(r,":");case"zzzz":default:return"GMT"+Ni(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ee(r,e.length)},T:function(t,e,n){return Ee(+t,e.length)}};function cv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Ee(s,2)}function hv(t,e){return t%60===0?(t>0?"-":"+")+Ee(Math.abs(t)/60,2):Ni(t,e)}function Ni(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ee(Math.trunc(r/60),2),s=Ee(r%60,2);return n+i+e+s}const dv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$T=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},AD=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return dv(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",dv(r,e)).replace("{{time}}",$T(i,e))},RD={p:$T,P:AD},CD=/^D+$/,PD=/^Y+$/,kD=["D","DD","YY","YYYY"];function xD(t){return CD.test(t)}function ND(t){return PD.test(t)}function bD(t,e,n){const r=OD(t,e,n);if(console.warn(r),kD.includes(t))throw new RangeError(r)}function OD(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const DD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LD=/^'([^]*?)'?$/,VD=/''/g,UD=/[a-zA-Z]/;function hc(t,e,n){var h,d,f,g;const r=rh(),i=r.locale??wD,s=r.firstWeekContainsDate??((d=(h=r.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,a=en(t,n==null?void 0:n.in);if(!jO(a))throw new RangeError("Invalid time value");let u=e.match(MD).map(v=>{const C=v[0];if(C==="p"||C==="P"){const x=RD[C];return x(v,i.formatLong)}return v}).join("").match(DD).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const C=v[0];if(C==="'")return{isToken:!1,value:FD(v)};if(uv[C])return{isToken:!0,value:v};if(C.match(UD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(u=i.localize.preprocessor(a,u));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return u.map(v=>{if(!v.isToken)return v.value;const C=v.value;(ND(C)||xD(C))&&bD(C,e,String(t));const x=uv[C[0]];return x(a,C,i.localize,c)}).join("")}function FD(t){const e=t.match(LD);return e?e[1].replace(VD,"'"):t}function jD(t,e){return+en(t)>+en(e)}function BD(t,e){return UO(Vn(t,t),VO(t))}function zD(t,e,n){return OO(t,-e)}const WT=({message:t})=>{const{currentUser:e}=G.useContext(Ei),{data:n}=G.useContext(_o),r=G.useRef();G.useEffect(()=>{var s;(s=r.current)==null||s.scrollIntoView({behavior:"smooth"})},[t]);let i;if(t.date){const s=new Date(t.date);i=BD(s)?hc(s,"HH:mm a"):hc(s,"MM/dd/yyyy")}else i="Unknown time";return B.jsxs("div",{className:`message ${t.senderId===e.uid?"owner":""}`,children:[B.jsxs("div",{className:"messageinfo",children:[B.jsx("img",{src:t.senderId===e.uid?e.photoURL:n.user.photoURL,alt:""}),B.jsx("span",{className:"time",children:i})]}),B.jsxs("div",{className:"messagecontent",children:[t.text&&B.jsx("p",{children:t.text})," ",t.img&&B.jsx("img",{src:t.img,alt:""})," "]}),B.jsx("div",{ref:r})]})};WT.propTypes={message:lr.shape({id:lr.string.isRequired,text:lr.string,senderId:lr.string.isRequired,date:lr.instanceOf(Date),img:lr.string}).isRequired};const $D=()=>{const[t,e]=G.useState([]),{data:n}=G.useContext(_o);return G.useEffect(()=>{if(!n.chatId)return;const r=PT(Ot(yt,"chats",n.chatId),i=>{var s;if(i.exists()){const a=((s=i.data().messages)==null?void 0:s.map(u=>u.date instanceof Ke?{...u,date:u.date.toDate()}:u))||[];e(a)}});return()=>{r()}},[n.chatId]),B.jsx("div",{className:"messages",children:t.length>0?t.map(r=>B.jsx(WT,{message:r},r.id)):B.jsx("p",{className:"chatdisplay",children:"No messages to display"})})};var pt=[];for(var ad=0;ad<256;++ad)pt.push((ad+256).toString(16).slice(1));function WD(t,e=0){return(pt[t[e+0]]+pt[t[e+1]]+pt[t[e+2]]+pt[t[e+3]]+"-"+pt[t[e+4]]+pt[t[e+5]]+"-"+pt[t[e+6]]+pt[t[e+7]]+"-"+pt[t[e+8]]+pt[t[e+9]]+"-"+pt[t[e+10]]+pt[t[e+11]]+pt[t[e+12]]+pt[t[e+13]]+pt[t[e+14]]+pt[t[e+15]]).toLowerCase()}var Yl,HD=new Uint8Array(16);function qD(){if(!Yl&&(Yl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yl(HD)}var GD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const fv={randomUUID:GD};function ld(t,e,n){if(fv.randomUUID&&!e&&!t)return fv.randomUUID();t=t||{};var r=t.random||(t.rng||qD)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,WD(r)}const KD=()=>{const[t,e]=G.useState(""),[n,r]=G.useState(null),{currentUser:i}=G.useContext(Ei),{data:s}=G.useContext(_o),o=async()=>{if(n){const a=iE(NT,ld()),u=nE(a,n);u.on("state_changed",c=>{const h=c.bytesTransferred/c.totalBytes*100;switch(console.log("Upload is "+h+"% done"),c.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},c=>{console.error("Image upload error:",c)},async()=>{const c=await rE(u.snapshot.ref);console.log("Image uploaded successfully, download URL:",c),await zn(Ot(yt,"chats",s.chatId),{messages:iv({id:ld(),text:t,senderId:i.uid,date:Ke.now(),img:c})}),await zn(Ot(yt,"userChats",i.uid),{[`${s.chatId}.lastMessage`]:{text:t},[`${s.chatId}.date`]:bs()}),await zn(Ot(yt,"userChats",s.user.uid),{[`${s.chatId}.lastMessage`]:{text:t},[`${s.chatId}.date`]:bs()}),e(""),r(null)})}else await zn(Ot(yt,"chats",s.chatId),{messages:iv({id:ld(),text:t,senderId:i.uid,date:Ke.now()})}),await zn(Ot(yt,"userChats",i.uid),{[`${s.chatId}.lastMessage`]:{text:t},[`${s.chatId}.date`]:bs()}),await zn(Ot(yt,"userChats",s.user.uid),{[`${s.chatId}.lastMessage`]:{text:t},[`${s.chatId}.date`]:bs()}),e("")};return B.jsxs("div",{className:"input",children:[B.jsx("input",{type:"text",placeholder:"Type something...",onChange:a=>e(a.target.value),value:t}),B.jsxs("div",{className:"send",children:[B.jsx(RO,{style:{fontSize:"24px",cursor:"pointer",color:"lightgray"}}),B.jsx("input",{type:"file",style:{display:"none"},id:"file",onChange:a=>r(a.target.files[0])}),B.jsx("label",{htmlFor:"file",children:B.jsx(CO,{style:{fontSize:"24px",cursor:"pointer",color:"lightgray"}})}),B.jsx("button",{onClick:o,disabled:!t&&!n,children:"Send"})]})]})},QD=()=>{var a;const{data:t}=G.useContext(_o),[e,n]=G.useState([]),[r,i]=G.useState(!1),s=()=>{i(!r)},o=async()=>{if(t.chatId){const u=Ot(yt,"chats",t.chatId);try{await zn(u,{messages:[],lastMessage:{text:"No messages",date:new Date}}),n([])}catch(c){console.error("Error clearing chat:",c)}}};return B.jsxs("div",{className:"chat",children:[B.jsxs("div",{className:"chatinfo",children:[B.jsx("span",{children:(a=t.user)==null?void 0:a.displayName}),B.jsxs("div",{className:"chaticons",children:[B.jsx(AO,{style:{fontSize:"24px",cursor:"pointer"}}),B.jsx(PO,{style:{fontSize:"24px",cursor:"pointer",color:"#3d485f"}}),B.jsx(kO,{style:{fontSize:"24px",cursor:"pointer"},onClick:s}),r&&B.jsx("div",{className:"dropdown",children:B.jsxs("ul",{children:[B.jsx("li",{onClick:o,children:"Clear Chat"}),B.jsx("li",{onClick:()=>alert("New Group"),children:"New Group"}),B.jsx("li",{onClick:()=>alert("View Contact"),children:"View Contact"}),B.jsx("li",{onClick:()=>alert("Wallpaper"),children:"Wallpaper"}),B.jsx("li",{onClick:()=>alert("More Options"),children:"More Options"})]})})]})]}),B.jsx($D,{messages:e}),B.jsx(KD,{})]})};function YD(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function HT(t,e){return new Promise(function(n,r){let i;return XD(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const XD=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const u=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let h;switch(s.getUint16(c)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,h)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,h),f=c+d+2+12*s.getUint16(c+d,h);for(let g=c+d+2;g<f;g+=12)if(s.getUint16(g,h)==274){if(s.getUint16(g+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(g+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(g+8,1,h);break}return e(i.slice(o,o+2+u))}o+=2+u}return e(new Blob)}),r.readAsArrayBuffer(t)});var dc={},JD={get exports(){return dc},set exports(t){dc=t}};(function(t){var e,n,r={};JD.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,u=0,c={},h=new Uint8Array(i),d=h.length-4;a(h,d)!=101010256;)d--;u=d,u+=4;var f=o(h,u+=4);o(h,u+=2);var g=a(h,u+=2),v=a(h,u+=4);u+=4,u=v;for(var C=0;C<f;C++){a(h,u),u+=4,u+=4,u+=4,a(h,u+=4),g=a(h,u+=4);var x=a(h,u+=4),w=o(h,u+=4),A=o(h,u+2),R=o(h,u+4);u+=6;var O=a(h,u+=8);u+=4,u+=w+A+R,r._readLocal(h,O,c,g,x,s)}return c},r._readLocal=function(i,s,o,a,u,c){var h=r.bin.readUshort,d=r.bin.readUint;d(i,s),h(i,s+=4),h(i,s+=2);var f=h(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var g=h(i,s+=8),v=h(i,s+=2);s+=2;var C=r.bin.readUTF8(i,s,g);if(s+=g,s+=v,c)o[C]={size:u,csize:a};else{var x=new Uint8Array(i.buffer,s);if(f==0)o[C]=new Uint8Array(x.buffer.slice(s,s+a));else{if(f!=8)throw"unknown compression method: "+f;var w=new Uint8Array(u);r.inflateRaw(x,w),o[C]=w}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var u=r.adler(i,0,i.length);return a[o+0]=u>>>24&255,a[o+1]=u>>>16&255,a[o+2]=u>>>8&255,a[o+3]=u>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,u=r.bin.writeUshort,c={};for(var h in i){var d=!r._noNeed(h)&&!s,f=i[h],g=r.crc.crc(f,0,f.length);c[h]={cpr:d,usize:f.length,crc:g,file:d?r.deflateRaw(f):f}}for(var h in c)o+=c[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var v=new Uint8Array(o),C=0,x=[];for(var h in c){var w=c[h];x.push(C),C=r._writeHeader(v,C,h,w,0)}var A=0,R=C;for(var h in c)w=c[h],x.push(C),C=r._writeHeader(v,C,h,w,1,x[A++]);var O=C-R;return a(v,C,101010256),C+=4,u(v,C+=4,A),u(v,C+=2,A),a(v,C+=2,O),a(v,C+=4,R),C+=4,C+=2,v.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,u,c){var h=r.bin.writeUint,d=r.bin.writeUshort,f=a.file;return h(i,s,u==0?67324752:33639248),s+=4,u==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),h(i,s+=2,0),h(i,s+=4,a.crc),h(i,s+=4,f.length),h(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,u==1&&(s+=2,s+=2,h(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),u==0&&(i.set(f,s),s+=f.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var u=0;u<a;u++)i=r.crc.table[255&(i^s[o+u])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,u=0,c=s,h=s+o;c<h;){for(var d=Math.min(c+5552,h);c<d;)u+=a+=i[c++];a%=65521,u%=65521}return u<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",u=0;u<o;u++)a+=String.fromCharCode(i[s+u]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,u="",c=0;c<o;c++)u+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(u)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,u=0,c=0;c<a;c++){var h=o.charCodeAt(c);if(!(4294967168&h))i[s+u]=h,u++;else if(!(4294965248&h))i[s+u]=192|h>>6,i[s+u+1]=128|h>>0&63,u+=2;else if(!(4294901760&h))i[s+u]=224|h>>12,i[s+u+1]=128|h>>6&63,i[s+u+2]=128|h>>0&63,u+=3;else{if(4292870144&h)throw"e";i[s+u]=240|h>>18,i[s+u+1]=128|h>>12&63,i[s+u+2]=128|h>>6&63,i[s+u+3]=128|h>>0&63,u+=4}}return u},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var u=i.charCodeAt(a);if(!(4294967168&u))o++;else if(!(4294965248&u))o+=2;else if(!(4294901760&u))o+=3;else{if(4292870144&u)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,h=r.F._goodIndex;r.F._hash;var d=r.F._putsE,f=0,g=o<<3,v=0,C=i.length;if(a==0){for(;f<C;)d(s,g,f+(I=Math.min(65535,C-f))==C?1:0),g=r.F._copyExact(i,f,I,s,g+8),f+=I;return g>>>3}var x=c.lits,w=c.strt,A=c.prev,R=0,O=0,M=0,b=0,S=0,m=0;for(C>2&&(w[m=r.F._hash(i,0)]=0),f=0;f<C;f++){if(S=m,f+1<C-2){m=r.F._hash(i,f+1);var y=f+1&32767;A[y]=w[m],w[m]=y}if(v<=f){(R>14e3||O>26697)&&C-f>100&&(v<f&&(x[R]=f-v,R+=2,v=f),g=r.F._writeBlock(f==C-1||v==C?1:0,x,R,b,i,M,f-M,s,g),R=O=b=0,M=f);var E=0;f<C-2&&(E=r.F._bestMatch(i,f,A,S,Math.min(u[2],C-f),u[3]));var I=E>>>16,P=65535&E;if(E!=0){P=65535&E;var T=h(I=E>>>16,c.of0);c.lhst[257+T]++;var L=h(P,c.df0);c.dhst[L]++,b+=c.exb[T]+c.dxb[L],x[R]=I<<23|f-v,x[R+1]=P<<16|T<<8|L,R+=2,v=f+I}else c.lhst[i[f]]++;O++}}for(M==f&&i.length!=0||(v<f&&(x[R]=f-v,R+=2,v=f),g=r.F._writeBlock(1,x,R,b,i,M,f-M,s,g),R=0,O=0,R=O=b=0,M=f);7&g;)g++;return g>>>3},r.F._bestMatch=function(i,s,o,a,u,c){var h=32767&s,d=o[h],f=h-d+32768&32767;if(d==h||a!=r.F._hash(i,s-f))return 0;for(var g=0,v=0,C=Math.min(32767,s);f<=C&&--c!=0&&d!=h;){if(g==0||i[s+g]==i[s+g-f]){var x=r.F._howLong(i,s,f);if(x>g){if(v=f,(g=x)>=u)break;f+2<x&&(x=f+2);for(var w=0,A=0;A<x-2;A++){var R=s-f+A+32768&32767,O=R-o[R]+32768&32767;O>w&&(w=O,d=R)}}}f+=(h=d)-(d=o[h])+32768&32767}return g<<16|v},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,u=Math.min(i.length,s+258);for(s+=3;s<u&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,u,c,h,d,f){var g,v,C,x,w,A,R,O,M,b=r.F.U,S=r.F._putsF,m=r.F._putsE;b.lhst[256]++,v=(g=r.F.getTrees())[0],C=g[1],x=g[2],w=g[3],A=g[4],R=g[5],O=g[6],M=g[7];var y=32+(f+3&7?8-(f+3&7):0)+(h<<3),E=a+r.F.contSize(b.fltree,b.lhst)+r.F.contSize(b.fdtree,b.dhst),I=a+r.F.contSize(b.ltree,b.lhst)+r.F.contSize(b.dtree,b.dhst);I+=14+3*R+r.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var P=0;P<286;P++)b.lhst[P]=0;for(P=0;P<30;P++)b.dhst[P]=0;for(P=0;P<19;P++)b.ihst[P]=0;var T=y<E&&y<I?0:E<I?1:2;if(S(d,f,i),S(d,f+1,T),f+=3,T==0){for(;7&f;)f++;f=r.F._copyExact(u,c,h,d,f)}else{var L,z;if(T==1&&(L=b.fltree,z=b.fdtree),T==2){r.F.makeCodes(b.ltree,v),r.F.revCodes(b.ltree,v),r.F.makeCodes(b.dtree,C),r.F.revCodes(b.dtree,C),r.F.makeCodes(b.itree,x),r.F.revCodes(b.itree,x),L=b.ltree,z=b.dtree,m(d,f,w-257),m(d,f+=5,A-1),m(d,f+=5,R-4),f+=4;for(var D=0;D<R;D++)m(d,f+3*D,b.itree[1+(b.ordr[D]<<1)]);f+=3*R,f=r.F._codeTiny(O,b.itree,d,f),f=r.F._codeTiny(M,b.itree,d,f)}for(var N=c,U=0;U<o;U+=2){for(var V=s[U],j=V>>>23,J=N+(8388607&V);N<J;)f=r.F._writeLit(u[N++],L,d,f);if(j!=0){var q=s[U+1],X=q>>16,Q=q>>8&255,W=255&q;m(d,f=r.F._writeLit(257+Q,L,d,f),j-b.of0[Q]),f+=b.exb[Q],S(d,f=r.F._writeLit(W,z,d,f),X-b.df0[W]),f+=b.dxb[W],N+=j}}f=r.F._writeLit(256,L,d,f)}return f},r.F._copyExact=function(i,s,o,a,u){var c=u>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),u+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],u=r.F._lenCodes(i.ltree,a),c=[],h=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var f=r.F._hufTree(i.ihst,i.itree,7),g=19;g>4&&i.itree[1+(i.ordr[g-1]<<1)]==0;)g--;return[s,o,f,u,h,g,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var u=0;u<i.length;u+=2){var c=i[u],h=i[u+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,h,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var u=i[a+1],c=a+3<o?i[a+3]:-1,h=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(u==0&&c==u&&h==u){for(var f=a+5;f+2<o&&i[f+2]==u;)f+=2;(g=Math.min(f+1-a>>>1,138))<11?s.push(17,g-3):s.push(18,g-11),a+=2*g-2}else if(u==d&&c==u&&h==u){for(f=a+5;f+2<o&&i[f+2]==u;)f+=2;var g=Math.min(f+1-a>>>1,6);s.push(16,g-3),a+=2*g-2}else s.push(u,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],u=i.length,c=s.length,h=0;for(h=0;h<c;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<u;h++)i[h]!=0&&a.push({lit:h,f:i[h]});var d=a.length,f=a.slice(0);if(d==0)return 0;if(d==1){var g=a[0].lit;return f=g==0?1:0,s[1+(g<<1)]=1,s[1+(f<<1)]=1,1}a.sort(function(O,M){return O.f-M.f});var v=a[0],C=a[1],x=0,w=1,A=2;for(a[0]={lit:-1,f:v.f+C.f,l:v,r:C,d:0};w!=d-1;)v=x!=w&&(A==d||a[x].f<a[A].f)?a[x++]:a[A++],C=x!=w&&(A==d||a[x].f<a[A].f)?a[x++]:a[A++],a[w++]={lit:-1,f:v.f+C.f,l:v,r:C};var R=r.F.setDepth(a[w-1],0);for(R>o&&(r.F.restrictDepth(f,o,R),R=o),h=0;h<d;h++)s[1+(f[h].lit<<1)]=f[h].d;return R},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,u=1<<o-s,c=0;for(i.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var h=i[a].d;i[a].d=s,c+=u-(1<<o-h)}for(c>>>=o-s;c>0;)(h=i[a].d)<s?(i[a].d++,c-=1<<s-h-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,u=a._bitsF,c=a._bitsE,h=a._decodeTiny,d=a.makeCodes,f=a.codes2map,g=a._get17,v=a.U,C=s==null;C&&(s=new o(i.length>>>2<<3));for(var x,w,A=0,R=0,O=0,M=0,b=0,S=0,m=0,y=0,E=0;A==0;)if(A=u(i,E,1),R=u(i,E+1,2),E+=3,R!=0){if(C&&(s=r.F._check(s,y+(1<<17))),R==1&&(x=v.flmap,w=v.fdmap,S=511,m=31),R==2){O=c(i,E,5)+257,M=c(i,E+5,5)+1,b=c(i,E+10,4)+4,E+=14;for(var I=0;I<38;I+=2)v.itree[I]=0,v.itree[I+1]=0;var P=1;for(I=0;I<b;I++){var T=c(i,E+3*I,3);v.itree[1+(v.ordr[I]<<1)]=T,T>P&&(P=T)}E+=3*b,d(v.itree,P),f(v.itree,P,v.imap),x=v.lmap,w=v.dmap,E=h(v.imap,(1<<P)-1,O+M,i,E,v.ttree);var L=a._copyOut(v.ttree,0,O,v.ltree);S=(1<<L)-1;var z=a._copyOut(v.ttree,O,M,v.dtree);m=(1<<z)-1,d(v.ltree,L),f(v.ltree,L,x),d(v.dtree,z),f(v.dtree,z,w)}for(;;){var D=x[g(i,E)&S];E+=15&D;var N=D>>>4;if(!(N>>>8))s[y++]=N;else{if(N==256)break;var U=y+N-254;if(N>264){var V=v.ldef[N-257];U=y+(V>>>3)+c(i,E,7&V),E+=7&V}var j=w[g(i,E)&m];E+=15&j;var J=j>>>4,q=v.ddef[J],X=(q>>>4)+u(i,E,15&q);for(E+=15&q,C&&(s=r.F._check(s,y+(1<<17)));y<U;)s[y]=s[y++-X],s[y]=s[y++-X],s[y]=s[y++-X],s[y]=s[y++-X];y=U}}}else{7&E&&(E+=8-(7&E));var Q=4+(E>>>3),W=i[Q-4]|i[Q-3]<<8;C&&(s=r.F._check(s,y+W)),s.set(new o(i.buffer,i.byteOffset+Q,W),y),E=Q+W<<3,y+=W}return s.length==y?s:s.slice(0,y)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,u,c){for(var h=r.F._bitsE,d=r.F._get17,f=0;f<o;){var g=i[d(a,u)&s];u+=15&g;var v=g>>>4;if(v<=15)c[f]=v,f++;else{var C=0,x=0;v==16?(x=3+h(a,u,2),u+=2,C=c[f-1]):v==17?(x=3+h(a,u,3),u+=3):v==18&&(x=11+h(a,u,7),u+=7);for(var w=f+x;f<w;)c[f]=C,f++}}return u},r.F._copyOut=function(i,s,o,a){for(var u=0,c=0,h=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>u&&(u=d),c++}for(;c<h;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return u},r.F.makeCodes=function(i,s){for(var o,a,u,c,h=r.F.U,d=i.length,f=h.bl_count,g=0;g<=s;g++)f[g]=0;for(g=1;g<d;g+=2)f[i[g]]++;var v=h.next_code;for(o=0,f[0]=0,a=1;a<=s;a++)o=o+f[a-1]<<1,v[a]=o;for(u=0;u<d;u+=2)(c=i[u+1])!=0&&(i[u]=v[c],v[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,u=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var h=c>>1,d=i[c+1],f=h<<4|d,g=s-d,v=i[c]<<g,C=v+(1<<g);v!=C;)o[u[v]>>>15-s]=f,v++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,u=0;u<i.length;u+=2){var c=i[u]<<s-i[u+1];i[u]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(u,c,h){for(;c--!=0;)u.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var ZD=YD({__proto__:null,default:dc},[dc]);const Pn=function(){var t={nextZero(h,d){for(;h[d]!=0;)d++;return d},readUshort:(h,d)=>h[d]<<8|h[d+1],writeUshort(h,d,f){h[d]=f>>8&255,h[d+1]=255&f},readUint:(h,d)=>16777216*h[d]+(h[d+1]<<16|h[d+2]<<8|h[d+3]),writeUint(h,d,f){h[d]=f>>24&255,h[d+1]=f>>16&255,h[d+2]=f>>8&255,h[d+3]=255&f},readASCII(h,d,f){let g="";for(let v=0;v<f;v++)g+=String.fromCharCode(h[d+v]);return g},writeASCII(h,d,f){for(let g=0;g<f.length;g++)h[d+g]=f.charCodeAt(g)},readBytes(h,d,f){const g=[];for(let v=0;v<f;v++)g.push(h[d+v]);return g},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,d,f){let g,v="";for(let C=0;C<f;C++)v+=`%${t.pad(h[d+C].toString(16))}`;try{g=decodeURIComponent(v)}catch{return t.readASCII(h,d,f)}return g}};function e(h,d,f,g){const v=d*f,C=s(g),x=Math.ceil(d*C/8),w=new Uint8Array(4*v),A=new Uint32Array(w.buffer),{ctype:R}=g,{depth:O}=g,M=t.readUshort;if(R==6){const V=v<<2;if(O==8)for(var b=0;b<V;b+=4)w[b]=h[b],w[b+1]=h[b+1],w[b+2]=h[b+2],w[b+3]=h[b+3];if(O==16)for(b=0;b<V;b++)w[b]=h[b<<1]}else if(R==2){const V=g.tabs.tRNS;if(V==null){if(O==8)for(b=0;b<v;b++){var S=3*b;A[b]=255<<24|h[S+2]<<16|h[S+1]<<8|h[S]}if(O==16)for(b=0;b<v;b++)S=6*b,A[b]=255<<24|h[S+4]<<16|h[S+2]<<8|h[S]}else{var m=V[0];const j=V[1],J=V[2];if(O==8)for(b=0;b<v;b++){var y=b<<2;S=3*b,A[b]=255<<24|h[S+2]<<16|h[S+1]<<8|h[S],h[S]==m&&h[S+1]==j&&h[S+2]==J&&(w[y+3]=0)}if(O==16)for(b=0;b<v;b++)y=b<<2,S=6*b,A[b]=255<<24|h[S+4]<<16|h[S+2]<<8|h[S],M(h,S)==m&&M(h,S+2)==j&&M(h,S+4)==J&&(w[y+3]=0)}}else if(R==3){const V=g.tabs.PLTE,j=g.tabs.tRNS,J=j?j.length:0;if(O==1)for(var E=0;E<f;E++){var I=E*x,P=E*d;for(b=0;b<d;b++){y=P+b<<2;var T=3*(L=h[I+(b>>3)]>>7-((7&b)<<0)&1);w[y]=V[T],w[y+1]=V[T+1],w[y+2]=V[T+2],w[y+3]=L<J?j[L]:255}}if(O==2)for(E=0;E<f;E++)for(I=E*x,P=E*d,b=0;b<d;b++)y=P+b<<2,T=3*(L=h[I+(b>>2)]>>6-((3&b)<<1)&3),w[y]=V[T],w[y+1]=V[T+1],w[y+2]=V[T+2],w[y+3]=L<J?j[L]:255;if(O==4)for(E=0;E<f;E++)for(I=E*x,P=E*d,b=0;b<d;b++)y=P+b<<2,T=3*(L=h[I+(b>>1)]>>4-((1&b)<<2)&15),w[y]=V[T],w[y+1]=V[T+1],w[y+2]=V[T+2],w[y+3]=L<J?j[L]:255;if(O==8)for(b=0;b<v;b++){var L;y=b<<2,T=3*(L=h[b]),w[y]=V[T],w[y+1]=V[T+1],w[y+2]=V[T+2],w[y+3]=L<J?j[L]:255}}else if(R==4){if(O==8)for(b=0;b<v;b++){y=b<<2;var z=h[D=b<<1];w[y]=z,w[y+1]=z,w[y+2]=z,w[y+3]=h[D+1]}if(O==16)for(b=0;b<v;b++){var D;y=b<<2,z=h[D=b<<2],w[y]=z,w[y+1]=z,w[y+2]=z,w[y+3]=h[D+2]}}else if(R==0)for(m=g.tabs.tRNS?g.tabs.tRNS:-1,E=0;E<f;E++){const V=E*x,j=E*d;if(O==1)for(var N=0;N<d;N++){var U=(z=255*(h[V+(N>>>3)]>>>7-(7&N)&1))==255*m?0:255;A[j+N]=U<<24|z<<16|z<<8|z}else if(O==2)for(N=0;N<d;N++)U=(z=85*(h[V+(N>>>2)]>>>6-((3&N)<<1)&3))==85*m?0:255,A[j+N]=U<<24|z<<16|z<<8|z;else if(O==4)for(N=0;N<d;N++)U=(z=17*(h[V+(N>>>1)]>>>4-((1&N)<<2)&15))==17*m?0:255,A[j+N]=U<<24|z<<16|z<<8|z;else if(O==8)for(N=0;N<d;N++)U=(z=h[V+N])==m?0:255,A[j+N]=U<<24|z<<16|z<<8|z;else if(O==16)for(N=0;N<d;N++)z=h[V+(N<<1)],U=M(h,V+(N<<1))==m?0:255,A[j+N]=U<<24|z<<16|z<<8|z}return w}function n(h,d,f,g){const v=s(h),C=Math.ceil(f*v/8),x=new Uint8Array((C+1+h.interlace)*g);return d=h.tabs.CgBI?i(d,x):r(d,x),h.interlace==0?d=o(d,h,0,f,g):h.interlace==1&&(d=function(A,R){const O=R.width,M=R.height,b=s(R),S=b>>3,m=Math.ceil(O*b/8),y=new Uint8Array(M*m);let E=0;const I=[0,0,4,0,2,0,1],P=[0,4,0,2,0,1,0],T=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const N=T[z],U=L[z];let V=0,j=0,J=I[z];for(;J<M;)J+=N,j++;let q=P[z];for(;q<O;)q+=U,V++;const X=Math.ceil(V*b/8);o(A,R,E,V,j);let Q=0,W=I[z];for(;W<M;){let re=P[z],de=E+Q*X<<3;for(;re<O;){var D;if(b==1&&(D=(D=A[de>>3])>>7-(7&de)&1,y[W*m+(re>>3)]|=D<<7-((7&re)<<0)),b==2&&(D=(D=A[de>>3])>>6-(7&de)&3,y[W*m+(re>>2)]|=D<<6-((3&re)<<1)),b==4&&(D=(D=A[de>>3])>>4-(7&de)&15,y[W*m+(re>>1)]|=D<<4-((1&re)<<2)),b>=8){const ve=W*m+re*S;for(let me=0;me<S;me++)y[ve+me]=A[(de>>3)+me]}de+=b,re+=U}Q++,W+=N}V*j!=0&&(E+=j*(1+X)),z+=1}return y}(d,h)),d}function r(h,d){return i(new Uint8Array(h.buffer,2,h.length-6),d)}var i=function(){const h={H:{}};return h.H.N=function(d,f){const g=Uint8Array;let v,C,x=0,w=0,A=0,R=0,O=0,M=0,b=0,S=0,m=0;if(d[0]==3&&d[1]==0)return f||new g(0);const y=h.H,E=y.b,I=y.e,P=y.R,T=y.n,L=y.A,z=y.Z,D=y.m,N=f==null;for(N&&(f=new g(d.length>>>2<<5));x==0;)if(x=E(d,m,1),w=E(d,m+1,2),m+=3,w!=0){if(N&&(f=h.H.W(f,S+(1<<17))),w==1&&(v=D.J,C=D.h,M=511,b=31),w==2){A=I(d,m,5)+257,R=I(d,m+5,5)+1,O=I(d,m+10,4)+4,m+=14;let V=1;for(var U=0;U<38;U+=2)D.Q[U]=0,D.Q[U+1]=0;for(U=0;U<O;U++){const q=I(d,m+3*U,3);D.Q[1+(D.X[U]<<1)]=q,q>V&&(V=q)}m+=3*O,T(D.Q,V),L(D.Q,V,D.u),v=D.w,C=D.d,m=P(D.u,(1<<V)-1,A+R,d,m,D.v);const j=y.V(D.v,0,A,D.C);M=(1<<j)-1;const J=y.V(D.v,A,R,D.D);b=(1<<J)-1,T(D.C,j),L(D.C,j,v),T(D.D,J),L(D.D,J,C)}for(;;){const V=v[z(d,m)&M];m+=15&V;const j=V>>>4;if(!(j>>>8))f[S++]=j;else{if(j==256)break;{let J=S+j-254;if(j>264){const re=D.q[j-257];J=S+(re>>>3)+I(d,m,7&re),m+=7&re}const q=C[z(d,m)&b];m+=15&q;const X=q>>>4,Q=D.c[X],W=(Q>>>4)+E(d,m,15&Q);for(m+=15&Q;S<J;)f[S]=f[S++-W],f[S]=f[S++-W],f[S]=f[S++-W],f[S]=f[S++-W];S=J}}}}else{7&m&&(m+=8-(7&m));const V=4+(m>>>3),j=d[V-4]|d[V-3]<<8;N&&(f=h.H.W(f,S+j)),f.set(new g(d.buffer,d.byteOffset+V,j),S),m=V+j<<3,S+=j}return f.length==S?f:f.slice(0,S)},h.H.W=function(d,f){const g=d.length;if(f<=g)return d;const v=new Uint8Array(g<<1);return v.set(d,0),v},h.H.R=function(d,f,g,v,C,x){const w=h.H.e,A=h.H.Z;let R=0;for(;R<g;){const O=d[A(v,C)&f];C+=15&O;const M=O>>>4;if(M<=15)x[R]=M,R++;else{let b=0,S=0;M==16?(S=3+w(v,C,2),C+=2,b=x[R-1]):M==17?(S=3+w(v,C,3),C+=3):M==18&&(S=11+w(v,C,7),C+=7);const m=R+S;for(;R<m;)x[R]=b,R++}}return C},h.H.V=function(d,f,g,v){let C=0,x=0;const w=v.length>>>1;for(;x<g;){const A=d[x+f];v[x<<1]=0,v[1+(x<<1)]=A,A>C&&(C=A),x++}for(;x<w;)v[x<<1]=0,v[1+(x<<1)]=0,x++;return C},h.H.n=function(d,f){const g=h.H.m,v=d.length;let C,x,w,A;const R=g.j;for(var O=0;O<=f;O++)R[O]=0;for(O=1;O<v;O+=2)R[d[O]]++;const M=g.K;for(C=0,R[0]=0,x=1;x<=f;x++)C=C+R[x-1]<<1,M[x]=C;for(w=0;w<v;w+=2)A=d[w+1],A!=0&&(d[w]=M[A],M[A]++)},h.H.A=function(d,f,g){const v=d.length,C=h.H.m.r;for(let x=0;x<v;x+=2)if(d[x+1]!=0){const w=x>>1,A=d[x+1],R=w<<4|A,O=f-A;let M=d[x]<<O;const b=M+(1<<O);for(;M!=b;)g[C[M]>>>15-f]=R,M++}},h.H.l=function(d,f){const g=h.H.m.r,v=15-f;for(let C=0;C<d.length;C+=2){const x=d[C]<<f-d[C+1];d[C]=g[x]>>>v}},h.H.M=function(d,f,g){g<<=7&f;const v=f>>>3;d[v]|=g,d[v+1]|=g>>>8},h.H.I=function(d,f,g){g<<=7&f;const v=f>>>3;d[v]|=g,d[v+1]|=g>>>8,d[v+2]|=g>>>16},h.H.e=function(d,f,g){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<g)-1},h.H.b=function(d,f,g){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<g)-1},h.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},h.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},h.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=h.H.m;for(var f=0;f<32768;f++){let v=f;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,d.r[f]=(v>>>16|v<<16)>>>17}function g(v,C,x){for(;C--!=0;)v.push(0,x)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];g(d._,144,8),g(d._,112,9),g(d._,24,7),g(d._,8,8),h.H.n(d._,9),h.H.A(d._,9,d.J),h.H.l(d._,9),g(d.$,32,5),h.H.n(d.$,5),h.H.A(d.$,5,d.h),h.H.l(d.$,5),g(d.Q,19,0),g(d.C,286,0),g(d.D,30,0),g(d.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,d,f,g,v){let C=s(d);const x=Math.ceil(g*C/8);let w,A;C=Math.ceil(C/8);let R=h[f],O=0;if(R>1&&(h[f]=[0,0,1][R-2]),R==3)for(O=C;O<x;O++)h[O+1]=h[O+1]+(h[O+1-C]>>>1)&255;for(let M=0;M<v;M++)if(w=f+M*x,A=w+M+1,R=h[A-1],O=0,R==0)for(;O<x;O++)h[w+O]=h[A+O];else if(R==1){for(;O<C;O++)h[w+O]=h[A+O];for(;O<x;O++)h[w+O]=h[A+O]+h[w+O-C]}else if(R==2)for(;O<x;O++)h[w+O]=h[A+O]+h[w+O-x];else if(R==3){for(;O<C;O++)h[w+O]=h[A+O]+(h[w+O-x]>>>1);for(;O<x;O++)h[w+O]=h[A+O]+(h[w+O-x]+h[w+O-C]>>>1)}else{for(;O<C;O++)h[w+O]=h[A+O]+a(0,h[w+O-x],0);for(;O<x;O++)h[w+O]=h[A+O]+a(h[w+O-C],h[w+O-x],h[w+O-C-x])}return h}function a(h,d,f){const g=h+d-f,v=g-h,C=g-d,x=g-f;return v*v<=C*C&&v*v<=x*x?h:C*C<=x*x?d:f}function u(h,d,f){f.width=t.readUint(h,d),d+=4,f.height=t.readUint(h,d),d+=4,f.depth=h[d],d++,f.ctype=h[d],d++,f.compress=h[d],d++,f.filter=h[d],d++,f.interlace=h[d],d++}function c(h,d,f,g,v,C,x,w,A){const R=Math.min(d,v),O=Math.min(f,C);let M=0,b=0;for(let z=0;z<O;z++)for(let D=0;D<R;D++)if(x>=0&&w>=0?(M=z*d+D<<2,b=(w+z)*v+x+D<<2):(M=(-w+z)*d-x+D<<2,b=z*v+D<<2),A==0)g[b]=h[M],g[b+1]=h[M+1],g[b+2]=h[M+2],g[b+3]=h[M+3];else if(A==1){var S=h[M+3]*.00392156862745098,m=h[M]*S,y=h[M+1]*S,E=h[M+2]*S,I=g[b+3]*(1/255),P=g[b]*I,T=g[b+1]*I,L=g[b+2]*I;const N=1-S,U=S+I*N,V=U==0?0:1/U;g[b+3]=255*U,g[b+0]=(m+P*N)*V,g[b+1]=(y+T*N)*V,g[b+2]=(E+L*N)*V}else if(A==2)S=h[M+3],m=h[M],y=h[M+1],E=h[M+2],I=g[b+3],P=g[b],T=g[b+1],L=g[b+2],S==I&&m==P&&y==T&&E==L?(g[b]=0,g[b+1]=0,g[b+2]=0,g[b+3]=0):(g[b]=m,g[b+1]=y,g[b+2]=E,g[b+3]=S);else if(A==3){if(S=h[M+3],m=h[M],y=h[M+1],E=h[M+2],I=g[b+3],P=g[b],T=g[b+1],L=g[b+2],S==I&&m==P&&y==T&&E==L)continue;if(S<220&&I>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let g=8;const v=t,C=v.readUshort,x=v.readUint,w={tabs:{},frames:[]},A=new Uint8Array(f.length);let R,O=0,M=0;const b=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(f[S]!=b[S])throw"The input is not a PNG file!";for(;g<f.length;){const z=v.readUint(f,g);g+=4;const D=v.readASCII(f,g,4);if(g+=4,D=="IHDR")u(f,g,w);else if(D=="iCCP"){for(var m=g;f[m]!=0;)m++;v.readASCII(f,g,m-g),f[m+1];const N=f.slice(m+2,g+z);let U=null;try{U=r(N)}catch{U=i(N)}w.tabs[D]=U}else if(D=="CgBI")w.tabs[D]=f.slice(g,g+4);else if(D=="IDAT"){for(S=0;S<z;S++)A[O+S]=f[g+S];O+=z}else if(D=="acTL")w.tabs[D]={num_frames:x(f,g),num_plays:x(f,g+4)},R=new Uint8Array(f.length);else if(D=="fcTL"){M!=0&&((L=w.frames[w.frames.length-1]).data=n(w,R.slice(0,M),L.rect.width,L.rect.height),M=0);const N={x:x(f,g+12),y:x(f,g+16),width:x(f,g+4),height:x(f,g+8)};let U=C(f,g+22);U=C(f,g+20)/(U==0?100:U);const V={rect:N,delay:Math.round(1e3*U),dispose:f[g+24],blend:f[g+25]};w.frames.push(V)}else if(D=="fdAT"){for(S=0;S<z-4;S++)R[M+S]=f[g+S+4];M+=z-4}else if(D=="pHYs")w.tabs[D]=[v.readUint(f,g),v.readUint(f,g+4),f[g+8]];else if(D=="cHRM")for(w.tabs[D]=[],S=0;S<8;S++)w.tabs[D].push(v.readUint(f,g+4*S));else if(D=="tEXt"||D=="zTXt"){w.tabs[D]==null&&(w.tabs[D]={});var y=v.nextZero(f,g),E=v.readASCII(f,g,y-g),I=g+z-y-1;if(D=="tEXt")T=v.readASCII(f,y+1,I);else{var P=r(f.slice(y+2,y+2+I));T=v.readUTF8(P,0,P.length)}w.tabs[D][E]=T}else if(D=="iTXt"){w.tabs[D]==null&&(w.tabs[D]={}),y=0,m=g,y=v.nextZero(f,m),E=v.readASCII(f,m,y-m);const N=f[m=y+1];var T;f[m+1],m+=2,y=v.nextZero(f,m),v.readASCII(f,m,y-m),m=y+1,y=v.nextZero(f,m),v.readUTF8(f,m,y-m),I=z-((m=y+1)-g),N==0?T=v.readUTF8(f,m,I):(P=r(f.slice(m,m+I)),T=v.readUTF8(P,0,P.length)),w.tabs[D][E]=T}else if(D=="PLTE")w.tabs[D]=v.readBytes(f,g,z);else if(D=="hIST"){const N=w.tabs.PLTE.length/3;for(w.tabs[D]=[],S=0;S<N;S++)w.tabs[D].push(C(f,g+2*S))}else if(D=="tRNS")w.ctype==3?w.tabs[D]=v.readBytes(f,g,z):w.ctype==0?w.tabs[D]=C(f,g):w.ctype==2&&(w.tabs[D]=[C(f,g),C(f,g+2),C(f,g+4)]);else if(D=="gAMA")w.tabs[D]=v.readUint(f,g)/1e5;else if(D=="sRGB")w.tabs[D]=f[g];else if(D=="bKGD")w.ctype==0||w.ctype==4?w.tabs[D]=[C(f,g)]:w.ctype==2||w.ctype==6?w.tabs[D]=[C(f,g),C(f,g+2),C(f,g+4)]:w.ctype==3&&(w.tabs[D]=f[g]);else if(D=="IEND")break;g+=z,v.readUint(f,g),g+=4}var L;return M!=0&&((L=w.frames[w.frames.length-1]).data=n(w,R.slice(0,M),L.rect.width,L.rect.height)),w.data=n(w,A,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(d){const f=d.width,g=d.height;if(d.tabs.acTL==null)return[e(d.data,f,g,d).buffer];const v=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const C=f*g*4,x=new Uint8Array(C),w=new Uint8Array(C),A=new Uint8Array(C);for(let O=0;O<d.frames.length;O++){const M=d.frames[O],b=M.rect.x,S=M.rect.y,m=M.rect.width,y=M.rect.height,E=e(M.data,m,y,d);if(O!=0)for(var R=0;R<C;R++)A[R]=x[R];if(M.blend==0?c(E,m,y,x,f,g,b,S,0):M.blend==1&&c(E,m,y,x,f,g,b,S,1),v.push(x.buffer.slice(0)),M.dispose!=0){if(M.dispose==1)c(w,m,y,x,f,g,b,S,0);else if(M.dispose==2)for(R=0;R<C;R++)x[R]=A[R]}}return v},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=Pn,{_bin:e}=Pn,n=Pn._paeth;var r={table:function(){const m=new Uint32Array(256);for(let y=0;y<256;y++){let E=y;for(let I=0;I<8;I++)1&E?E=3988292384^E>>>1:E>>>=1;m[y]=E}return m}(),update(m,y,E,I){for(let P=0;P<I;P++)m=r.table[255&(m^y[E+P])]^m>>>8;return m},crc:(m,y,E)=>4294967295^r.update(4294967295,m,y,E)};function i(m,y,E,I){y[E]+=m[0]*I>>4,y[E+1]+=m[1]*I>>4,y[E+2]+=m[2]*I>>4,y[E+3]+=m[3]*I>>4}function s(m){return Math.max(0,Math.min(255,m))}function o(m,y){const E=m[0]-y[0],I=m[1]-y[1],P=m[2]-y[2],T=m[3]-y[3];return E*E+I*I+P*P+T*T}function a(m,y,E,I,P,T,L){L==null&&(L=1);const z=I.length,D=[];for(var N=0;N<z;N++){const W=I[N];D.push([W>>>0&255,W>>>8&255,W>>>16&255,W>>>24&255])}for(N=0;N<z;N++){let W=4294967295;for(var U=0,V=0;V<z;V++){var j=o(D[N],D[V]);V!=N&&j<W&&(W=j,U=V)}}const J=new Uint32Array(P.buffer),q=new Int16Array(y*E*4),X=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(N=0;N<X.length;N++)X[N]=255*((X[N]+.5)/16-.5);for(let W=0;W<E;W++)for(let re=0;re<y;re++){var Q;N=4*(W*y+re),L!=2?Q=[s(m[N]+q[N]),s(m[N+1]+q[N+1]),s(m[N+2]+q[N+2]),s(m[N+3]+q[N+3])]:(j=X[4*(3&W)+(3&re)],Q=[s(m[N]+j),s(m[N+1]+j),s(m[N+2]+j),s(m[N+3]+j)]),U=0;let de=16777215;for(V=0;V<z;V++){const _e=o(Q,D[V]);_e<de&&(de=_e,U=V)}const ve=D[U],me=[Q[0]-ve[0],Q[1]-ve[1],Q[2]-ve[2],Q[3]-ve[3]];L==1&&(re!=y-1&&i(me,q,N+4,7),W!=E-1&&(re!=0&&i(me,q,N+4*y-4,3),i(me,q,N+4*y,5),re!=y-1&&i(me,q,N+4*y+4,1))),T[N>>2]=U,J[N>>2]=I[U]}}function u(m,y,E,I,P){P==null&&(P={});const{crc:T}=r,L=e.writeUint,z=e.writeUshort,D=e.writeASCII;let N=8;const U=m.frames.length>1;let V,j=!1,J=33+(U?20:0);if(P.sRGB!=null&&(J+=13),P.pHYs!=null&&(J+=21),P.iCCP!=null&&(V=pako.deflate(P.iCCP),J+=21+V.length+4),m.ctype==3){for(var q=m.plte.length,X=0;X<q;X++)m.plte[X]>>>24!=255&&(j=!0);J+=8+3*q+4+(j?8+1*q+4:0)}for(var Q=0;Q<m.frames.length;Q++)U&&(J+=38),J+=(ve=m.frames[Q]).cimg.length+12,Q!=0&&(J+=4);J+=12;const W=new Uint8Array(J),re=[137,80,78,71,13,10,26,10];for(X=0;X<8;X++)W[X]=re[X];if(L(W,N,13),N+=4,D(W,N,"IHDR"),N+=4,L(W,N,y),N+=4,L(W,N,E),N+=4,W[N]=m.depth,N++,W[N]=m.ctype,N++,W[N]=0,N++,W[N]=0,N++,W[N]=0,N++,L(W,N,T(W,N-17,17)),N+=4,P.sRGB!=null&&(L(W,N,1),N+=4,D(W,N,"sRGB"),N+=4,W[N]=P.sRGB,N++,L(W,N,T(W,N-5,5)),N+=4),P.iCCP!=null){const me=13+V.length;L(W,N,me),N+=4,D(W,N,"iCCP"),N+=4,D(W,N,"ICC profile"),N+=11,N+=2,W.set(V,N),N+=V.length,L(W,N,T(W,N-(me+4),me+4)),N+=4}if(P.pHYs!=null&&(L(W,N,9),N+=4,D(W,N,"pHYs"),N+=4,L(W,N,P.pHYs[0]),N+=4,L(W,N,P.pHYs[1]),N+=4,W[N]=P.pHYs[2],N++,L(W,N,T(W,N-13,13)),N+=4),U&&(L(W,N,8),N+=4,D(W,N,"acTL"),N+=4,L(W,N,m.frames.length),N+=4,L(W,N,P.loop!=null?P.loop:0),N+=4,L(W,N,T(W,N-12,12)),N+=4),m.ctype==3){for(L(W,N,3*(q=m.plte.length)),N+=4,D(W,N,"PLTE"),N+=4,X=0;X<q;X++){const me=3*X,_e=m.plte[X],Re=255&_e,Fe=_e>>>8&255,Sn=_e>>>16&255;W[N+me+0]=Re,W[N+me+1]=Fe,W[N+me+2]=Sn}if(N+=3*q,L(W,N,T(W,N-3*q-4,3*q+4)),N+=4,j){for(L(W,N,q),N+=4,D(W,N,"tRNS"),N+=4,X=0;X<q;X++)W[N+X]=m.plte[X]>>>24&255;N+=q,L(W,N,T(W,N-q-4,q+4)),N+=4}}let de=0;for(Q=0;Q<m.frames.length;Q++){var ve=m.frames[Q];U&&(L(W,N,26),N+=4,D(W,N,"fcTL"),N+=4,L(W,N,de++),N+=4,L(W,N,ve.rect.width),N+=4,L(W,N,ve.rect.height),N+=4,L(W,N,ve.rect.x),N+=4,L(W,N,ve.rect.y),N+=4,z(W,N,I[Q]),N+=2,z(W,N,1e3),N+=2,W[N]=ve.dispose,N++,W[N]=ve.blend,N++,L(W,N,T(W,N-30,30)),N+=4);const me=ve.cimg;L(W,N,(q=me.length)+(Q==0?0:4)),N+=4;const _e=N;D(W,N,Q==0?"IDAT":"fdAT"),N+=4,Q!=0&&(L(W,N,de++),N+=4),W.set(me,N),N+=q,L(W,N,T(W,_e,N-_e)),N+=4}return L(W,N,0),N+=4,D(W,N,"IEND"),N+=4,L(W,N,T(W,N-4,4)),N+=4,W.buffer}function c(m,y,E){for(let I=0;I<m.frames.length;I++){const P=m.frames[I];P.rect.width;const T=P.rect.height,L=new Uint8Array(T*P.bpl+T);P.cimg=g(P.img,T,P.bpp,P.bpl,L,y,E)}}function h(m,y,E,I,P){const T=P[0],L=P[1],z=P[2],D=P[3],N=P[4],U=P[5];let V=6,j=8,J=255;for(var q=0;q<m.length;q++){const it=new Uint8Array(m[q]);for(var X=it.length,Q=0;Q<X;Q+=4)J&=it[Q+3]}const W=J!=255,re=function(Pe,Ie,Ze,st,je,Vt){const Ve=[];for(var we=0;we<Pe.length;we++){const lt=new Uint8Array(Pe[we]),tn=new Uint32Array(lt.buffer);var It;let ut=0,pn=0,nn=Ie,An=Ze,vo=st?1:0;if(we!=0){const sh=Vt||st||we==1||Ve[we-2].dispose!=0?1:2;let Ti=0,wo=1e9;for(let kr=0;kr<sh;kr++){var xe=new Uint8Array(Pe[we-1-kr]);const Ii=new Uint32Array(Pe[we-1-kr]);let mn=Ie,gn=Ze,Ht=-1,xr=-1;for(let Fn=0;Fn<Ze;Fn++)for(let rn=0;rn<Ie;rn++)tn[Qe=Fn*Ie+rn]!=Ii[Qe]&&(rn<mn&&(mn=rn),rn>Ht&&(Ht=rn),Fn<gn&&(gn=Fn),Fn>xr&&(xr=Fn));Ht==-1&&(mn=gn=Ht=xr=0),je&&((1&mn)==1&&mn--,(1&gn)==1&&gn--);const Si=(Ht-mn+1)*(xr-gn+1);Si<wo&&(wo=Si,Ti=kr,ut=mn,pn=gn,nn=Ht-mn+1,An=xr-gn+1)}xe=new Uint8Array(Pe[we-1-Ti]),Ti==1&&(Ve[we-1].dispose=2),It=new Uint8Array(nn*An*4),t(xe,Ie,Ze,It,nn,An,-ut,-pn,0),vo=t(lt,Ie,Ze,It,nn,An,-ut,-pn,3)?1:0,vo==1?f(lt,Ie,Ze,It,{x:ut,y:pn,width:nn,height:An}):t(lt,Ie,Ze,It,nn,An,-ut,-pn,0)}else It=lt.slice(0);Ve.push({rect:{x:ut,y:pn,width:nn,height:An},img:It,blend:vo,dispose:0})}if(st)for(we=0;we<Ve.length;we++){if((Un=Ve[we]).blend==1)continue;const lt=Un.rect,tn=Ve[we-1].rect,ut=Math.min(lt.x,tn.x),pn=Math.min(lt.y,tn.y),nn={x:ut,y:pn,width:Math.max(lt.x+lt.width,tn.x+tn.width)-ut,height:Math.max(lt.y+lt.height,tn.y+tn.height)-pn};Ve[we-1].dispose=1,we-1!=0&&d(Pe,Ie,Ze,Ve,we-1,nn,je),d(Pe,Ie,Ze,Ve,we,nn,je)}let et=0;if(Pe.length!=1)for(var Qe=0;Qe<Ve.length;Qe++){var Un;et+=(Un=Ve[Qe]).rect.width*Un.rect.height}return Ve}(m,y,E,T,L,z),de={},ve=[],me=[];if(I!=0){const it=[];for(Q=0;Q<re.length;Q++)it.push(re[Q].img.buffer);const Pe=function(je){let Vt=0;for(var Ve=0;Ve<je.length;Ve++)Vt+=je[Ve].byteLength;const we=new Uint8Array(Vt);let It=0;for(Ve=0;Ve<je.length;Ve++){const xe=new Uint8Array(je[Ve]),et=xe.length;for(let Qe=0;Qe<et;Qe+=4){let Un=xe[Qe],lt=xe[Qe+1],tn=xe[Qe+2];const ut=xe[Qe+3];ut==0&&(Un=lt=tn=0),we[It+Qe]=Un,we[It+Qe+1]=lt,we[It+Qe+2]=tn,we[It+Qe+3]=ut}It+=et}return we.buffer}(it),Ie=C(Pe,I);for(Q=0;Q<Ie.plte.length;Q++)ve.push(Ie.plte[Q].est.rgba);let Ze=0;for(Q=0;Q<re.length;Q++){const st=(Re=re[Q]).img.length;var _e=new Uint8Array(Ie.inds.buffer,Ze>>2,st>>2);me.push(_e);const je=new Uint8Array(Ie.abuf,Ze,st);U&&a(Re.img,Re.rect.width,Re.rect.height,ve,je,_e),Re.img.set(je),Ze+=st}}else for(q=0;q<re.length;q++){var Re=re[q];const it=new Uint32Array(Re.img.buffer);var Fe=Re.rect.width;for(X=it.length,_e=new Uint8Array(X),me.push(_e),Q=0;Q<X;Q++){const Pe=it[Q];if(Q!=0&&Pe==it[Q-1])_e[Q]=_e[Q-1];else if(Q>Fe&&Pe==it[Q-Fe])_e[Q]=_e[Q-Fe];else{let Ie=de[Pe];if(Ie==null&&(de[Pe]=Ie=ve.length,ve.push(Pe),ve.length>=300))break;_e[Q]=Ie}}}const Sn=ve.length;for(Sn<=256&&N==0&&(j=Sn<=2?1:Sn<=4?2:Sn<=16?4:8,j=Math.max(j,D)),q=0;q<re.length;q++){(Re=re[q]).rect.x,Re.rect.y,Fe=Re.rect.width;const it=Re.rect.height;let Pe=Re.img;new Uint32Array(Pe.buffer);let Ie=4*Fe,Ze=4;if(Sn<=256&&N==0){Ie=Math.ceil(j*Fe/8);var Wt=new Uint8Array(Ie*it);const st=me[q];for(let je=0;je<it;je++){Q=je*Ie;const Vt=je*Fe;if(j==8)for(var Ce=0;Ce<Fe;Ce++)Wt[Q+Ce]=st[Vt+Ce];else if(j==4)for(Ce=0;Ce<Fe;Ce++)Wt[Q+(Ce>>1)]|=st[Vt+Ce]<<4-4*(1&Ce);else if(j==2)for(Ce=0;Ce<Fe;Ce++)Wt[Q+(Ce>>2)]|=st[Vt+Ce]<<6-2*(3&Ce);else if(j==1)for(Ce=0;Ce<Fe;Ce++)Wt[Q+(Ce>>3)]|=st[Vt+Ce]<<7-1*(7&Ce)}Pe=Wt,V=3,Ze=1}else if(W==0&&re.length==1){Wt=new Uint8Array(Fe*it*3);const st=Fe*it;for(Q=0;Q<st;Q++){const je=3*Q,Vt=4*Q;Wt[je]=Pe[Vt],Wt[je+1]=Pe[Vt+1],Wt[je+2]=Pe[Vt+2]}Pe=Wt,V=2,Ze=3,Ie=3*Fe}Re.img=Pe,Re.bpl=Ie,Re.bpp=Ze}return{ctype:V,depth:j,plte:ve,frames:re}}function d(m,y,E,I,P,T,L){const z=Uint8Array,D=Uint32Array,N=new z(m[P-1]),U=new D(m[P-1]),V=P+1<m.length?new z(m[P+1]):null,j=new z(m[P]),J=new D(j.buffer);let q=y,X=E,Q=-1,W=-1;for(let de=0;de<T.height;de++)for(let ve=0;ve<T.width;ve++){const me=T.x+ve,_e=T.y+de,Re=_e*y+me,Fe=J[Re];Fe==0||I[P-1].dispose==0&&U[Re]==Fe&&(V==null||V[4*Re+3]!=0)||(me<q&&(q=me),me>Q&&(Q=me),_e<X&&(X=_e),_e>W&&(W=_e))}Q==-1&&(q=X=Q=W=0),L&&((1&q)==1&&q--,(1&X)==1&&X--),T={x:q,y:X,width:Q-q+1,height:W-X+1};const re=I[P];re.rect=T,re.blend=1,re.img=new Uint8Array(T.width*T.height*4),I[P-1].dispose==0?(t(N,y,E,re.img,T.width,T.height,-T.x,-T.y,0),f(j,y,E,re.img,T)):t(j,y,E,re.img,T.width,T.height,-T.x,-T.y,0)}function f(m,y,E,I,P){t(m,y,E,I,P.width,P.height,-P.x,-P.y,2)}function g(m,y,E,I,P,T,L){const z=[];let D,N=[0,1,2,3,4];T!=-1?N=[T]:(y*I>5e5||E==1)&&(N=[0]),L&&(D={level:0});const U=ZD;for(var V=0;V<N.length;V++){for(let q=0;q<y;q++)v(P,m,q,I,E,N[V]);z.push(U.deflate(P,D))}let j,J=1e9;for(V=0;V<z.length;V++)z[V].length<J&&(j=V,J=z[V].length);return z[j]}function v(m,y,E,I,P,T){const L=E*I;let z=L+E;if(m[z]=T,z++,T==0)if(I<500)for(var D=0;D<I;D++)m[z+D]=y[L+D];else m.set(new Uint8Array(y.buffer,L,I),z);else if(T==1){for(D=0;D<P;D++)m[z+D]=y[L+D];for(D=P;D<I;D++)m[z+D]=y[L+D]-y[L+D-P]+256&255}else if(E==0){for(D=0;D<P;D++)m[z+D]=y[L+D];if(T==2)for(D=P;D<I;D++)m[z+D]=y[L+D];if(T==3)for(D=P;D<I;D++)m[z+D]=y[L+D]-(y[L+D-P]>>1)+256&255;if(T==4)for(D=P;D<I;D++)m[z+D]=y[L+D]-n(y[L+D-P],0,0)+256&255}else{if(T==2)for(D=0;D<I;D++)m[z+D]=y[L+D]+256-y[L+D-I]&255;if(T==3){for(D=0;D<P;D++)m[z+D]=y[L+D]+256-(y[L+D-I]>>1)&255;for(D=P;D<I;D++)m[z+D]=y[L+D]+256-(y[L+D-I]+y[L+D-P]>>1)&255}if(T==4){for(D=0;D<P;D++)m[z+D]=y[L+D]+256-n(0,y[L+D-I],0)&255;for(D=P;D<I;D++)m[z+D]=y[L+D]+256-n(y[L+D-P],y[L+D-I],y[L+D-P-I])&255}}}function C(m,y){const E=new Uint8Array(m),I=E.slice(0),P=new Uint32Array(I.buffer),T=x(I,y),L=T[0],z=T[1],D=E.length,N=new Uint8Array(D>>2);let U;if(E.length<2e7)for(var V=0;V<D;V+=4)U=w(L,j=E[V]*(1/255),J=E[V+1]*(1/255),q=E[V+2]*(1/255),X=E[V+3]*(1/255)),N[V>>2]=U.ind,P[V>>2]=U.est.rgba;else for(V=0;V<D;V+=4){var j=E[V]*.00392156862745098,J=E[V+1]*(1/255),q=E[V+2]*(1/255),X=E[V+3]*(1/255);for(U=L;U.left;)U=A(U.est,j,J,q,X)<=0?U.left:U.right;N[V>>2]=U.ind,P[V>>2]=U.est.rgba}return{abuf:I.buffer,inds:N,plte:z}}function x(m,y,E){E==null&&(E=1e-4);const I=new Uint32Array(m.buffer),P={i0:0,i1:m.length,bst:null,est:null,tdst:0,left:null,right:null};P.bst=M(m,P.i0,P.i1),P.est=b(P.bst);const T=[P];for(;T.length<y;){let z=0,D=0;for(var L=0;L<T.length;L++)T[L].est.L>z&&(z=T[L].est.L,D=L);if(z<E)break;const N=T[D],U=R(m,I,N.i0,N.i1,N.est.e,N.est.eMq255);if(N.i0>=U||N.i1<=U){N.est.L=0;continue}const V={i0:N.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};V.bst=M(m,V.i0,V.i1),V.est=b(V.bst);const j={i0:U,i1:N.i1,bst:null,est:null,tdst:0,left:null,right:null};for(j.bst={R:[],m:[],N:N.bst.N-V.bst.N},L=0;L<16;L++)j.bst.R[L]=N.bst.R[L]-V.bst.R[L];for(L=0;L<4;L++)j.bst.m[L]=N.bst.m[L]-V.bst.m[L];j.est=b(j.bst),N.left=V,N.right=j,T[D]=V,T.push(j)}for(T.sort((z,D)=>D.bst.N-z.bst.N),L=0;L<T.length;L++)T[L].ind=L;return[P,T]}function w(m,y,E,I,P){if(m.left==null)return m.tdst=function(V,j,J,q,X){const Q=j-V[0],W=J-V[1],re=q-V[2],de=X-V[3];return Q*Q+W*W+re*re+de*de}(m.est.q,y,E,I,P),m;const T=A(m.est,y,E,I,P);let L=m.left,z=m.right;T>0&&(L=m.right,z=m.left);const D=w(L,y,E,I,P);if(D.tdst<=T*T)return D;const N=w(z,y,E,I,P);return N.tdst<D.tdst?N:D}function A(m,y,E,I,P){const{e:T}=m;return T[0]*y+T[1]*E+T[2]*I+T[3]*P-m.eMq}function R(m,y,E,I,P,T){for(I-=4;E<I;){for(;O(m,E,P)<=T;)E+=4;for(;O(m,I,P)>T;)I-=4;if(E>=I)break;const L=y[E>>2];y[E>>2]=y[I>>2],y[I>>2]=L,E+=4,I-=4}for(;O(m,E,P)>T;)E-=4;return E+4}function O(m,y,E){return m[y]*E[0]+m[y+1]*E[1]+m[y+2]*E[2]+m[y+3]*E[3]}function M(m,y,E){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[0,0,0,0],T=E-y>>2;for(let L=y;L<E;L+=4){const z=m[L]*.00392156862745098,D=m[L+1]*(1/255),N=m[L+2]*(1/255),U=m[L+3]*(1/255);P[0]+=z,P[1]+=D,P[2]+=N,P[3]+=U,I[0]+=z*z,I[1]+=z*D,I[2]+=z*N,I[3]+=z*U,I[5]+=D*D,I[6]+=D*N,I[7]+=D*U,I[10]+=N*N,I[11]+=N*U,I[15]+=U*U}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:P,N:T}}function b(m){const{R:y}=m,{m:E}=m,{N:I}=m,P=E[0],T=E[1],L=E[2],z=E[3],D=I==0?0:1/I,N=[y[0]-P*P*D,y[1]-P*T*D,y[2]-P*L*D,y[3]-P*z*D,y[4]-T*P*D,y[5]-T*T*D,y[6]-T*L*D,y[7]-T*z*D,y[8]-L*P*D,y[9]-L*T*D,y[10]-L*L*D,y[11]-L*z*D,y[12]-z*P*D,y[13]-z*T*D,y[14]-z*L*D,y[15]-z*z*D],U=N,V=S;let j=[Math.random(),Math.random(),Math.random(),Math.random()],J=0,q=0;if(I!=0)for(let Q=0;Q<16&&(j=V.multVec(U,j),q=Math.sqrt(V.dot(j,j)),j=V.sml(1/q,j),!(Q!=0&&Math.abs(q-J)<1e-9));Q++)J=q;const X=[P*D,T*D,L*D,z*D];return{Cov:N,q:X,e:j,L:J,eMq255:V.dot(V.sml(255,X),j),eMq:V.dot(j,X),rgba:(Math.round(255*X[3])<<24|Math.round(255*X[2])<<16|Math.round(255*X[1])<<8|Math.round(255*X[0])<<0)>>>0}}var S={multVec:(m,y)=>[m[0]*y[0]+m[1]*y[1]+m[2]*y[2]+m[3]*y[3],m[4]*y[0]+m[5]*y[1]+m[6]*y[2]+m[7]*y[3],m[8]*y[0]+m[9]*y[1]+m[10]*y[2]+m[11]*y[3],m[12]*y[0]+m[13]*y[1]+m[14]*y[2]+m[15]*y[3]],dot:(m,y)=>m[0]*y[0]+m[1]*y[1]+m[2]*y[2]+m[3]*y[3],sml:(m,y)=>[m*y[0],m*y[1],m*y[2],m*y[3]]};Pn.encode=function(y,E,I,P,T,L,z){P==null&&(P=0),z==null&&(z=!1);const D=h(y,E,I,P,[!1,!1,!1,0,z,!1]);return c(D,-1),u(D,E,I,T,L)},Pn.encodeLL=function(y,E,I,P,T,L,z,D){const N={ctype:0+(P==1?0:2)+(T==0?0:4),depth:L,frames:[]},U=(P+T)*L,V=U*E;for(let j=0;j<y.length;j++)N.frames.push({rect:{x:0,y:0,width:E,height:I},img:new Uint8Array(y[j]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(V/8)});return c(N,0,!0),u(N,E,I,z,D)},Pn.encode.compress=h,Pn.encode.dither=a,Pn.quantize=C,Pn.quantize.getKDtree=x,Pn.quantize.getNearest=w})();const qT={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,u=a*r,c=122+u,h=new ArrayBuffer(c),d=new DataView(h),f=1<<20;let g,v,C,x,w=f,A=0,R=0,O=0;function M(m){d.setUint16(R,m,!0),R+=2}function b(m){d.setUint32(R,m,!0),R+=4}function S(m){R+=m}M(19778),b(c),S(4),b(122),b(108),b(n),b(-r>>>0),M(1),M(32),b(3),b(u),b(2835),b(2835),S(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function m(){for(;A<r&&w>0;){for(x=122+A*a,g=0;g<i;)w--,v=o[O++],C=v>>>24,d.setUint32(x+g,v<<8|C),g+=4;A++}O<o.length?(w=f,setTimeout(m,qT._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Kt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},eM={[Kt.CHROME]:16384,[Kt.FIREFOX]:11180,[Kt.DESKTOP_SAFARI]:16384,[Kt.IE]:8192,[Kt.IOS]:4096,[Kt.ETC]:8192};const xm=typeof window<"u",GT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,fc=xm&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),tM=(xm||GT)&&(fc&&fc.getOriginalSymbol(window,"File")||typeof File<"u"&&File),KT=(xm||GT)&&(fc&&fc.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Nm(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const u=new Uint8Array(a);for(;a--;)u[a]=o.charCodeAt(a);const c=new Blob([u],{type:s});c.name=e,c.lastModified=n,r(c)})}function QT(t){return new Promise((e,n)=>{const r=new KT;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function YT(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Li(){if(Li.cachedResult!==void 0)return Li.cachedResult;let t=Kt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Kt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Kt.IOS:/Safari/i.test(e)?t=Kt.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Kt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Kt.IE),Li.cachedResult=t,Li.cachedResult}function XT(t,e){const n=Li(),r=eM[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const u=(r+i)/2,c=(r+s)/2;u<c?(s=c,i=c*a):(s=u*a,i=u),o=i*s}return{width:i,height:s}}function ih(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function JT(t,e){const{width:n,height:r}=XT(t.width,t.height),[i,s]=ih(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function _u(){return _u.cachedResult!==void 0||(_u.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),_u.cachedResult}function pc(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=JT(i,e.fileType||t.type),n([i,s])}catch(u){return r(u)}},a=function(u){try{var c=function(h){try{throw h}catch(d){return r(d)}};try{let h;return QT(t).then(function(d){try{return h=d,YT(h).then(function(f){try{return i=f,function(){try{return o()}catch(g){return r(g)}}()}catch(g){return c(g)}},c)}catch(f){return c(f)}},c)}catch(h){c(h)}}catch(h){return r(h)}};try{if(_u()||[Kt.DESKTOP_SAFARI,Kt.MOBILE_SAFARI].includes(Li()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(u){try{return i=u,o()}catch{return a()}},a)}catch{a()}})}function mc(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let d,f,g;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),g=Pn.encode([f.buffer],t.width,t.height,4096*i),a=new Blob([g],{type:e}),a.name=n,a.lastModified=r,u.call(this)}{let d=function(){return u.call(this)};var c=d;if(e==="image/bmp")return new Promise(f=>qT.toBlob(t,f)).then((function(f){try{return a=f,a.name=n,a.lastModified=r,d.call(this)}catch(g){return o(g)}}).bind(this),o);{let f=function(){return d.call(this)};var h=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(g){try{return a=g,a.name=n,a.lastModified=r,f.call(this)}catch(v){return o(v)}}).bind(this),o);{let g;return g=t.toDataURL(e,i),Nm(g,n,r).then((function(v){try{return a=v,f.call(this)}catch(C){return o(C)}}).bind(this),o)}}}function u(){return s(a)}})}function $n(t){t.width=0,t.height=0}function Os(){return new Promise(function(t,e){let n,r,i,s;return Os.cachedResult!==void 0?t(Os.cachedResult):Nm("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,pc(n).then(function(a){try{return r=a[1],mc(r,n.type,n.name,n.lastModified).then(function(u){try{return i=u,$n(r),pc(i).then(function(c){try{return s=c[0],Os.cachedResult=s.width===1&&s.height===2,t(Os.cachedResult)}catch(h){return e(h)}},e)}catch(c){return e(c)}},e)}catch(u){return e(u)}},e)}catch(a){return e(a)}},e)})}function ZT(t){return new Promise((e,n)=>{const r=new KT;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const u=s.getUint16(a,!1);if(a+=2,u==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const h=s.getUint16(a,c);a+=2;for(let d=0;d<h;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&u)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function eI(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=ih(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),$n(t)),o}function tI(t,e){const{width:n}=t,{height:r}=t,[i,s]=ih(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),$n(t),i}function pv(t,e,n=0){return new Promise(function(r,i){let s,o,a,u,c,h,d,f,g,v,C,x,w,A,R,O,M,b,S,m;function y(I=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=I,e.onProgress(Math.min(s,100))}function E(I){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(I,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,y(),pc(t,e).then((function(I){try{return[,u]=I,y(),c=eI(u,e),y(),new Promise(function(P,T){var L;if(!(L=e.exifOrientation))return ZT(t).then((function(D){try{return L=D,z.call(this)}catch(N){return T(N)}}).bind(this),T);function z(){return P(L)}return z.call(this)}).then((function(P){try{return h=P,y(),Os().then((function(T){try{return d=T?c:tI(c,h),y(),f=e.initialQuality||1,g=e.fileType||t.type,mc(d,g,t.name,t.lastModified,f).then((function(L){try{{let U=function(){if(o--&&(R>a||R>w)){let j,J;return j=m?.95*S.width:S.width,J=m?.95*S.height:S.height,[M,b]=ih(j,J),b.drawImage(S,0,0,j,J),f*=g==="image/png"?.85:.95,mc(M,g,t.name,t.lastModified,f).then(function(q){try{return O=q,$n(S),S=M,R=O.size,E(Math.min(99,Math.floor((A-R)/(A-a)*100))),U}catch(X){return i(X)}},i)}return[1]},V=function(){return $n(S),$n(M),$n(c),$n(d),$n(u),E(100),r(O)};var D=U,N=V;if(v=L,y(),C=v.size>a,x=v.size>t.size,!C&&!x)return E(100),r(v);var z;return w=t.size,A=v.size,R=A,S=d,m=!e.alwaysKeepResolution&&C,(z=(function(j){for(;j;){if(j.then)return void j.then(z,i);try{if(j.pop){if(j.length)return j.pop()?V.call(this):j;j=U}else j=j.call(this)}catch(J){return i(J)}}}).bind(this))(U)}}catch(U){return i(U)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(T){return i(T)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)})}const nM=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ud;function rM(t,e){return new Promise((n,r)=>{ud||(ud=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(nM));const i=new Worker(ud);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function kt(t,e){return new Promise(function(n,r){let i,s,o,a,u,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=g=>{o=g,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof tM))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||c)return pv(t,i).then((function(g){try{return s=g,f.call(this)}catch(v){return r(v)}}).bind(this),r);var h=(function(){try{return f.call(this)}catch(g){return r(g)}}).bind(this),d=function(g){try{return pv(t,i).then(function(v){try{return s=v,h()}catch(C){return r(C)}},r)}catch(v){return r(v)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",rM(t,i).then(function(g){try{return s=g,h()}catch{return d()}},d)}catch{d()}function f(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=HT(t,s))}catch{}return n(s)}})}kt.getDataUrlFromFile=QT,kt.getFilefromDataUrl=Nm,kt.loadImage=YT,kt.drawImageInCanvas=JT,kt.drawFileInCanvas=pc,kt.canvasToFile=mc,kt.getExifOrientation=ZT,kt.handleMaxWidthOrHeight=eI,kt.followExifOrientation=tI,kt.cleanupCanvasMemory=$n,kt.isAutoOrientationInBrowser=Os,kt.approximateBelowMaximumCanvasSizeOfBrowser=XT,kt.copyExifWithoutOrientation=HT,kt.getBrowserName=Li,kt.version="2.0.2";const iM=()=>{const{currentUser:t}=G.useContext(Ei),[e,n]=G.useState(null),[r,i]=G.useState(t==null?void 0:t.photoURL),s=async c=>{const h=c.target.files[0];if(h){const d=await o(h);n(d),a(d)}},o=async c=>{const h={maxSizeMB:1,maxWidthOrHeight:800,useWebWorker:!0};try{return await kt(c,h)}catch(d){console.error("Image compression error:",d)}},a=c=>{if(!c)return;const h=iE(NT,`profileImages/${t.uid}`),d=nE(h,c);d.on("state_changed",null,f=>{console.error("Upload error:",f)},()=>{rE(d.snapshot.ref).then(f=>{Aw($a.currentUser,{photoURL:f}).then(()=>{console.log("Profile image updated"),i(f),n(null),u(t.uid,f)}).catch(g=>{console.error("Error updating profile image:",g)})})})},u=async(c,h)=>{const d=Ot(yt,"users",c);try{await zn(d,{photoURL:h}),console.log("User photoURL updated successfully")}catch(f){console.error("Error updating photoURL:",f)}};return B.jsxs("div",{className:"navbar",children:[B.jsx("span",{className:"logo",children:"ChatZone"}),B.jsxs("div",{className:"user",children:[B.jsxs("div",{className:"avatar-container",children:[B.jsx("img",{src:r||"https://img.freepik.com/free-photo/pretty-smiling-joyfully-female-with-fair-hair-dressed-casually-looking-with-satisfaction_176420-15187.jpg",alt:"User avatar",className:"avatar-image",onClick:()=>document.getElementById("fileInput").click()}),B.jsx(TO,{className:"upload-icon",onClick:()=>document.getElementById("fileInput").click()}),B.jsx("input",{type:"file",id:"fileInput",accept:"image/*",style:{display:"none"},onChange:s})]}),B.jsx("span",{children:(t==null?void 0:t.displayName)||"Guest"}),B.jsx("button",{onClick:()=>MP($a),children:"Logout"})]})]})},sM=()=>{const[t,e]=G.useState(""),[n,r]=G.useState(null),[i,s]=G.useState(!1),{currentUser:o}=G.useContext(Ei),a=async()=>{const h=lO(Kb(yt,"users"),uO("displayName","==",t));try{const d=await fO(h);d.empty?(s(!0),r(null)):d.forEach(f=>{r(f.data()),s(!1)})}catch(d){s(!0),console.error("An error occurred while performing the operation:",d)}},u=h=>{h.code==="Enter"&&a()},c=async h=>{const d=o.uid>h.uid?o.uid+h.uid:h.uid+o.uid;try{(await RT(Ot(yt,"chats",d))).exists()||await CT(Ot(yt,"chats",d),{messages:[]}),await zn(Ot(yt,"userChats",o.uid),{[d+".userInfo"]:{uid:h.uid,displayName:h.displayName,photoURL:h.photoURL},[d+".date"]:bs()}),await zn(Ot(yt,"userChats",h.uid),{[d+".userInfo"]:{uid:o.uid,displayName:o.displayName,photoURL:o.photoURL},[d+".date"]:bs()})}catch(f){console.error(f)}r(null),e("")};return B.jsxs("div",{className:"search",children:[B.jsx("div",{className:"searchform",children:B.jsx("input",{type:"text",placeholder:"Find a user",onKeyDown:u,onChange:h=>e(h.target.value),value:t})}),i&&B.jsx("span",{children:"User not found"}),n&&B.jsxs("div",{className:"userchat",onClick:()=>c(n),children:[B.jsx("img",{src:n.photoURL,alt:"User avatar"}),B.jsx("div",{className:"userchatinfo",children:B.jsx("span",{children:n.displayName})})]})]})},oM=()=>{var s;const[t,e]=G.useState({}),{currentUser:n}=G.useContext(Ei),{dispatch:r}=G.useContext(_o);G.useEffect(()=>{const o=()=>{const a=PT(Ot(yt,"userChats",n.uid),u=>{e(u.data()||{})});return()=>{a()}};n!=null&&n.uid&&o()},[n.uid]);const i=async o=>{r({type:"CHANGE_USER",payload:o}),r({type:"CLEAR_MESSAGES"});const a=n.uid>o.uid?n.uid+o.uid:o.uid+n.uid,u=Ot(yt,"chats",a);(await RT(u)).exists()||console.error("Chat document does not exist.")};return B.jsx("div",{className:"chats",children:(s=Object.entries(t))==null?void 0:s.sort((o,a)=>a[1].date-o[1].date).map(o=>{var c;const a=o[1].date?o[1].date.toDate():null;let u="";return a&&(jD(new Date,zD(a,24))?u=hc(a,"HH:mm a"):u=hc(a,"MMMM dd, yyyy")),B.jsxs("div",{className:"userchat",onClick:()=>i(o[1].userInfo),children:[B.jsx("img",{src:o[1].userInfo.photoURL,alt:"user avatar"}),B.jsxs("div",{className:"userchatinfo",children:[B.jsx("span",{children:o[1].userInfo.displayName}),B.jsx("p",{children:((c=o[1].lastMessage)==null?void 0:c.text)||""})," ",u&&B.jsx("small",{children:u})," "]})]},o[0])})})},aM=()=>B.jsxs("div",{className:"sidebar",children:[B.jsx(iM,{}),B.jsx(sM,{}),B.jsx(oM,{})]}),lM=()=>B.jsx("div",{className:"home",children:B.jsxs("div",{className:"home-container",children:[B.jsx(aM,{}),B.jsx(QD,{})]})}),uM=()=>B.jsx("div",{className:"verifycontainer",children:B.jsxs("div",{className:"verifycard",children:[B.jsx("h2",{className:"verifytext",children:"Email Verification"}),B.jsx("p",{className:"verifypara",children:"A verification email has been sent to your email address. Please check your inbox and follow the instructions to verify your account."}),B.jsx("button",{className:"verifybutton",children:"Resend Verification Email"}),B.jsx("a",{href:"/login",className:"link",children:"Go to Login"})]})});function cM(){const{currentUser:t}=G.useContext(Ei),e=({children:n})=>t?n:B.jsx(Hh,{to:"/login"});return e.propTypes={children:lr.node.isRequired},B.jsx(JA,{children:B.jsxs(HA,{children:[B.jsx(ps,{path:"/",element:t?B.jsx(Hh,{to:"/home"}):B.jsx(Hh,{to:"/login"})}),B.jsx(ps,{path:"/signup",element:B.jsx(IO,{})}),B.jsx(ps,{path:"/login",element:B.jsx(SO,{})}),B.jsx(ps,{path:"/verify-email",element:B.jsx(uM,{})})," ",B.jsx(ps,{path:"/home",element:B.jsx(e,{children:B.jsx(lM,{})})})]})})}P1(document.getElementById("root")).render(B.jsx(bT,{children:B.jsx(UT,{children:B.jsx(G.StrictMode,{children:B.jsx(cM,{})})})}));
